<!DOCTYPE html>
<html>
<head>
  <title>trix.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "client/assets/trix.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>trix.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>Trix 0.10.0
Copyright Â© 2016 Basecamp, LLC
http://trix-editor.org/</p>
</div>
<div class="body">
</div>
</div>
<div class="dox">
<div class="summary">
<p>(function(){}).call(this),function(){var t;null==window.Set&amp;&amp;(window.Set=t=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype[&quot;delete&quot;]=function(t){var e;return-1===(e=this.values.indexOf(t))?!1:(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(t){function e(){}function n(t,e){return function(){t.apply(e,arguments)}}function o(t){if(&quot;object&quot;!=typeof this)throw new TypeError(&quot;Promises must be constructed via new&quot;);if(&quot;function&quot;!=typeof t)throw new TypeError(&quot;not a function&quot;);this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function i(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void h(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?r:s)(e.promise,t._value);var o;try{o=n(t._value)}catch(i){return void s(e.promise,i)}r(e.promise,o)}))}function r(t,e){try{if(e===t)throw new TypeError(&quot;A promise cannot be resolved with itself.&quot;);if(e&amp;&amp;(&quot;object&quot;==typeof e||&quot;function&quot;==typeof e)){var i=e.then;if(e instanceof o)return t._state=3,t._value=e,void a(t);if(&quot;function&quot;==typeof i)return void c(n(i,e),t)}t._state=1,t._value=e,a(t)}catch(r){s(t,r)}}function s(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&amp;&amp;0===t._deferreds.length&amp;&amp;setTimeout(function(){t._handled||p(t._value)},1);for(var e=0,n=t._deferreds.length;n&gt;e;e++)i(t,t._deferreds[e]);t._deferreds=null}function u(t,e,n){this.onFulfilled=&quot;function&quot;==typeof t?t:null,this.onRejected=&quot;function&quot;==typeof e?e:null,this.promise=n}function c(t,e){var n=!1;try{t(function(t){n||(n=!0,r(e,t))},function(t){n||(n=!0,s(e,t))})}catch(o){if(n)return;n=!0,s(e,o)}}var l=setTimeout,h=&quot;function&quot;==typeof setImmediate&amp;&amp;setImmediate||function(t){l(t,1)},p=function(t){&quot;undefined&quot;!=typeof console&amp;&amp;console&amp;&amp;console.warn(&quot;Possible Unhandled Promise Rejection:&quot;,t)};o.prototype[&quot;catch&quot;]=function(t){return this.then(null,t)},o.prototype.then=function(t,n){var r=new o(e);return i(this,new u(t,n,r)),r},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function o(r,s){try{if(s&amp;&amp;(&quot;object&quot;==typeof s||&quot;function&quot;==typeof s)){var a=s.then;if(&quot;function&quot;==typeof a)return void a.call(s,function(t){o(r,t)},n)}e[r]=s,0===--i&amp;&amp;t(e)}catch(u){n(u)}}if(0===e.length)return t([]);for(var i=e.length,r=0;r&lt;e.length;r++)o(r,e[r])})},o.resolve=function(t){return t&amp;&amp;&quot;object&quot;==typeof t&amp;&amp;t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var o=0,i=t.length;i&gt;o;o++)t[o].then(e,n)})},o._setImmediateFn=function(t){h=t},o._setUnhandledRejectionFn=function(t){p=t},&quot;undefined&quot;!=typeof module&amp;&amp;module.exports?module.exports=o:t.Promise||(t.Promise=o)}(this),</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">WeakMap</span>&amp;&amp;!<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">Object</span>.defineProperty,e=<span class="hljs-built_in">Date</span>.now()%<span class="hljs-number">1e9</span>,n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.name=<span class="hljs-string">"__st"</span>+(<span class="hljs-number">1e9</span>*<span class="hljs-built_in">Math</span>.random()&gt;&gt;&gt;<span class="hljs-number">0</span>)+(e++ +<span class="hljs-string">"__"</span>)};n.prototype={<span class="hljs-attr">set</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">var</span> o=e[<span class="hljs-keyword">this</span>.name];<span class="hljs-keyword">return</span> o&amp;&amp;o[<span class="hljs-number">0</span>]===e?o[<span class="hljs-number">1</span>]=n:t(e,<span class="hljs-keyword">this</span>.name,{<span class="hljs-attr">value</span>:[e,n],<span class="hljs-attr">writable</span>:!<span class="hljs-number">0</span>}),<span class="hljs-keyword">this</span>},<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=t[<span class="hljs-keyword">this</span>.name])&amp;&amp;e[<span class="hljs-number">0</span>]===t?e[<span class="hljs-number">1</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-string">"delete"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=t[<span class="hljs-keyword">this</span>.name];<span class="hljs-keyword">return</span> e&amp;&amp;e[<span class="hljs-number">0</span>]===t?(e[<span class="hljs-number">0</span>]=e[<span class="hljs-number">1</span>]=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,!<span class="hljs-number">0</span>):!<span class="hljs-number">1</span>},<span class="hljs-attr">has</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=t[<span class="hljs-keyword">this</span>.name];<span class="hljs-keyword">return</span> e?e[<span class="hljs-number">0</span>]===t:!<span class="hljs-number">1</span>}},<span class="hljs-built_in">window</span>.WeakMap=n}(),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">t</span>)</span>{A.push(t),b||(b=!<span class="hljs-number">0</span>,g(o))}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.ShadowDOMPolyfill&amp;&amp;<span class="hljs-built_in">window</span>.ShadowDOMPolyfill.wrapIfNeeded(t)||t}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{b=!<span class="hljs-number">1</span>;<span class="hljs-keyword">var</span> t=A;A=[],t.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> t.uid_-e.uid_});<span class="hljs-keyword">var</span> e=!<span class="hljs-number">1</span>;t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n=t.takeRecords();i(t),n.length&amp;&amp;(t.callback_(n,t),e=!<span class="hljs-number">0</span>)}),e&amp;&amp;o()}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">t</span>)</span>{t.nodes_.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=m.get(e);n&amp;&amp;n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{e.observer===t&amp;&amp;e.removeTransientObservers()})})}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=t;n;n=n.parentNode){<span class="hljs-keyword">var</span> o=m.get(n);<span class="hljs-keyword">if</span>(o)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;o.length;i++){<span class="hljs-keyword">var</span> r=o[i],s=r.options;<span class="hljs-keyword">if</span>(n===t||s.subtree){<span class="hljs-keyword">var</span> a=e(s);a&amp;&amp;r.enqueue(a)}}}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.callback_=t,<span class="hljs-keyword">this</span>.nodes_=[],<span class="hljs-keyword">this</span>.records_=[],<span class="hljs-keyword">this</span>.uid_=++C}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">this</span>.type=t,<span class="hljs-keyword">this</span>.target=e,<span class="hljs-keyword">this</span>.addedNodes=[],<span class="hljs-keyword">this</span>.removedNodes=[],<span class="hljs-keyword">this</span>.previousSibling=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.nextSibling=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.attributeName=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.attributeNamespace=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.oldValue=<span class="hljs-literal">null</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">u</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> a(t.type,t.target);<span class="hljs-keyword">return</span> e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> w=<span class="hljs-keyword">new</span> a(t,e)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">l</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> x?x:(x=u(w),x.oldValue=t,x)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h</span>(<span class="hljs-params"></span>)</span>{w=x=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">p</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t===x||t===w}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">d</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> t===e?t:x&amp;&amp;p(t)?x:<span class="hljs-literal">null</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">this</span>.observer=t,<span class="hljs-keyword">this</span>.target=e,<span class="hljs-keyword">this</span>.options=n,<span class="hljs-keyword">this</span>.transientObservedNodes=[]}<span class="hljs-keyword">if</span>(!t.JsMutationObserver){<span class="hljs-keyword">var</span> g,m=<span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>;<span class="hljs-keyword">if</span>(<span class="hljs-regexp">/Trident|Edge/</span>.test(navigator.userAgent))g=setTimeout;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.setImmediate)g=<span class="hljs-built_in">window</span>.setImmediate;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> y=[],v=<span class="hljs-built_in">String</span>(<span class="hljs-built_in">Math</span>.random());<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"message"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(t.data===v){<span class="hljs-keyword">var</span> e=y;y=[],e.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{t()})}}),g=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{y.push(t),<span class="hljs-built_in">window</span>.postMessage(v,<span class="hljs-string">"*"</span>)}}<span class="hljs-keyword">var</span> b=!<span class="hljs-number">1</span>,A=[],C=<span class="hljs-number">0</span>;s.prototype={<span class="hljs-attr">observe</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">if</span>(t=n(t),!e.childList&amp;&amp;!e.attributes&amp;&amp;!e.characterData||e.attributeOldValue&amp;&amp;!e.attributes||e.attributeFilter&amp;&amp;e.attributeFilter.length&amp;&amp;!e.attributes||e.characterDataOldValue&amp;&amp;!e.characterData)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">SyntaxError</span>;<span class="hljs-keyword">var</span> o=m.get(t);o||m.set(t,o=[]);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i,r=<span class="hljs-number">0</span>;r&lt;o.length;r++)<span class="hljs-keyword">if</span>(o[r].observer===<span class="hljs-keyword">this</span>){i=o[r],i.removeListeners(),i.options=e;<span class="hljs-keyword">break</span>}i||(i=<span class="hljs-keyword">new</span> f(<span class="hljs-keyword">this</span>,t,e),o.push(i),<span class="hljs-keyword">this</span>.nodes_.push(t)),i.addListeners()},<span class="hljs-attr">disconnect</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.nodes_.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=m.get(t),n=<span class="hljs-number">0</span>;n&lt;e.length;n++){<span class="hljs-keyword">var</span> o=e[n];<span class="hljs-keyword">if</span>(o.observer===<span class="hljs-keyword">this</span>){o.removeListeners(),e.splice(n,<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span>}}},<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.records_=[]},<span class="hljs-attr">takeRecords</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>.records_;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.records_=[],t}};<span class="hljs-keyword">var</span> w,x;f.prototype={<span class="hljs-attr">enqueue</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.observer.records_,o=n.length;<span class="hljs-keyword">if</span>(n.length&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">var</span> i=n[o<span class="hljs-number">-1</span>],r=d(i,t);<span class="hljs-keyword">if</span>(r)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span>(n[o<span class="hljs-number">-1</span>]=r)}<span class="hljs-keyword">else</span> e(<span class="hljs-keyword">this</span>.observer);n[o]=t},<span class="hljs-attr">addListeners</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.addListeners_(<span class="hljs-keyword">this</span>.target)},<span class="hljs-attr">addListeners_</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.options;e.attributes&amp;&amp;t.addEventListener(<span class="hljs-string">"DOMAttrModified"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>),e.characterData&amp;&amp;t.addEventListener(<span class="hljs-string">"DOMCharacterDataModified"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>),e.childList&amp;&amp;t.addEventListener(<span class="hljs-string">"DOMNodeInserted"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>),(e.childList||e.subtree)&amp;&amp;t.addEventListener(<span class="hljs-string">"DOMNodeRemoved"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>)},<span class="hljs-attr">removeListeners</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.removeListeners_(<span class="hljs-keyword">this</span>.target)},<span class="hljs-attr">removeListeners_</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.options;e.attributes&amp;&amp;t.removeEventListener(<span class="hljs-string">"DOMAttrModified"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>),e.characterData&amp;&amp;t.removeEventListener(<span class="hljs-string">"DOMCharacterDataModified"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>),e.childList&amp;&amp;t.removeEventListener(<span class="hljs-string">"DOMNodeInserted"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>),(e.childList||e.subtree)&amp;&amp;t.removeEventListener(<span class="hljs-string">"DOMNodeRemoved"</span>,<span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span>)},<span class="hljs-attr">addTransientObserver</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(t!==<span class="hljs-keyword">this</span>.target){<span class="hljs-keyword">this</span>.addListeners_(t),<span class="hljs-keyword">this</span>.transientObservedNodes.push(t);<span class="hljs-keyword">var</span> e=m.get(t);e||m.set(t,e=[]),e.push(<span class="hljs-keyword">this</span>)}},<span class="hljs-attr">removeTransientObservers</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>.transientObservedNodes;<span class="hljs-keyword">this</span>.transientObservedNodes=[],t.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.removeListeners_(t);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=m.get(t),n=<span class="hljs-number">0</span>;n&lt;e.length;n++)<span class="hljs-keyword">if</span>(e[n]===<span class="hljs-keyword">this</span>){e.splice(n,<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span>}},<span class="hljs-keyword">this</span>)},<span class="hljs-attr">handleEvent</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">switch</span>(t.stopImmediatePropagation(),t.type){<span class="hljs-keyword">case</span><span class="hljs-string">"DOMAttrModified"</span>:<span class="hljs-keyword">var</span> e=t.attrName,n=t.relatedNode.namespaceURI,o=t.target,i=<span class="hljs-keyword">new</span> c(<span class="hljs-string">"attributes"</span>,o);i.attributeName=e,i.attributeNamespace=n;<span class="hljs-keyword">var</span> s=t.attrChange===MutationEvent.ADDITION?<span class="hljs-literal">null</span>:t.prevValue;r(o,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>!t.attributes||t.attributeFilter&amp;&amp;t.attributeFilter.length&amp;&amp;<span class="hljs-number">-1</span>===t.attributeFilter.indexOf(e)&amp;&amp;<span class="hljs-number">-1</span>===t.attributeFilter.indexOf(n)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t.attributeOldValue?l(s):i});<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"DOMCharacterDataModified"</span>:<span class="hljs-keyword">var</span> o=t.target,i=c(<span class="hljs-string">"characterData"</span>,o),s=t.prevValue;r(o,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.characterData?t.characterDataOldValue?l(s):i:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>});<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"DOMNodeRemoved"</span>:<span class="hljs-keyword">this</span>.addTransientObserver(t.target);<span class="hljs-keyword">case</span><span class="hljs-string">"DOMNodeInserted"</span>:<span class="hljs-keyword">var</span> a,u,p=t.target;<span class="hljs-string">"DOMNodeInserted"</span>===t.type?(a=[p],u=[]):(a=[],u=[p]);<span class="hljs-keyword">var</span> d=p.previousSibling,f=p.nextSibling,i=c(<span class="hljs-string">"childList"</span>,t.target.parentNode);i.addedNodes=a,i.removedNodes=u,i.previousSibling=d,i.nextSibling=f,r(t.relatedNode,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.childList?i:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>})}h()}},t.JsMutationObserver=s,t.MutationObserver||(t.MutationObserver=s,s._isPolyfilled=!<span class="hljs-number">0</span>)}}(self),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-string">"use strict"</span>;<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">window</span>.performance){<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">Date</span>.now();<span class="hljs-built_in">window</span>.performance={<span class="hljs-attr">now</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Date</span>.now()-t}}}<span class="hljs-built_in">window</span>.requestAnimationFrame||(<span class="hljs-built_in">window</span>.requestAnimationFrame=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">window</span>.webkitRequestAnimationFrame||<span class="hljs-built_in">window</span>.mozRequestAnimationFrame;<span class="hljs-keyword">return</span> t?<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> t(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e(performance.now())})}:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.setTimeout(t,<span class="hljs-number">1e3</span>/<span class="hljs-number">60</span>)}}()),<span class="hljs-built_in">window</span>.cancelAnimationFrame||(<span class="hljs-built_in">window</span>.cancelAnimationFrame=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.webkitCancelAnimationFrame||<span class="hljs-built_in">window</span>.mozCancelAnimationFrame||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{clearTimeout(t)}}());<span class="hljs-keyword">var</span> e=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">"Event"</span>);<span class="hljs-keyword">return</span> t.initEvent(<span class="hljs-string">"foo"</span>,!<span class="hljs-number">0</span>,!<span class="hljs-number">0</span>),t.preventDefault(),t.defaultPrevented}();<span class="hljs-keyword">if</span>(!e){<span class="hljs-keyword">var</span> n=Event.prototype.preventDefault;Event.prototype.preventDefault=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.cancelable&amp;&amp;(n.call(<span class="hljs-keyword">this</span>),<span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-keyword">this</span>,<span class="hljs-string">"defaultPrevented"</span>,{<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>},<span class="hljs-attr">configurable</span>:!<span class="hljs-number">0</span>}))}}<span class="hljs-keyword">var</span> o=<span class="hljs-regexp">/Trident/</span>.test(navigator.userAgent);<span class="hljs-keyword">if</span>((!<span class="hljs-built_in">window</span>.CustomEvent||o&amp;&amp;<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>.CustomEvent)&amp;&amp;(<span class="hljs-built_in">window</span>.CustomEvent=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{e=e||{};<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">"CustomEvent"</span>);<span class="hljs-keyword">return</span> n.initCustomEvent(t,<span class="hljs-built_in">Boolean</span>(e.bubbles),<span class="hljs-built_in">Boolean</span>(e.cancelable),e.detail),n},<span class="hljs-built_in">window</span>.CustomEvent.prototype=<span class="hljs-built_in">window</span>.Event.prototype),!<span class="hljs-built_in">window</span>.Event||o&amp;&amp;<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>.Event){<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">window</span>.Event;<span class="hljs-built_in">window</span>.Event=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{e=e||{};<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">"Event"</span>);<span class="hljs-keyword">return</span> n.initEvent(t,<span class="hljs-built_in">Boolean</span>(e.bubbles),<span class="hljs-built_in">Boolean</span>(e.cancelable)),n},<span class="hljs-built_in">window</span>.Event.prototype=i.prototype}}(<span class="hljs-built_in">window</span>.WebComponents),<span class="hljs-built_in">window</span>.CustomElements=<span class="hljs-built_in">window</span>.CustomElements||{<span class="hljs-attr">flags</span>:{}},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=t.flags,n=[],o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{n.push(t)},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{e(t)})};t.addModule=o,t.initializeModules=i,t.hasNative=<span class="hljs-built_in">Boolean</span>(<span class="hljs-built_in">document</span>.registerElement),t.isIE=<span class="hljs-regexp">/Trident/</span>.test(navigator.userAgent),t.useNative=!e.register&amp;&amp;t.hasNative&amp;&amp;!<span class="hljs-built_in">window</span>.ShadowDOMPolyfill&amp;&amp;(!<span class="hljs-built_in">window</span>.HTMLImports||<span class="hljs-built_in">window</span>.HTMLImports.useNative)}(<span class="hljs-built_in">window</span>.CustomElements),<span class="hljs-built_in">window</span>.CustomElements.addModule(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">t,e</span>)</span>{n(t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e(t)?!<span class="hljs-number">0</span>:<span class="hljs-keyword">void</span> o(t,e)}),o(t,e)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t,e,o</span>)</span>{<span class="hljs-keyword">var</span> i=t.firstElementChild;<span class="hljs-keyword">if</span>(!i)<span class="hljs-keyword">for</span>(i=t.firstChild;i&amp;&amp;i.nodeType!==Node.ELEMENT_NODE;)i=i.nextSibling;<span class="hljs-keyword">for</span>(;i;)e(i,o)!==!<span class="hljs-number">0</span>&amp;&amp;n(i,e,o),i=i.nextElementSibling;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o=t.shadowRoot;o;)e(o,n),o=o.olderShadowRoot}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">t,e</span>)</span>{r(t,e,[])}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">if</span>(t=<span class="hljs-built_in">window</span>.wrap(t),!(n.indexOf(t)&gt;=<span class="hljs-number">0</span>)){n.push(t);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o,i=t.querySelectorAll(<span class="hljs-string">"link[rel="</span>+s+<span class="hljs-string">"]"</span>),a=<span class="hljs-number">0</span>,u=i.length;u&gt;a&amp;&amp;(o=i[a]);a++)o.import&amp;&amp;r(o.import,e,n);e(t)}}<span class="hljs-keyword">var</span> s=<span class="hljs-built_in">window</span>.HTMLImports?<span class="hljs-built_in">window</span>.HTMLImports.IMPORT_LINK_TYPE:<span class="hljs-string">"none"</span>;t.forDocumentTree=i,t.forSubtree=e}),<span class="hljs-built_in">window</span>.CustomElements.addModule(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> n(t,e)||o(t,e)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">return</span> t.upgrade(e,n)?!<span class="hljs-number">0</span>:<span class="hljs-keyword">void</span>(n&amp;&amp;s(e))}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t,e</span>)</span>{b(t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> n(t,e)?!<span class="hljs-number">0</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>})}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">t</span>)</span>{x.push(t),w||(w=!<span class="hljs-number">0</span>,setTimeout(r))}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params"></span>)</span>{w=!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t,e=x,n=<span class="hljs-number">0</span>,o=e.length;o&gt;n&amp;&amp;(t=e[n]);n++)t();x=[]}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params">t</span>)</span>{C?i(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{a(t)}):a(t)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params">t</span>)</span>{t.__upgraded__&amp;&amp;!t.__attached&amp;&amp;(t.__attached=!<span class="hljs-number">0</span>,t.attachedCallback&amp;&amp;t.attachedCallback())}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">u</span>(<span class="hljs-params">t</span>)</span>{c(t),b(t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{c(t)})}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span>(<span class="hljs-params">t</span>)</span>{C?i(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{l(t)}):l(t)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">l</span>(<span class="hljs-params">t</span>)</span>{t.__upgraded__&amp;&amp;t.__attached&amp;&amp;(t.__attached=!<span class="hljs-number">1</span>,t.detachedCallback&amp;&amp;t.detachedCallback())}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=t,n=<span class="hljs-built_in">window</span>.wrap(<span class="hljs-built_in">document</span>);e;){<span class="hljs-keyword">if</span>(e==n)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&amp;&amp;e.host}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">p</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(t.shadowRoot&amp;&amp;!t.shadowRoot.__watched){v.dom&amp;&amp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"watching shadow-root for: "</span>,t.localName);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=t.shadowRoot;e;)g(e),e=e.olderShadowRoot}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">d</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">if</span>(v.dom){<span class="hljs-keyword">var</span> o=n[<span class="hljs-number">0</span>];<span class="hljs-keyword">if</span>(o&amp;&amp;<span class="hljs-string">"childList"</span>===o.type&amp;&amp;o.addedNodes&amp;&amp;o.addedNodes){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=o.addedNodes[<span class="hljs-number">0</span>];i&amp;&amp;i!==<span class="hljs-built_in">document</span>&amp;&amp;!i.host;)i=i.parentNode;<span class="hljs-keyword">var</span> r=i&amp;&amp;(i.URL||i._URL||i.host&amp;&amp;i.host.localName)||<span class="hljs-string">""</span>;r=r.split(<span class="hljs-string">"/?"</span>).shift().split(<span class="hljs-string">"/"</span>).pop()}<span class="hljs-built_in">console</span>.group(<span class="hljs-string">"mutations (%d) [%s]"</span>,n.length,r||<span class="hljs-string">""</span>)}<span class="hljs-keyword">var</span> s=h(t);n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-string">"childList"</span>===t.type&amp;&amp;(E(t.addedNodes,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{t.localName&amp;&amp;e(t,s)}),E(t.removedNodes,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{t.localName&amp;&amp;u(t)}))}),v.dom&amp;&amp;<span class="hljs-built_in">console</span>.groupEnd()}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(t=<span class="hljs-built_in">window</span>.wrap(t),t||(t=<span class="hljs-built_in">window</span>.wrap(<span class="hljs-built_in">document</span>));t.parentNode;)t=t.parentNode;<span class="hljs-keyword">var</span> e=t.__observer;e&amp;&amp;(d(t,e.takeRecords()),r())}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">g</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(!t.__observer){<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> MutationObserver(d.bind(<span class="hljs-keyword">this</span>,t));e.observe(t,{<span class="hljs-attr">childList</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">subtree</span>:!<span class="hljs-number">0</span>}),t.__observer=e}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">m</span>(<span class="hljs-params">t</span>)</span>{t=<span class="hljs-built_in">window</span>.wrap(t),v.dom&amp;&amp;<span class="hljs-built_in">console</span>.group(<span class="hljs-string">"upgradeDocument: "</span>,t.baseURI.split(<span class="hljs-string">"/"</span>).pop());<span class="hljs-keyword">var</span> n=t===<span class="hljs-built_in">window</span>.wrap(<span class="hljs-built_in">document</span>);e(t,n),g(t),v.dom&amp;&amp;<span class="hljs-built_in">console</span>.groupEnd()}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">y</span>(<span class="hljs-params">t</span>)</span>{A(t,m)}<span class="hljs-keyword">var</span> v=t.flags,b=t.forSubtree,A=t.forDocumentTree,C=<span class="hljs-built_in">window</span>.MutationObserver._isPolyfilled&amp;&amp;v[<span class="hljs-string">"throttle-attached"</span>];t.hasPolyfillMutations=C,t.hasThrottledAttached=C;<span class="hljs-keyword">var</span> w=!<span class="hljs-number">1</span>,x=[],E=<span class="hljs-built_in">Array</span>.prototype.forEach.call.bind(<span class="hljs-built_in">Array</span>.prototype.forEach),S=Element.prototype.createShadowRoot;S&amp;&amp;(Element.prototype.createShadowRoot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=S.call(<span class="hljs-keyword">this</span>);<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.CustomElements.watchShadow(<span class="hljs-keyword">this</span>),t}),t.watchShadow=p,t.upgradeDocumentTree=y,t.upgradeDocument=m,t.upgradeSubtree=o,t.upgradeAll=e,t.attached=s,t.takeRecords=f}),<span class="hljs-built_in">window</span>.CustomElements.addModule(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"template"</span>===e.localName&amp;&amp;<span class="hljs-built_in">window</span>.HTMLTemplateElement&amp;&amp;HTMLTemplateElement.decorate&amp;&amp;HTMLTemplateElement.decorate(e),!e.__upgraded__&amp;&amp;e.nodeType===Node.ELEMENT_NODE){<span class="hljs-keyword">var</span> i=e.getAttribute(<span class="hljs-string">"is"</span>),r=t.getRegisteredDefinition(e.localName)||t.getRegisteredDefinition(i);<span class="hljs-keyword">if</span>(r&amp;&amp;(i&amp;&amp;r.tag==e.localName||!i&amp;&amp;!r.extends))<span class="hljs-keyword">return</span> n(e,r,o)}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">e,n,i</span>)</span>{<span class="hljs-keyword">return</span> s.upgrade&amp;&amp;<span class="hljs-built_in">console</span>.group(<span class="hljs-string">"upgrade:"</span>,e.localName),n.is&amp;&amp;e.setAttribute(<span class="hljs-string">"is"</span>,n.is),o(e,n),e.__upgraded__=!<span class="hljs-number">0</span>,r(e),i&amp;&amp;t.attached(e),t.upgradeSubtree(e,i),s.upgrade&amp;&amp;<span class="hljs-built_in">console</span>.groupEnd(),e}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-built_in">Object</span>.__proto__?t.__proto__=e.prototype:(i(t,e.prototype,e.native),t.__proto__=e.prototype)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o={},i=e;i!==n&amp;&amp;i!==HTMLElement.prototype;){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r,s=<span class="hljs-built_in">Object</span>.getOwnPropertyNames(i),a=<span class="hljs-number">0</span>;r=s[a];a++)o[r]||(<span class="hljs-built_in">Object</span>.defineProperty(t,r,<span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(i,r)),o[r]=<span class="hljs-number">1</span>);i=<span class="hljs-built_in">Object</span>.getPrototypeOf(i)}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params">t</span>)</span>{t.createdCallback&amp;&amp;t.createdCallback()}<span class="hljs-keyword">var</span> s=t.flags;t.upgrade=e,t.upgradeWithDefinition=n,t.implementPrototype=o}),<span class="hljs-built_in">window</span>.CustomElements.addModule(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> u=o||{};<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"document.registerElement: first argument `name` must not be empty"</span>);<span class="hljs-keyword">if</span>(e.indexOf(<span class="hljs-string">"-"</span>)&lt;<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"</span>+<span class="hljs-built_in">String</span>(e)+<span class="hljs-string">"'."</span>);<span class="hljs-keyword">if</span>(i(e))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Failed to execute 'registerElement' on 'Document': Registration failed for type '"</span>+<span class="hljs-built_in">String</span>(e)+<span class="hljs-string">"'. The type name is invalid."</span>);<span class="hljs-keyword">if</span>(c(e))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"DuplicateDefinitionError: a type with name '"</span>+<span class="hljs-built_in">String</span>(e)+<span class="hljs-string">"' is already registered"</span>);<span class="hljs-keyword">return</span> u.prototype||(u.prototype=<span class="hljs-built_in">Object</span>.create(HTMLElement.prototype)),u.__name=e.toLowerCase(),u.extends&amp;&amp;(u.extends=u.extends.toLowerCase()),u.lifecycle=u.lifecycle||{},u.ancestry=r(u.extends),s(u),a(u),n(u.prototype),l(u.__name,u),u.ctor=h(u),u.ctor.prototype=u.prototype,u.prototype.constructor=u.ctor,t.ready&amp;&amp;m(<span class="hljs-built_in">document</span>),u.ctor}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(!t.setAttribute._polyfilled){<span class="hljs-keyword">var</span> e=t.setAttribute;t.setAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{o.call(<span class="hljs-keyword">this</span>,t,n,e)};<span class="hljs-keyword">var</span> n=t.removeAttribute;t.removeAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{o.call(<span class="hljs-keyword">this</span>,t,<span class="hljs-literal">null</span>,n)},t.setAttribute._polyfilled=!<span class="hljs-number">0</span>}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t,e,n</span>)</span>{t=t.toLowerCase();<span class="hljs-keyword">var</span> o=<span class="hljs-keyword">this</span>.getAttribute(t);n.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>.getAttribute(t);<span class="hljs-keyword">this</span>.attributeChangedCallback&amp;&amp;i!==o&amp;&amp;<span class="hljs-keyword">this</span>.attributeChangedCallback(t,o,i)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>;e&lt;C.length;e++)<span class="hljs-keyword">if</span>(t===C[e])<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=c(t);<span class="hljs-keyword">return</span> e?r(e.extends).concat([e]):[]}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e,n=t.extends,o=<span class="hljs-number">0</span>;e=t.ancestry[o];o++)n=e.is&amp;&amp;e.tag;t.tag=n||t.__name,n&amp;&amp;(t.is=t.__name)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">Object</span>.__proto__){<span class="hljs-keyword">var</span> e=HTMLElement.prototype;<span class="hljs-keyword">if</span>(t.is){<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">document</span>.createElement(t.tag);e=<span class="hljs-built_in">Object</span>.getPrototypeOf(n)}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o,i=t.prototype,r=!<span class="hljs-number">1</span>;i;)i==e&amp;&amp;(r=!<span class="hljs-number">0</span>),o=<span class="hljs-built_in">Object</span>.getPrototypeOf(i),o&amp;&amp;(i.__proto__=o),i=o;r||<span class="hljs-built_in">console</span>.warn(t.tag+<span class="hljs-string">" prototype not found in prototype chain for "</span>+t.is),t.native=e}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">u</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> v(E(t.tag),t)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t?w[t.toLowerCase()]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">l</span>(<span class="hljs-params">t,e</span>)</span>{w[t]=e}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> u(t)}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">p</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">return</span> t===x?d(e,n):S(t,e)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">d</span>(<span class="hljs-params">t,e</span>)</span>{t&amp;&amp;(t=t.toLowerCase()),e&amp;&amp;(e=e.toLowerCase());<span class="hljs-keyword">var</span> n=c(e||t);<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">if</span>(t==n.tag&amp;&amp;e==n.is)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> n.ctor;<span class="hljs-keyword">if</span>(!e&amp;&amp;!n.is)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> n.ctor}<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> e?(o=d(t),o.setAttribute(<span class="hljs-string">"is"</span>,e),o):(o=E(t),t.indexOf(<span class="hljs-string">"-"</span>)&gt;=<span class="hljs-number">0</span>&amp;&amp;b(o,HTMLElement),o)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n=t[e];t[e]=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=n.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">return</span> y(t),t}}<span class="hljs-keyword">var</span> g,m=(t.isIE,t.upgradeDocumentTree),y=t.upgradeAll,v=t.upgradeWithDefinition,b=t.implementPrototype,A=t.useNative,C=[<span class="hljs-string">"annotation-xml"</span>,<span class="hljs-string">"color-profile"</span>,<span class="hljs-string">"font-face"</span>,<span class="hljs-string">"font-face-src"</span>,<span class="hljs-string">"font-face-uri"</span>,<span class="hljs-string">"font-face-format"</span>,<span class="hljs-string">"font-face-name"</span>,<span class="hljs-string">"missing-glyph"</span>],w={},x=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span>,E=<span class="hljs-built_in">document</span>.createElement.bind(<span class="hljs-built_in">document</span>),S=<span class="hljs-built_in">document</span>.createElementNS.bind(<span class="hljs-built_in">document</span>);g=<span class="hljs-built_in">Object</span>.__proto__||A?<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">instanceof</span> e}:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">if</span>(t <span class="hljs-keyword">instanceof</span> e)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=t;n;){<span class="hljs-keyword">if</span>(n===e.prototype)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;n=n.__proto__}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},f(Node.prototype,<span class="hljs-string">"cloneNode"</span>),f(<span class="hljs-built_in">document</span>,<span class="hljs-string">"importNode"</span>),<span class="hljs-built_in">document</span>.registerElement=e,<span class="hljs-built_in">document</span>.createElement=d,<span class="hljs-built_in">document</span>.createElementNS=p,t.registry=w,t.instanceof=g,t.reservedTagList=C,t.getRegisteredDefinition=c,<span class="hljs-built_in">document</span>.register=<span class="hljs-built_in">document</span>.registerElement}),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params"></span>)</span>{r(<span class="hljs-built_in">window</span>.wrap(<span class="hljs-built_in">document</span>)),<span class="hljs-built_in">window</span>.CustomElements.ready=!<span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">window</span>.requestAnimationFrame||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{setTimeout(t,<span class="hljs-number">16</span>)};t(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">window</span>.CustomElements.readyTime=<span class="hljs-built_in">Date</span>.now(),<span class="hljs-built_in">window</span>.HTMLImports&amp;&amp;(<span class="hljs-built_in">window</span>.CustomElements.elapsed=<span class="hljs-built_in">window</span>.CustomElements.readyTime-<span class="hljs-built_in">window</span>.HTMLImports.readyTime),<span class="hljs-built_in">document</span>.dispatchEvent(<span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">"WebComponentsReady"</span>,{<span class="hljs-attr">bubbles</span>:!<span class="hljs-number">0</span>}))})})}{<span class="hljs-keyword">var</span> n=t.useNative,o=t.initializeModules;t.isIE}<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">var</span> i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{};t.watchShadow=i,t.upgrade=i,t.upgradeAll=i,t.upgradeDocumentTree=i,t.upgradeSubtree=i,t.takeRecords=i,t.instanceof=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">instanceof</span> e}}<span class="hljs-keyword">else</span> o();<span class="hljs-keyword">var</span> r=t.upgradeDocumentTree,s=t.upgradeDocument;<span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.wrap||(<span class="hljs-built_in">window</span>.ShadowDOMPolyfill?(<span class="hljs-built_in">window</span>.wrap=<span class="hljs-built_in">window</span>.ShadowDOMPolyfill.wrapIfNeeded,<span class="hljs-built_in">window</span>.unwrap=<span class="hljs-built_in">window</span>.ShadowDOMPolyfill.unwrapIfNeeded):<span class="hljs-built_in">window</span>.wrap=<span class="hljs-built_in">window</span>.unwrap=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t}),<span class="hljs-built_in">window</span>.HTMLImports&amp;&amp;(<span class="hljs-built_in">window</span>.HTMLImports.__importsParsingHook=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{t.import&amp;&amp;s(wrap(t.import))}),<span class="hljs-string">"complete"</span>===<span class="hljs-built_in">document</span>.readyState||t.flags.eager)e();<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">"interactive"</span>!==<span class="hljs-built_in">document</span>.readyState||<span class="hljs-built_in">window</span>.attachEvent||<span class="hljs-built_in">window</span>.HTMLImports&amp;&amp;!<span class="hljs-built_in">window</span>.HTMLImports.ready){<span class="hljs-keyword">var</span> a=<span class="hljs-built_in">window</span>.HTMLImports&amp;&amp;!<span class="hljs-built_in">window</span>.HTMLImports.ready?<span class="hljs-string">"HTMLImportsLoaded"</span>:<span class="hljs-string">"DOMContentLoaded"</span>;<span class="hljs-built_in">window</span>.addEventListener(a,e)}<span class="hljs-keyword">else</span> e()}(<span class="hljs-built_in">window</span>.CustomElements),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>;(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.Trix={<span class="hljs-attr">VERSION</span>:<span class="hljs-string">"0.10.0"</span>,<span class="hljs-attr">ZERO_WIDTH_SPACE</span>:<span class="hljs-string">"\ufeff"</span>,<span class="hljs-attr">NON_BREAKING_SPACE</span>:<span class="hljs-string">"\xa0"</span>,<span class="hljs-attr">OBJECT_REPLACEMENT_CHARACTER</span>:<span class="hljs-string">"\ufffc"</span>,<span class="hljs-attr">config</span>:{}}}).call(<span class="hljs-keyword">this</span>)}).call(t);<span class="hljs-keyword">var</span> e=t.Trix;(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.BasicObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">t</span>(<span class="hljs-params"></span>)</span>{}<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> t.proxyMethod=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> o,i,r,s,a;<span class="hljs-keyword">return</span> r=n(t),o=r.name,s=r.toMethod,a=r.toProperty,i=r.optional,<span class="hljs-keyword">this</span>.prototype[o]=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;<span class="hljs-keyword">return</span> t=<span class="hljs-literal">null</span>!=s?i?<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>[s]?<span class="hljs-keyword">this</span>[s]():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>[s]():<span class="hljs-literal">null</span>!=a?<span class="hljs-keyword">this</span>[a]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,i?(n=<span class="hljs-literal">null</span>!=t?t[o]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-literal">null</span>!=n?e.call(n,t,<span class="hljs-built_in">arguments</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):(n=t[o],e.call(n,t,<span class="hljs-built_in">arguments</span>))}},n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">if</span>(!(n=t.match(o)))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"can't parse @proxyMethod expression: "</span>+t);<span class="hljs-keyword">return</span> e={<span class="hljs-attr">name</span>:n[<span class="hljs-number">4</span>]},<span class="hljs-literal">null</span>!=n[<span class="hljs-number">2</span>]?e.toMethod=n[<span class="hljs-number">1</span>]:e.toProperty=n[<span class="hljs-number">1</span>],<span class="hljs-literal">null</span>!=n[<span class="hljs-number">3</span>]&amp;&amp;(e.optional=!<span class="hljs-number">0</span>),e},e=<span class="hljs-built_in">Function</span>.prototype.apply,o=<span class="hljs-regexp">/^(.+?)(\(\))?(\?)?\.(.+?)$/</span>,t}()}).call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Object=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.id=++i}<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">return</span> t(o,n),i=<span class="hljs-number">0</span>,o.fromJSONString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fromJSON(<span class="hljs-built_in">JSON</span>.parse(t))},o.prototype.hasSameConstructorAs=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.constructor===(<span class="hljs-literal">null</span>!=t?t.constructor:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},o.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>===t},o.prototype.inspect=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,o,i;o=<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.contentsForInspection())?t:{},i=[];<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> o)n=o[e],i.push(e+<span class="hljs-string">"="</span>+n);<span class="hljs-keyword">return</span> i}.call(<span class="hljs-keyword">this</span>),<span class="hljs-string">"#&lt;"</span>+<span class="hljs-keyword">this</span>.constructor.name+<span class="hljs-string">":"</span>+<span class="hljs-keyword">this</span>.id+(t.length?<span class="hljs-string">" "</span>+t.join(<span class="hljs-string">", "</span>):<span class="hljs-string">""</span>)+<span class="hljs-string">"&gt;"</span>},o.prototype.contentsForInspection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{},o.prototype.toJSONString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>)},o.prototype.toUTF16String=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.UTF16String.box(<span class="hljs-keyword">this</span>)},o.prototype.getCacheKey=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.id.toString()},o}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.extend=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> t)n=t[e],<span class="hljs-keyword">this</span>[e]=n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;e.extend({<span class="hljs-attr">defer</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> setTimeout(t,<span class="hljs-number">1</span>)},<span class="hljs-attr">memoize</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=n++,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==<span class="hljs-keyword">this</span>.memos&amp;&amp;(<span class="hljs-keyword">this</span>.memos={}),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.memos)[e]?n[e]:n[e]=t.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}}}),n=<span class="hljs-number">0</span>,t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-literal">null</span>!=(n=<span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.inspect?t.inspect():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?n:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(t)}<span class="hljs-keyword">catch</span>(e){}}())?e:t}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;e.extend({<span class="hljs-attr">normalizeSpaces</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.replace(<span class="hljs-built_in">RegExp</span>(<span class="hljs-string">""</span>+e.ZERO_WIDTH_SPACE,<span class="hljs-string">"g"</span>),<span class="hljs-string">""</span>).replace(<span class="hljs-built_in">RegExp</span>(<span class="hljs-string">""</span>+e.NON_BREAKING_SPACE,<span class="hljs-string">"g"</span>),<span class="hljs-string">" "</span>)},<span class="hljs-attr">summarizeStringChange</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,o</span>)</span>{<span class="hljs-keyword">var</span> i,r,s,a;<span class="hljs-keyword">return</span> t=e.UTF16String.box(t),o=e.UTF16String.box(o),o.length&lt;t.length?(r=n(t,o),a=r[<span class="hljs-number">0</span>],i=r[<span class="hljs-number">1</span>]):(s=n(o,t),i=s[<span class="hljs-number">0</span>],a=s[<span class="hljs-number">1</span>]),{<span class="hljs-attr">added</span>:i,<span class="hljs-attr">removed</span>:a}}}),n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n,o</span>)</span>{<span class="hljs-keyword">var</span> i,r,s,a,u;<span class="hljs-keyword">return</span> n.isEqualTo(o)?[<span class="hljs-string">""</span>,<span class="hljs-string">""</span>]:(r=t(n,o),a=r.utf16String.length,s=a?(u=r.offset,r,i=n.codepoints.slice(<span class="hljs-number">0</span>,u).concat(n.codepoints.slice(u+a)),t(o,e.UTF16String.fromCodepoints(i))):t(o,n),[r.utf16String.toString(),s.utf16String.toString()])},t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>,o=t.length,i=e.length;o&gt;n&amp;&amp;t.charAt(n).isEqualTo(e.charAt(n));)n++;<span class="hljs-keyword">for</span>(;o&gt;n+<span class="hljs-number">1</span>&amp;&amp;t.charAt(o<span class="hljs-number">-1</span>).isEqualTo(e.charAt(i<span class="hljs-number">-1</span>));)o--,i--;<span class="hljs-keyword">return</span>{<span class="hljs-attr">utf16String</span>:t.slice(n,o),<span class="hljs-attr">offset</span>:n}}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.extend({<span class="hljs-attr">copyObject</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-literal">null</span>==t&amp;&amp;(t={}),n={};<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> t)o=t[e],n[e]=o;<span class="hljs-keyword">return</span> n},<span class="hljs-attr">objectsAreEqual</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t={}),<span class="hljs-literal">null</span>==e&amp;&amp;(e={}),<span class="hljs-built_in">Object</span>.keys(t).length!==<span class="hljs-built_in">Object</span>.keys(e).length)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(n <span class="hljs-keyword">in</span> t)<span class="hljs-keyword">if</span>(o=t[n],o!==e[n])<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}})}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=[].slice;e.extend({<span class="hljs-attr">arraysAreEqual</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),<span class="hljs-literal">null</span>==e&amp;&amp;(e=[]),t.length!==e.length)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(o=n=<span class="hljs-number">0</span>,i=t.length;i&gt;n;o=++n)<span class="hljs-keyword">if</span>(r=t[o],r!==e[o])<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>},<span class="hljs-attr">arrayStartsWith</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),<span class="hljs-literal">null</span>==n&amp;&amp;(n=[]),e.arraysAreEqual(t.slice(<span class="hljs-number">0</span>,n.length),n)},<span class="hljs-attr">spliceArray</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> n=<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],e=<span class="hljs-number">2</span>&lt;=<span class="hljs-built_in">arguments</span>.length?t.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>):[],o=n.slice(<span class="hljs-number">0</span>),o.splice.apply(o,e),o},<span class="hljs-attr">summarizeArrayChange</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a,u,c,l,h,p;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),<span class="hljs-literal">null</span>==e&amp;&amp;(e=[]),n=[],h=[],i=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>,r=<span class="hljs-number">0</span>,u=t.length;u&gt;r;r++)p=t[r],i.add(p);<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>,s=<span class="hljs-number">0</span>,c=e.length;c&gt;s;s++)p=e[s],o.add(p),i.has(p)||n.push(p);<span class="hljs-keyword">for</span>(a=<span class="hljs-number">0</span>,l=t.length;l&gt;a;a++)p=t[a],o.has(p)||h.push(p);<span class="hljs-keyword">return</span>{<span class="hljs-attr">added</span>:n,<span class="hljs-attr">removed</span>:h}}})}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i;t=<span class="hljs-literal">null</span>,n=<span class="hljs-literal">null</span>,i=<span class="hljs-literal">null</span>,o=<span class="hljs-literal">null</span>,e.extend({<span class="hljs-attr">getAllAttributeNames</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=t?t:t=e.getTextAttributeNames().concat(e.getBlockAttributeNames())},<span class="hljs-attr">getBlockConfig</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.config.blockAttributes[t]},<span class="hljs-attr">getBlockAttributeNames</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=n?n:n=<span class="hljs-built_in">Object</span>.keys(e.config.blockAttributes)},<span class="hljs-attr">getTextConfig</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.config.textAttributes[t]},<span class="hljs-attr">getTextAttributeNames</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=i?i:i=<span class="hljs-built_in">Object</span>.keys(e.config.textAttributes)},<span class="hljs-attr">getListAttributeNames</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=o?o:o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o,i;o=e.config.blockAttributes,i=[];<span class="hljs-keyword">for</span>(t <span class="hljs-keyword">in</span> o)n=o[t].listAttribute,<span class="hljs-literal">null</span>!=n&amp;&amp;i.push(n);<span class="hljs-keyword">return</span> i}()}})}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};t=<span class="hljs-built_in">document</span>.documentElement,n=<span class="hljs-literal">null</span>!=(o=<span class="hljs-literal">null</span>!=(i=<span class="hljs-literal">null</span>!=(r=t.matchesSelector)?r:t.webkitMatchesSelector)?i:t.msMatchesSelector)?o:t.mozMatchesSelector,e.extend({<span class="hljs-attr">handleEvent</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n,o</span>)</span>{<span class="hljs-keyword">var</span> i,r,s,a,u,c,l,h,p,d,f,g;<span class="hljs-keyword">return</span> h=<span class="hljs-literal">null</span>!=o?o:{},c=h.onElement,u=h.matchingSelector,g=h.withCallback,a=h.inPhase,l=h.preventDefault,d=h.times,r=<span class="hljs-literal">null</span>!=c?c:t,p=u,i=g,f=<span class="hljs-string">"capturing"</span>===a,s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=d&amp;&amp;<span class="hljs-number">0</span>===--d&amp;&amp;s.destroy(),n=e.findClosestElementFromNode(t.target,{<span class="hljs-attr">matchingSelector</span>:p}),<span class="hljs-literal">null</span>!=n&amp;&amp;(<span class="hljs-literal">null</span>!=g&amp;&amp;g.call(n,t,n),l)?t.preventDefault():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.destroy=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> r.removeEventListener(n,s,f)},r.addEventListener(n,s,f),s},<span class="hljs-attr">handleEventOnce</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==n&amp;&amp;(n={}),n.times=<span class="hljs-number">1</span>,e.handleEvent(t,n)},<span class="hljs-attr">triggerEvent</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n,o</span>)</span>{<span class="hljs-keyword">var</span> i,r,s,a,u,c,l;<span class="hljs-keyword">return</span> l=<span class="hljs-literal">null</span>!=o?o:{},c=l.onElement,r=l.bubbles,s=l.cancelable,i=l.attributes,a=<span class="hljs-literal">null</span>!=c?c:t,r=r!==!<span class="hljs-number">1</span>,s=s!==!<span class="hljs-number">1</span>,u=<span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">"Events"</span>),u.initEvent(n,r,s),<span class="hljs-literal">null</span>!=i&amp;&amp;e.extend.call(u,i),a.dispatchEvent(u)},<span class="hljs-attr">elementMatchesSelector</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>===(<span class="hljs-literal">null</span>!=t?t.nodeType:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?n.call(t,e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">findClosestElementFromNode</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-literal">null</span>!=n?n:{},o=i.matchingSelector,r=i.untilNode;<span class="hljs-literal">null</span>!=t&amp;&amp;t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=t){<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==o)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">if</span>(t.closest&amp;&amp;<span class="hljs-literal">null</span>==r)<span class="hljs-keyword">return</span> t.closest(o);<span class="hljs-keyword">for</span>(;t&amp;&amp;t!==r;){<span class="hljs-keyword">if</span>(e.elementMatchesSelector(t,o))<span class="hljs-keyword">return</span> t;t=t.parentNode}}},<span class="hljs-attr">findInnerElement</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(;<span class="hljs-literal">null</span>!=t?t.firstElementChild:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;)t=t.firstElementChild;<span class="hljs-keyword">return</span> t},<span class="hljs-attr">innerElementIsActive</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.activeElement!==t&amp;&amp;e.elementContainsNode(t,<span class="hljs-built_in">document</span>.activeElement)},<span class="hljs-attr">elementContainsNode</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">if</span>(t&amp;&amp;e)<span class="hljs-keyword">for</span>(;e;){<span class="hljs-keyword">if</span>(e===t)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;e=e.parentNode}},<span class="hljs-attr">findNodeFromContainerAndOffset</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">return</span> t.nodeType===Node.TEXT_NODE?t:<span class="hljs-number">0</span>===e?<span class="hljs-literal">null</span>!=(n=t.firstChild)?n:t:t.childNodes.item(e<span class="hljs-number">-1</span>)},<span class="hljs-attr">findElementFromContainerAndOffset</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o=e.findNodeFromContainerAndOffset(t,n),e.findClosestElementFromNode(o)},<span class="hljs-attr">findChildIndexOfNode</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=t?t.parentNode:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>){<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;t=t.previousSibling;)e++;<span class="hljs-keyword">return</span> e}},<span class="hljs-attr">measureElement</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">width</span>:t.offsetWidth,<span class="hljs-attr">height</span>:t.offsetHeight}},<span class="hljs-attr">walkTree</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s;<span class="hljs-keyword">return</span> i=<span class="hljs-literal">null</span>!=e?e:{},o=i.onlyNodesOfType,r=i.usingFilter,n=i.expandEntityReferences,s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">switch</span>(o){<span class="hljs-keyword">case</span><span class="hljs-string">"element"</span>:<span class="hljs-keyword">return</span> NodeFilter.SHOW_ELEMENT;<span class="hljs-keyword">case</span><span class="hljs-string">"text"</span>:<span class="hljs-keyword">return</span> NodeFilter.SHOW_TEXT;<span class="hljs-keyword">case</span><span class="hljs-string">"comment"</span>:<span class="hljs-keyword">return</span> NodeFilter.SHOW_COMMENT;<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> NodeFilter.SHOW_ALL}}(),<span class="hljs-built_in">document</span>.createTreeWalker(t,s,<span class="hljs-literal">null</span>!=r?r:<span class="hljs-literal">null</span>,n===!<span class="hljs-number">0</span>)},<span class="hljs-attr">tagName</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-literal">null</span>!=(e=t.tagName)?e.toLowerCase():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">makeElement</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a,u,c,l,h;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==e&amp;&amp;(e={}),<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> t?(e=t,t=e.tagName):e={<span class="hljs-attr">attributes</span>:e},o=<span class="hljs-built_in">document</span>.createElement(t),<span class="hljs-literal">null</span>!=e.editable&amp;&amp;(<span class="hljs-literal">null</span>==e.attributes&amp;&amp;(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes){a=e.attributes;<span class="hljs-keyword">for</span>(r <span class="hljs-keyword">in</span> a)h=a[r],o.setAttribute(r,h)}<span class="hljs-keyword">if</span>(e.style){u=e.style;<span class="hljs-keyword">for</span>(r <span class="hljs-keyword">in</span> u)h=u[r],o.style[r]=h}<span class="hljs-keyword">if</span>(e.data){c=e.data;<span class="hljs-keyword">for</span>(r <span class="hljs-keyword">in</span> c)h=c[r],o.dataset[r]=h}<span class="hljs-keyword">if</span>(e.className)<span class="hljs-keyword">for</span>(l=e.className.split(<span class="hljs-string">" "</span>),i=<span class="hljs-number">0</span>,s=l.length;s&gt;i;i++)n=l[i],o.classList.add(n);<span class="hljs-keyword">return</span> e.textContent&amp;&amp;(o.textContent=e.textContent),o},<span class="hljs-attr">cloneFragment</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">for</span>(e=<span class="hljs-built_in">document</span>.createDocumentFragment(),r=t.childNodes,n=<span class="hljs-number">0</span>,o=r.length;o&gt;n;n++)i=r[n],e.appendChild(i.cloneNode(!<span class="hljs-number">0</span>));<span class="hljs-keyword">return</span> e},<span class="hljs-attr">makeFragment</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-string">""</span>),e=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"div"</span>),e.innerHTML=t,n=<span class="hljs-built_in">document</span>.createDocumentFragment();o=e.firstChild;)n.appendChild(o);<span class="hljs-keyword">return</span> n},<span class="hljs-attr">getBlockTagNames</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=e.blockTagNames?e.blockTagNames:e.blockTagNames=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o,i;o=e.config.blockAttributes,i=[];<span class="hljs-keyword">for</span>(t <span class="hljs-keyword">in</span> o)n=o[t],i.push(n.tagName);<span class="hljs-keyword">return</span> i}()},<span class="hljs-attr">nodeIsBlockContainer</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.nodeIsBlockStartComment(<span class="hljs-literal">null</span>!=t?t.firstChild:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},<span class="hljs-attr">nodeProbablyIsBlockContainer</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> n=e.tagName(t),s.call(e.getBlockTagNames(),n)&gt;=<span class="hljs-number">0</span>&amp;&amp;(o=e.tagName(t.firstChild),s.call(e.getBlockTagNames(),o)&lt;<span class="hljs-number">0</span>)},<span class="hljs-attr">nodeIsBlockStart</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o=(<span class="hljs-literal">null</span>!=n?n:{<span class="hljs-attr">strict</span>:!<span class="hljs-number">0</span>}).strict,o?e.nodeIsBlockStartComment(t):e.nodeIsBlockStartComment(t)||!e.nodeIsBlockStartComment(t.firstChild)&amp;&amp;e.nodeProbablyIsBlockContainer(t)},<span class="hljs-attr">nodeIsBlockStartComment</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.nodeIsCommentNode(t)&amp;&amp;<span class="hljs-string">"block"</span>===(<span class="hljs-literal">null</span>!=t?t.data:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},<span class="hljs-attr">nodeIsCommentNode</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=t?t.nodeType:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===Node.COMMENT_NODE},<span class="hljs-attr">nodeIsCursorTarget</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t?e.nodeIsTextNode(t)?t.data===e.ZERO_WIDTH_SPACE:e.nodeIsCursorTarget(t.firstChild):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">nodeIsAttachmentElement</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.elementMatchesSelector(t,e.AttachmentView.attachmentSelector)},<span class="hljs-attr">nodeIsEmptyTextNode</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.nodeIsTextNode(t)&amp;&amp;<span class="hljs-string">""</span>===(<span class="hljs-literal">null</span>!=t?t.data:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},<span class="hljs-attr">nodeIsTextNode</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=t?t.nodeType:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===Node.TEXT_NODE}})}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r;t=e.copyObject,i=e.objectsAreEqual,e.extend({<span class="hljs-attr">normalizeRange</span>:o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=t)<span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(t)||(t=[t,t]),[n(t[<span class="hljs-number">0</span>]),n(<span class="hljs-literal">null</span>!=(e=t[<span class="hljs-number">1</span>])?e:t[<span class="hljs-number">0</span>])]},<span class="hljs-attr">rangeIsCollapsed</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=t)<span class="hljs-keyword">return</span> n=o(t),i=n[<span class="hljs-number">0</span>],e=n[<span class="hljs-number">1</span>],r(i,e)},<span class="hljs-attr">rangesAreEqual</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,i,s,a,u,c;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-literal">null</span>!=e)<span class="hljs-keyword">return</span> s=o(t),i=s[<span class="hljs-number">0</span>],n=s[<span class="hljs-number">1</span>],a=o(e),c=a[<span class="hljs-number">0</span>],u=a[<span class="hljs-number">1</span>],r(i,c)&amp;&amp;r(n,u)}}),n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> e?e:t(e)},r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t?t===e:i(t,e)}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i;t={<span class="hljs-attr">extendsTagName</span>:<span class="hljs-string">"div"</span>,<span class="hljs-attr">css</span>:<span class="hljs-string">"%t { display: block; }"</span>},e.registerElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">var</span> r,s,a,u,c,l,h;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==n&amp;&amp;(n={}),e=e.toLowerCase(),c=i(n),u=<span class="hljs-literal">null</span>!=(h=c.extendsTagName)?h:t.extendsTagName,<span class="hljs-keyword">delete</span> c.extendsTagName,s=c.defaultCSS,<span class="hljs-keyword">delete</span> c.defaultCSS,<span class="hljs-literal">null</span>!=s&amp;&amp;u===t.extendsTagName?s+=<span class="hljs-string">"\n"</span>+t.css:s=t.css,o(s,e),a=<span class="hljs-built_in">Object</span>.getPrototypeOf(<span class="hljs-built_in">document</span>.createElement(u)),a.__super__=a,l=<span class="hljs-built_in">Object</span>.create(a,c),r=<span class="hljs-built_in">document</span>.registerElement(e,{<span class="hljs-attr">prototype</span>:l}),<span class="hljs-built_in">Object</span>.defineProperty(l,<span class="hljs-string">"constructor"</span>,{<span class="hljs-attr">value</span>:r}),r},o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o=n(e),o.textContent=t.replace(<span class="hljs-regexp">/%t/g</span>,e)},n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"style"</span>),e.setAttribute(<span class="hljs-string">"type"</span>,<span class="hljs-string">"text/css"</span>),e.setAttribute(<span class="hljs-string">"data-tag-name"</span>,t.toLowerCase()),<span class="hljs-built_in">document</span>.head.insertBefore(e,<span class="hljs-built_in">document</span>.head.firstChild),e},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;n={};<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> t)o=t[e],n[e]=<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> o?{<span class="hljs-attr">value</span>:o}:o;<span class="hljs-keyword">return</span> n}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;e.extend({<span class="hljs-attr">getDOMSelection</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=<span class="hljs-built_in">window</span>.getSelection(),t.rangeCount&gt;<span class="hljs-number">0</span>?t:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">getDOMRange</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span>(n=<span class="hljs-literal">null</span>!=(o=e.getDOMSelection())?o.getRangeAt(<span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;!t(n)?n:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">setDOMRange</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=<span class="hljs-built_in">window</span>.getSelection(),n.removeAllRanges(),n.addRange(t),e.selectionChangeObserver.update()}}),t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> n(t.startContainer)||n(t.endContainer)},n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-built_in">Object</span>.getPrototypeOf(t)}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)o.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=e.arraysAreEqual,e.Hash=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-literal">null</span>==t&amp;&amp;(t={}),<span class="hljs-keyword">this</span>.values=s(t),i.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-keyword">var</span> r,s,a,u,c;<span class="hljs-keyword">return</span> n(i,o),i.fromCommonAttributesOfObjects=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,s,a;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),!t.length)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">for</span>(e=r(t[<span class="hljs-number">0</span>]),o=e.getKeys(),a=t.slice(<span class="hljs-number">1</span>),n=<span class="hljs-number">0</span>,i=a.length;i&gt;n;n++)s=a[n],o=e.getKeysCommonToHash(r(s)),e=e.slice(o);<span class="hljs-keyword">return</span> e},i.box=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> r(t)},i.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.merge(u(t,e))},i.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> e.Hash(s(<span class="hljs-keyword">this</span>.values,t))},i.prototype.get=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.values[t]},i.prototype.has=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.values},i.prototype.merge=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> e.Hash(a(<span class="hljs-keyword">this</span>.values,c(t)))},i.prototype.slice=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">for</span>(r={},n=<span class="hljs-number">0</span>,i=t.length;i&gt;n;n++)o=t[n],<span class="hljs-keyword">this</span>.has(o)&amp;&amp;(r[o]=<span class="hljs-keyword">this</span>.values[o]);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> e.Hash(r)},i.prototype.getKeys=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.values)},i.prototype.getKeysCommonToHash=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,s;<span class="hljs-keyword">for</span>(t=r(t),i=<span class="hljs-keyword">this</span>.getKeys(),s=[],e=<span class="hljs-number">0</span>,o=i.length;o&gt;e;e++)n=i[e],<span class="hljs-keyword">this</span>.values[n]===t.values[n]&amp;&amp;s.push(n);<span class="hljs-keyword">return</span> s},i.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> t(<span class="hljs-keyword">this</span>.toArray(),r(e).toArray())},i.prototype.isEmpty=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.getKeys().length},i.prototype.toArray=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.array?<span class="hljs-keyword">this</span>.array:<span class="hljs-keyword">this</span>.array=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o;e=[],o=<span class="hljs-keyword">this</span>.values;<span class="hljs-keyword">for</span>(t <span class="hljs-keyword">in</span> o)n=o[t],e.push(t,n);<span class="hljs-keyword">return</span> e}.call(<span class="hljs-keyword">this</span>)).slice(<span class="hljs-number">0</span>)},i.prototype.toObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> s(<span class="hljs-keyword">this</span>.values)},i.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.toObject()},i.prototype.contentsForInspection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">values</span>:<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.values)}},u=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n={},n[t]=e,n},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;o=s(t);<span class="hljs-keyword">for</span>(n <span class="hljs-keyword">in</span> e)i=e[n],o[n]=i;<span class="hljs-keyword">return</span> o},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s;<span class="hljs-keyword">for</span>(r={},s=<span class="hljs-built_in">Object</span>.keys(t).sort(),n=<span class="hljs-number">0</span>,i=s.length;i&gt;n;n++)o=s[n],o!==e&amp;&amp;(r[o]=t[o]);<span class="hljs-keyword">return</span> r},r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">instanceof</span> e.Hash?t:<span class="hljs-keyword">new</span> e.Hash(t)},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">instanceof</span> e.Hash?t.values:t},i}(e.Object)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.ObjectGroup=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">t</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">this</span>.objects=<span class="hljs-literal">null</span>!=t?t:[],o=e.depth,n=e.asTree,n&amp;&amp;(<span class="hljs-keyword">this</span>.depth=o,<span class="hljs-keyword">this</span>.objects=<span class="hljs-keyword">this</span>.constructor.groupObjects(<span class="hljs-keyword">this</span>.objects,{<span class="hljs-attr">asTree</span>:n,<span class="hljs-attr">depth</span>:<span class="hljs-keyword">this</span>.depth+<span class="hljs-number">1</span>}))}<span class="hljs-keyword">return</span> t.groupObjects=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a,u,c,l;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),l=<span class="hljs-literal">null</span>!=e?e:{},i=l.depth,n=l.asTree,n&amp;&amp;<span class="hljs-literal">null</span>==i&amp;&amp;(i=<span class="hljs-number">0</span>),c=[],s=<span class="hljs-number">0</span>,a=t.length;a&gt;s;s++){<span class="hljs-keyword">if</span>(u=t[s],r){<span class="hljs-keyword">if</span>((<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> u.canBeGrouped?u.canBeGrouped(i):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span>(o=r[r.length<span class="hljs-number">-1</span>]).canBeGroupedWith?o.canBeGroupedWith(u,i):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)){r.push(u);<span class="hljs-keyword">continue</span>}c.push(<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(r,{<span class="hljs-attr">depth</span>:i,<span class="hljs-attr">asTree</span>:n})),r=<span class="hljs-literal">null</span>}(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> u.canBeGrouped?u.canBeGrouped(i):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?r=[u]:c.push(u)}<span class="hljs-keyword">return</span> r&amp;&amp;c.push(<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(r,{<span class="hljs-attr">depth</span>:i,<span class="hljs-attr">asTree</span>:n})),c},t.prototype.getObjects=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.objects},t.prototype.getDepth=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.depth},t.prototype.getCacheKey=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(e=[<span class="hljs-string">"objectGroup"</span>],i=<span class="hljs-keyword">this</span>.getObjects(),t=<span class="hljs-number">0</span>,n=i.length;n&gt;t;t++)o=i[t],e.push(o.getCacheKey());<span class="hljs-keyword">return</span> e.join(<span class="hljs-string">"/"</span>)},t}()}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ObjectMap=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),<span class="hljs-keyword">this</span>.objects={},o=<span class="hljs-number">0</span>,i=t.length;i&gt;o;o++)r=t[o],n=<span class="hljs-built_in">JSON</span>.stringify(r),<span class="hljs-literal">null</span>==(e=<span class="hljs-keyword">this</span>.objects)[n]&amp;&amp;(e[n]=r)}<span class="hljs-keyword">return</span> t(n,e),n.prototype.find=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-built_in">JSON</span>.stringify(t),<span class="hljs-keyword">this</span>.objects[e]},n}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.ElementStore=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">t</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.reset(t)}<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> t.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=e(t),<span class="hljs-keyword">this</span>.elements[n]=t},t.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> n=e(t),(o=<span class="hljs-keyword">this</span>.elements[n])?(<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.elements[n],o):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},t.prototype.reset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),<span class="hljs-keyword">this</span>.elements={},n=<span class="hljs-number">0</span>,o=t.length;o&gt;n;n++)e=t[n],<span class="hljs-keyword">this</span>.add(e);<span class="hljs-keyword">return</span> t},e=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.dataset.trixStoreKey},t}()}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Operation=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> n.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-keyword">return</span> t(n,e),n.prototype.isPerforming=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.performing===!<span class="hljs-number">0</span>},n.prototype.hasPerformed=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.performed===!<span class="hljs-number">0</span>},n.prototype.hasSucceeded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.performed&amp;&amp;<span class="hljs-keyword">this</span>.succeeded},n.prototype.hasFailed=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.performed&amp;&amp;!<span class="hljs-keyword">this</span>.succeeded},n.prototype.getPromise=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.promise?<span class="hljs-keyword">this</span>.promise:<span class="hljs-keyword">this</span>.promise=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">return</span> t.performing=!<span class="hljs-number">0</span>,t.perform(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o,i</span>)</span>{<span class="hljs-keyword">return</span> t.succeeded=o,t.performing=!<span class="hljs-number">1</span>,t.performed=!<span class="hljs-number">0</span>,t.succeeded?e(i):n(i)
})}}(<span class="hljs-keyword">this</span>))},n.prototype.perform=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t(!<span class="hljs-number">1</span>)},n.prototype.release=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.promise)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.cancel&amp;&amp;t.cancel(),<span class="hljs-keyword">this</span>.promise=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.performing=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.performed=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.succeeded=<span class="hljs-literal">null</span>},n.proxyMethod(<span class="hljs-string">"getPromise().then"</span>),n.proxyMethod(<span class="hljs-string">"getPromise().catch"</span>),n}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)a.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},a={}.hasOwnProperty;e.UTF16String=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">this</span>.ucs2String=t,<span class="hljs-keyword">this</span>.codepoints=e,<span class="hljs-keyword">this</span>.length=<span class="hljs-keyword">this</span>.codepoints.length,<span class="hljs-keyword">this</span>.ucs2Length=<span class="hljs-keyword">this</span>.ucs2String.length}<span class="hljs-keyword">return</span> s(e,t),e.box=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-string">""</span>),t <span class="hljs-keyword">instanceof</span> <span class="hljs-keyword">this</span>?t:<span class="hljs-keyword">this</span>.fromUCS2String(<span class="hljs-literal">null</span>!=t?t.toString():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},e.fromUCS2String=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(t,i(t))},e.fromCodepoints=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(r(t),t)},e.prototype.offsetToUCS2Offset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> r(<span class="hljs-keyword">this</span>.codepoints.slice(<span class="hljs-number">0</span>,<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>,t))).length},e.prototype.offsetFromUCS2Offset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> i(<span class="hljs-keyword">this</span>.ucs2String.slice(<span class="hljs-number">0</span>,<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>,t))).length},e.prototype.slice=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.constructor.fromCodepoints((t=<span class="hljs-keyword">this</span>.codepoints).slice.apply(t,<span class="hljs-built_in">arguments</span>))},e.prototype.charAt=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.slice(t,t+<span class="hljs-number">1</span>)},e.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.constructor.box(t).ucs2String===<span class="hljs-keyword">this</span>.ucs2String},e.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.ucs2String},e.prototype.getCacheKey=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.ucs2String},e.prototype.toString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.ucs2String},e}(e.BasicObject),t=<span class="hljs-number">1</span>===(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Array</span>.from?<span class="hljs-built_in">Array</span>.from(<span class="hljs-string">"\ud83d\udc7c"</span>).length:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),n=<span class="hljs-literal">null</span>!=(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span><span class="hljs-string">" "</span>.codePointAt?<span class="hljs-string">" "</span>.codePointAt(<span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),o=<span class="hljs-string">" \ud83d\udc7c"</span>===(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">String</span>.fromCodePoint?<span class="hljs-built_in">String</span>.fromCodePoint(<span class="hljs-number">32</span>,<span class="hljs-number">128124</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),i=t&amp;&amp;n?<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(t).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.codePointAt(<span class="hljs-number">0</span>)})}:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">for</span>(i=[],e=<span class="hljs-number">0</span>,o=t.length;o&gt;e;)r=t.charCodeAt(e++),r&gt;=<span class="hljs-number">55296</span>&amp;&amp;<span class="hljs-number">56319</span>&gt;=r&amp;&amp;o&gt;e&amp;&amp;(n=t.charCodeAt(e++),<span class="hljs-number">56320</span>===(<span class="hljs-number">64512</span>&amp;n)?r=((<span class="hljs-number">1023</span>&amp;r)&lt;&lt;<span class="hljs-number">10</span>)+(<span class="hljs-number">1023</span>&amp;n)+<span class="hljs-number">65536</span>:e--),i.push(r);<span class="hljs-keyword">return</span> i},r=o?<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>.fromCodePoint.apply(<span class="hljs-built_in">String</span>,t)}:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> e=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,i,r;<span class="hljs-keyword">for</span>(r=[],e=<span class="hljs-number">0</span>,i=t.length;i&gt;e;e++)o=t[e],n=<span class="hljs-string">""</span>,o&gt;<span class="hljs-number">65535</span>&amp;&amp;(o-=<span class="hljs-number">65536</span>,n+=<span class="hljs-built_in">String</span>.fromCharCode(o&gt;&gt;&gt;<span class="hljs-number">10</span>&amp;<span class="hljs-number">1023</span>|<span class="hljs-number">55296</span>),o=<span class="hljs-number">56320</span>|<span class="hljs-number">1023</span>&amp;o),r.push(n+<span class="hljs-built_in">String</span>.fromCharCode(o));<span class="hljs-keyword">return</span> r}(),e.join(<span class="hljs-string">""</span>)}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.config.lang={<span class="hljs-attr">bold</span>:<span class="hljs-string">"Bold"</span>,<span class="hljs-attr">bullets</span>:<span class="hljs-string">"Bullets"</span>,<span class="hljs-string">"byte"</span>:<span class="hljs-string">"Byte"</span>,<span class="hljs-attr">bytes</span>:<span class="hljs-string">"Bytes"</span>,<span class="hljs-attr">captionPlaceholder</span>:<span class="hljs-string">"Type a caption here\u2026"</span>,<span class="hljs-attr">captionPrompt</span>:<span class="hljs-string">"Add a caption\u2026"</span>,<span class="hljs-attr">code</span>:<span class="hljs-string">"Code"</span>,<span class="hljs-attr">heading1</span>:<span class="hljs-string">"Heading"</span>,<span class="hljs-attr">indent</span>:<span class="hljs-string">"Increase Level"</span>,<span class="hljs-attr">italic</span>:<span class="hljs-string">"Italic"</span>,<span class="hljs-attr">link</span>:<span class="hljs-string">"Link"</span>,<span class="hljs-attr">numbers</span>:<span class="hljs-string">"Numbers"</span>,<span class="hljs-attr">outdent</span>:<span class="hljs-string">"Decrease Level"</span>,<span class="hljs-attr">quote</span>:<span class="hljs-string">"Quote"</span>,<span class="hljs-attr">redo</span>:<span class="hljs-string">"Redo"</span>,<span class="hljs-attr">remove</span>:<span class="hljs-string">"Remove"</span>,<span class="hljs-attr">strike</span>:<span class="hljs-string">"Strikethrough"</span>,<span class="hljs-attr">undo</span>:<span class="hljs-string">"Undo"</span>,<span class="hljs-attr">unlink</span>:<span class="hljs-string">"Unlink"</span>,<span class="hljs-attr">urlPlaceholder</span>:<span class="hljs-string">"Enter a URL\u2026"</span>,<span class="hljs-attr">GB</span>:<span class="hljs-string">"GB"</span>,<span class="hljs-attr">KB</span>:<span class="hljs-string">"KB"</span>,<span class="hljs-attr">MB</span>:<span class="hljs-string">"MB"</span>,<span class="hljs-attr">PB</span>:<span class="hljs-string">"PB"</span>,<span class="hljs-attr">TB</span>:<span class="hljs-string">"TB"</span>}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.config.css={<span class="hljs-attr">classNames</span>:{<span class="hljs-attr">attachment</span>:{<span class="hljs-attr">container</span>:<span class="hljs-string">"attachment"</span>,<span class="hljs-attr">typePrefix</span>:<span class="hljs-string">"attachment-"</span>,<span class="hljs-attr">caption</span>:<span class="hljs-string">"caption"</span>,<span class="hljs-attr">captionEdited</span>:<span class="hljs-string">"caption-edited"</span>,<span class="hljs-attr">captionEditor</span>:<span class="hljs-string">"caption-editor"</span>,<span class="hljs-attr">editingCaption</span>:<span class="hljs-string">"caption-editing"</span>,<span class="hljs-attr">progressBar</span>:<span class="hljs-string">"progress"</span>,<span class="hljs-attr">removeButton</span>:<span class="hljs-string">"remove icon"</span>,<span class="hljs-attr">size</span>:<span class="hljs-string">"size"</span>}}}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;e.config.blockAttributes=t={<span class="hljs-string">"default"</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"div"</span>,<span class="hljs-attr">parse</span>:!<span class="hljs-number">1</span>},<span class="hljs-attr">quote</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"blockquote"</span>,<span class="hljs-attr">nestable</span>:!<span class="hljs-number">0</span>},<span class="hljs-attr">heading1</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"h1"</span>,<span class="hljs-attr">terminal</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">breakOnReturn</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">group</span>:!<span class="hljs-number">1</span>},<span class="hljs-attr">code</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"pre"</span>,<span class="hljs-attr">terminal</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">text</span>:{<span class="hljs-attr">plaintext</span>:!<span class="hljs-number">0</span>}},<span class="hljs-attr">bulletList</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"ul"</span>,<span class="hljs-attr">parse</span>:!<span class="hljs-number">1</span>},<span class="hljs-attr">bullet</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"li"</span>,<span class="hljs-attr">listAttribute</span>:<span class="hljs-string">"bulletList"</span>,<span class="hljs-attr">group</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">nestable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">return</span> e.tagName(n.parentNode)===t[<span class="hljs-keyword">this</span>.listAttribute].tagName}},<span class="hljs-attr">numberList</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"ol"</span>,<span class="hljs-attr">parse</span>:!<span class="hljs-number">1</span>},<span class="hljs-attr">number</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"li"</span>,<span class="hljs-attr">listAttribute</span>:<span class="hljs-string">"numberList"</span>,<span class="hljs-attr">group</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">nestable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">return</span> e.tagName(n.parentNode)===t[<span class="hljs-keyword">this</span>.listAttribute].tagName}}}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;t=e.config.lang,n=[t.bytes,t.KB,t.MB,t.GB,t.TB,t.PB],e.config.fileSize={<span class="hljs-attr">prefix</span>:<span class="hljs-string">"IEC"</span>,<span class="hljs-attr">precision</span>:<span class="hljs-number">2</span>,<span class="hljs-attr">formatter</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> o,i,r,s,a;<span class="hljs-keyword">switch</span>(e){<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"0 "</span>+t.bytes;<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"1 "</span>+t.byte;<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">switch</span>(<span class="hljs-keyword">this</span>.prefix){<span class="hljs-keyword">case</span><span class="hljs-string">"SI"</span>:<span class="hljs-keyword">return</span> <span class="hljs-number">1e3</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"IEC"</span>:<span class="hljs-keyword">return</span> <span class="hljs-number">1024</span>}}.call(<span class="hljs-keyword">this</span>),i=<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.log(e)/<span class="hljs-built_in">Math</span>.log(o)),r=e/<span class="hljs-built_in">Math</span>.pow(o,i),s=r.toFixed(<span class="hljs-keyword">this</span>.precision),a=s.replace(<span class="hljs-regexp">/0*$/</span>,<span class="hljs-string">""</span>).replace(<span class="hljs-regexp">/\.$/</span>,<span class="hljs-string">""</span>),a+<span class="hljs-string">" "</span>+n[i]}}}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.config.textAttributes={<span class="hljs-attr">bold</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"strong"</span>,<span class="hljs-attr">inheritable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">parser</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-built_in">window</span>.getComputedStyle(t),<span class="hljs-string">"bold"</span>===e.fontWeight||e.fontWeight&gt;=<span class="hljs-number">600</span>}},<span class="hljs-attr">italic</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"em"</span>,<span class="hljs-attr">inheritable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">parser</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-built_in">window</span>.getComputedStyle(t),<span class="hljs-string">"italic"</span>===e.fontStyle}},<span class="hljs-attr">href</span>:{<span class="hljs-attr">groupTagName</span>:<span class="hljs-string">"a"</span>,<span class="hljs-attr">parser</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> n=e.AttachmentView.attachmentSelector,i=<span class="hljs-string">"a:not("</span>+n+<span class="hljs-string">")"</span>,(o=e.findClosestElementFromNode(t,{<span class="hljs-attr">matchingSelector</span>:i}))?o.getAttribute(<span class="hljs-string">"href"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">strike</span>:{<span class="hljs-attr">tagName</span>:<span class="hljs-string">"del"</span>,<span class="hljs-attr">inheritable</span>:!<span class="hljs-number">0</span>},<span class="hljs-attr">frozen</span>:{<span class="hljs-attr">style</span>:{<span class="hljs-attr">backgroundColor</span>:<span class="hljs-string">"highlight"</span>}}}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r;r=<span class="hljs-string">"[data-trix-serialize=false]"</span>,i=[<span class="hljs-string">"contenteditable"</span>,<span class="hljs-string">"data-trix-id"</span>,<span class="hljs-string">"data-trix-store-key"</span>,<span class="hljs-string">"data-trix-mutable"</span>],n=<span class="hljs-string">"data-trix-serialized-attributes"</span>,o=<span class="hljs-string">"["</span>+n+<span class="hljs-string">"]"</span>,t=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"&lt;!--block--&gt;"</span>,<span class="hljs-string">"g"</span>),e.extend({<span class="hljs-attr">serializers</span>:{<span class="hljs-string">"application/json"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(t <span class="hljs-keyword">instanceof</span> e.Document)n=t;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(!(t <span class="hljs-keyword">instanceof</span> HTMLElement))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"unserializable object"</span>);n=e.Document.fromHTML(t.innerHTML)}<span class="hljs-keyword">return</span> n.toSerializableDocument().toJSONString()},<span class="hljs-string">"text/html"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>)</span>{<span class="hljs-keyword">var</span> a,u,c,l,h,p,d,f,g,m,y,v,b,A,C,w,x;<span class="hljs-keyword">if</span>(s <span class="hljs-keyword">instanceof</span> e.Document)l=e.DocumentView.render(s);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(!(s <span class="hljs-keyword">instanceof</span> HTMLElement))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"unserializable object"</span>);l=s.cloneNode(!<span class="hljs-number">0</span>)}<span class="hljs-keyword">for</span>(A=l.querySelectorAll(r),h=<span class="hljs-number">0</span>,g=A.length;g&gt;h;h++)c=A[h],c.parentNode.removeChild(c);<span class="hljs-keyword">for</span>(p=<span class="hljs-number">0</span>,m=i.length;m&gt;p;p++)<span class="hljs-keyword">for</span>(a=i[p],C=l.querySelectorAll(<span class="hljs-string">"["</span>+a+<span class="hljs-string">"]"</span>),d=<span class="hljs-number">0</span>,y=C.length;y&gt;d;d++)c=C[d],c.removeAttribute(a);<span class="hljs-keyword">for</span>(w=l.querySelectorAll(o),f=<span class="hljs-number">0</span>,v=w.length;v&gt;f;f++){c=w[f];<span class="hljs-keyword">try</span>{u=<span class="hljs-built_in">JSON</span>.parse(c.getAttribute(n)),c.removeAttribute(n);<span class="hljs-keyword">for</span>(b <span class="hljs-keyword">in</span> u)x=u[b],c.setAttribute(b,x)}<span class="hljs-keyword">catch</span>(E){}}<span class="hljs-keyword">return</span> l.innerHTML.replace(t,<span class="hljs-string">""</span>)}},<span class="hljs-attr">deserializers</span>:{<span class="hljs-string">"application/json"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.Document.fromJSONString(t)},<span class="hljs-string">"text/html"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> e.Document.fromHTML(t)}},<span class="hljs-attr">serializeToContentType</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">if</span>(o=e.serializers[n])<span class="hljs-keyword">return</span> o(t);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"unknown content type: "</span>+n)},<span class="hljs-attr">deserializeFromContentType</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">if</span>(o=e.deserializers[n])<span class="hljs-keyword">return</span> o(t);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"unknown content type: "</span>+n)}})}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;n=e.makeFragment,t=e.config.lang,e.config.toolbar={<span class="hljs-attr">content</span>:n(<span class="hljs-string">'&lt;div class="button_row"&gt;\n  &lt;span class="button_group text_tools"&gt;\n    &lt;button type="button" class="icon bold" data-trix-attribute="bold" data-trix-key="b" title="'</span>+t.bold+<span class="hljs-string">'"&gt;'</span>+t.bold+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon italic" data-trix-attribute="italic" data-trix-key="i" title="'</span>+t.italic+<span class="hljs-string">'"&gt;'</span>+t.italic+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon strike" data-trix-attribute="strike" title="'</span>+t.strike+<span class="hljs-string">'"&gt;'</span>+t.strike+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'</span>+t.link+<span class="hljs-string">'"&gt;'</span>+t.link+<span class="hljs-string">'&lt;/button&gt;\n  &lt;/span&gt;\n\n  &lt;span class="button_group block_tools"&gt;\n    &lt;button type="button" class="icon heading-1" data-trix-attribute="heading1" title="'</span>+t.heading1+<span class="hljs-string">'"&gt;'</span>+t.heading1+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon quote" data-trix-attribute="quote" title="'</span>+t.quote+<span class="hljs-string">'"&gt;'</span>+t.quote+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon code" data-trix-attribute="code" title="'</span>+t.code+<span class="hljs-string">'"&gt;'</span>+t.code+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon list bullets" data-trix-attribute="bullet" title="'</span>+t.bullets+<span class="hljs-string">'"&gt;'</span>+t.bullets+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon list numbers" data-trix-attribute="number" title="'</span>+t.numbers+<span class="hljs-string">'"&gt;'</span>+t.numbers+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon nesting-level decrease" data-trix-action="decreaseNestingLevel" title="'</span>+t.outdent+<span class="hljs-string">'"&gt;'</span>+t.outdent+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon nesting-level increase" data-trix-action="increaseNestingLevel" title="'</span>+t.indent+<span class="hljs-string">'"&gt;'</span>+t.indent+<span class="hljs-string">'&lt;/button&gt;\n  &lt;/span&gt;\n\n  &lt;span class="button_group history_tools"&gt;\n    &lt;button type="button" class="icon undo" data-trix-action="undo" data-trix-key="z" title="'</span>+t.undo+<span class="hljs-string">'"&gt;'</span>+t.undo+<span class="hljs-string">'&lt;/button&gt;\n    &lt;button type="button" class="icon redo" data-trix-action="redo" data-trix-key="shift+z" title="'</span>+t.redo+<span class="hljs-string">'"&gt;'</span>+t.redo+<span class="hljs-string">'&lt;/button&gt;\n  &lt;/span&gt;\n&lt;/div&gt;\n\n&lt;div class="dialogs"&gt;\n  &lt;div class="dialog link_dialog" data-trix-attribute="href" data-trix-dialog="href"&gt;\n    &lt;div class="link_url_fields"&gt;\n      &lt;input type="url" required name="href" placeholder="'</span>+t.urlPlaceholder+<span class="hljs-string">'"&gt;\n      &lt;div class="button_group"&gt;\n        &lt;input type="button" value="'</span>+t.link+<span class="hljs-string">'" data-trix-method="setAttribute"&gt;\n        &lt;input type="button" value="'</span>+t.unlink+<span class="hljs-string">'" data-trix-method="removeAttribute"&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;'</span>)}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.config.undoInterval=<span class="hljs-number">5e3</span>}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o;n=e.makeElement,t=e.defer,o={<span class="hljs-attr">cursorTarget</span>:n({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"span"</span>,<span class="hljs-attr">textContent</span>:e.ZERO_WIDTH_SPACE,<span class="hljs-attr">data</span>:{<span class="hljs-attr">trixSelection</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">trixCursorTarget</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">trixSerialize</span>:!<span class="hljs-number">1</span>}})},e.extend({<span class="hljs-attr">selectionElements</span>:{<span class="hljs-attr">selector</span>:<span class="hljs-string">"[data-trix-selection]"</span>,<span class="hljs-attr">cssText</span>:<span class="hljs-string">"font-size: 0 !important;\npadding: 0 !important;\nmargin: 0 !important;\nborder: none !important;\nline-height: 0 !important;"</span>,<span class="hljs-attr">create</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> o[t].cloneNode(!<span class="hljs-number">0</span>)}}})}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;t=e.cloneFragment,e.registerElement(<span class="hljs-string">"trix-toolbar"</span>,{<span class="hljs-attr">defaultCSS</span>:<span class="hljs-string">"%t {\n  white-space: collapse;\n}\n\n%t .dialog {\n  display: none;\n}\n\n%t .dialog.active {\n  display: block;\n}\n\n%t .dialog input.validate:invalid {\n  background-color: #ffdddd;\n}\n\n%t[native] {\n  display: none;\n}"</span>,<span class="hljs-attr">createdCallback</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">""</span>===<span class="hljs-keyword">this</span>.innerHTML?<span class="hljs-keyword">this</span>.appendChild(t(e.config.toolbar.content)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}})}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};e.ObjectView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">this</span>.object=t,<span class="hljs-keyword">this</span>.options=<span class="hljs-literal">null</span>!=e?e:{},<span class="hljs-keyword">this</span>.childViews=[],<span class="hljs-keyword">this</span>.rootView=<span class="hljs-keyword">this</span>}<span class="hljs-keyword">return</span> t(i,n),i.prototype.getNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==<span class="hljs-keyword">this</span>.nodes&amp;&amp;(<span class="hljs-keyword">this</span>.nodes=<span class="hljs-keyword">this</span>.createNodes()),o=<span class="hljs-keyword">this</span>.nodes,i=[],t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)n=o[t],i.push(n.cloneNode(!<span class="hljs-number">0</span>));<span class="hljs-keyword">return</span> i},i.prototype.invalidate=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.nodes=<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.parentView)?t.invalidate():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.invalidateViewForObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.findViewForObject(t))?e.invalidate():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.findOrCreateCachedChildView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span>(n=<span class="hljs-keyword">this</span>.getCachedViewForObject(e))?<span class="hljs-keyword">this</span>.recordChildView(n):(n=<span class="hljs-keyword">this</span>.createChildView.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.cacheViewForObject(n,e)),n},i.prototype.createChildView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n,o</span>)</span>{<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==o&amp;&amp;(o={}),n <span class="hljs-keyword">instanceof</span> e.ObjectGroup&amp;&amp;(o.viewClass=t,t=e.ObjectGroupView),i=<span class="hljs-keyword">new</span> t(n,o),<span class="hljs-keyword">this</span>.recordChildView(i)},i.prototype.recordChildView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.parentView=<span class="hljs-keyword">this</span>,t.rootView=<span class="hljs-keyword">this</span>.rootView,<span class="hljs-keyword">this</span>.childViews.push(t),t},i.prototype.getAllChildViews=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(i=[],o=<span class="hljs-keyword">this</span>.childViews,e=<span class="hljs-number">0</span>,n=o.length;n&gt;e;e++)t=o[e],i.push(t),i=i.concat(t.getAllChildViews());<span class="hljs-keyword">return</span> i},i.prototype.findElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.findElementForObject(<span class="hljs-keyword">this</span>.object)},i.prototype.findElementForObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=<span class="hljs-literal">null</span>!=t?t.id:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?<span class="hljs-keyword">this</span>.rootView.element.querySelector(<span class="hljs-string">"[data-trix-id='"</span>+e+<span class="hljs-string">"']"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.findViewForObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.getAllChildViews(),e=<span class="hljs-number">0</span>,n=o.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(i=o[e],i.object===t)<span class="hljs-keyword">return</span> i},i.prototype.getViewCache=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.rootView!==<span class="hljs-keyword">this</span>?<span class="hljs-keyword">this</span>.rootView.getViewCache():<span class="hljs-keyword">this</span>.isViewCachingEnabled()?<span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.viewCache?<span class="hljs-keyword">this</span>.viewCache:<span class="hljs-keyword">this</span>.viewCache={}:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.isViewCachingEnabled=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.shouldCacheViews!==!<span class="hljs-number">1</span>},i.prototype.enableViewCaching=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.shouldCacheViews=!<span class="hljs-number">0</span>},i.prototype.disableViewCaching=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.shouldCacheViews=!<span class="hljs-number">1</span>},i.prototype.getCachedViewForObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.getViewCache())?e[t.getCacheKey()]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.cacheViewForObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.getViewCache())?n[e.getCacheKey()]=t:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.garbageCollectCachedViews=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,i,r,s;<span class="hljs-keyword">if</span>(t=<span class="hljs-keyword">this</span>.getViewCache()){s=<span class="hljs-keyword">this</span>.getAllChildViews().concat(<span class="hljs-keyword">this</span>),n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">for</span>(n=[],t=<span class="hljs-number">0</span>,e=s.length;e&gt;t;t++)r=s[t],n.push(r.object.getCacheKey());<span class="hljs-keyword">return</span> n}(),i=[];<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> t)o.call(n,e)&lt;<span class="hljs-number">0</span>&amp;&amp;i.push(<span class="hljs-keyword">delete</span> t[e]);<span class="hljs-keyword">return</span> i}},i}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ObjectGroupView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{n.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.objectGroup=<span class="hljs-keyword">this</span>.object,<span class="hljs-keyword">this</span>.viewClass=<span class="hljs-keyword">this</span>.options.viewClass,<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.options.viewClass}<span class="hljs-keyword">return</span> t(n,e),n.prototype.getChildViews=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.childViews.length)<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.objectGroup.getObjects(),t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)n=o[t],<span class="hljs-keyword">this</span>.findOrCreateCachedChildView(<span class="hljs-keyword">this</span>.viewClass,n,<span class="hljs-keyword">this</span>.options);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.childViews},n.prototype.createNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r,s,a,u;<span class="hljs-keyword">for</span>(t=<span class="hljs-keyword">this</span>.createContainerElement(),s=<span class="hljs-keyword">this</span>.getChildViews(),e=<span class="hljs-number">0</span>,o=s.length;o&gt;e;e++)<span class="hljs-keyword">for</span>(u=s[e],a=u.getNodes(),n=<span class="hljs-number">0</span>,i=a.length;i&gt;n;n++)r=a[n],t.appendChild(r);<span class="hljs-keyword">return</span>[t]},n.prototype.createContainerElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-keyword">this</span>.objectGroup.getDepth()),<span class="hljs-keyword">this</span>.getChildViews()[<span class="hljs-number">0</span>].createContainerElement(t)},n}(e.ObjectView)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Controller=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> n.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-keyword">return</span> t(n,e),n}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a,u=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.apply(e,<span class="hljs-built_in">arguments</span>)}},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)l.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},l={}.hasOwnProperty,h=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};t=e.defer,n=e.findClosestElementFromNode,i=e.nodeIsEmptyTextNode,o=e.nodeIsBlockStartComment,r=e.normalizeSpaces,s=e.summarizeStringChange,a=e.tagName,e.MutationObserver=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.element=t,<span class="hljs-keyword">this</span>.didMutate=u(<span class="hljs-keyword">this</span>.didMutate,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.observer=<span class="hljs-keyword">new</span> <span class="hljs-built_in">window</span>.MutationObserver(<span class="hljs-keyword">this</span>.didMutate),<span class="hljs-keyword">this</span>.start()}<span class="hljs-keyword">var</span> l,p,d,f;<span class="hljs-keyword">return</span> c(e,t),p=<span class="hljs-string">"data-trix-mutable"</span>,d=<span class="hljs-string">"["</span>+p+<span class="hljs-string">"]"</span>,f={<span class="hljs-attr">attributes</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">childList</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">characterData</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">characterDataOldValue</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">subtree</span>:!<span class="hljs-number">0</span>},e.prototype.start=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.reset(),<span class="hljs-keyword">this</span>.observer.observe(<span class="hljs-keyword">this</span>.element,f)},e.prototype.stop=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.observer.disconnect()},e.prototype.didMutate=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.mutations).push.apply(e,<span class="hljs-keyword">this</span>.findSignificantMutations(t)),<span class="hljs-keyword">this</span>.mutations.length?(<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.elementDidMutate&amp;&amp;n.elementDidMutate(<span class="hljs-keyword">this</span>.getMutationSummary()),<span class="hljs-keyword">this</span>.reset()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},e.prototype.reset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mutations=[]},e.prototype.findSignificantMutations=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(i=[],e=<span class="hljs-number">0</span>,n=t.length;n&gt;e;e++)o=t[e],<span class="hljs-keyword">this</span>.mutationIsSignificant(o)&amp;&amp;i.push(o);<span class="hljs-keyword">return</span> i},e.prototype.mutationIsSignificant=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.nodesModifiedByMutation(t),e=<span class="hljs-number">0</span>,n=i.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(o=i[e],<span class="hljs-keyword">this</span>.nodeIsSignificant(o))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},e.prototype.nodeIsSignificant=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t!==<span class="hljs-keyword">this</span>.element&amp;&amp;!<span class="hljs-keyword">this</span>.nodeIsMutable(t)&amp;&amp;!i(t)},e.prototype.nodeIsMutable=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> n(t,{<span class="hljs-attr">matchingSelector</span>:d})},e.prototype.nodesModifiedByMutation=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">switch</span>(e=[],t.type){<span class="hljs-keyword">case</span><span class="hljs-string">"attributes"</span>:t.attributeName!==p&amp;&amp;e.push(t.target);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"characterData"</span>:e.push(t.target.parentNode),e.push(t.target);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"childList"</span>:e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}<span class="hljs-keyword">return</span> e},e.prototype.getMutationSummary=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getTextMutationSummary()},e.prototype.getTextMutationSummary=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r,s,a,u,c,l;<span class="hljs-keyword">for</span>(a=<span class="hljs-keyword">this</span>.getTextChangesFromCharacterData(),n=a.additions,i=a.deletions,l=<span class="hljs-keyword">this</span>.getTextChangesFromChildList(),u=l.additions,r=<span class="hljs-number">0</span>,s=u.length;s&gt;r;r++)e=u[r],h.call(n,e)&lt;<span class="hljs-number">0</span>&amp;&amp;n.push(e);<span class="hljs-keyword">return</span> i.push.apply(i,l.deletions),c={},(t=n.join(<span class="hljs-string">""</span>))&amp;&amp;(c.textAdded=t),(o=i.join(<span class="hljs-string">""</span>))&amp;&amp;(c.textDeleted=o),c},e.prototype.getMutationsByType=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.mutations,r=[],e=<span class="hljs-number">0</span>,n=i.length;n&gt;e;e++)o=i[e],o.type===t&amp;&amp;r.push(o);<span class="hljs-keyword">return</span> r},e.prototype.getTextChangesFromChildList=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,i,s,a,u,c,h,p,d;<span class="hljs-keyword">for</span>(t=[],u=[],a=<span class="hljs-keyword">this</span>.getMutationsByType(<span class="hljs-string">"childList"</span>),e=<span class="hljs-number">0</span>,i=a.length;i&gt;e;e++)s=a[e],t.push.apply(t,s.addedNodes),u.push.apply(u,s.removedNodes);<span class="hljs-keyword">return</span> c=<span class="hljs-number">0</span>===t.length&amp;&amp;<span class="hljs-number">1</span>===u.length&amp;&amp;o(u[<span class="hljs-number">0</span>]),c?(p=[],d=[<span class="hljs-string">"\n"</span>]):(p=l(t),d=l(u)),{<span class="hljs-attr">additions</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,o;<span class="hljs-keyword">for</span>(o=[],n=t=<span class="hljs-number">0</span>,e=p.length;e&gt;t;n=++t)h=p[n],h!==d[n]&amp;&amp;o.push(r(h));<span class="hljs-keyword">return</span> o}(),<span class="hljs-attr">deletions</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,o;<span class="hljs-keyword">for</span>(o=[],n=t=<span class="hljs-number">0</span>,e=d.length;e&gt;t;n=++t)h=d[n],h!==p[n]&amp;&amp;o.push(r(h));<span class="hljs-keyword">return</span> o}()}},e.prototype.getTextChangesFromCharacterData=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,a,u,c;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getMutationsByType(<span class="hljs-string">"characterData"</span>),e.length&amp;&amp;(c=e[<span class="hljs-number">0</span>],n=e[e.length<span class="hljs-number">-1</span>],i=r(c.oldValue),o=r(n.target.data),a=s(i,o),t=a.added,u=a.removed),{<span class="hljs-attr">additions</span>:t?[t]:[],<span class="hljs-attr">deletions</span>:u?[u]:[]}},l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),i=[],e=<span class="hljs-number">0</span>,n=t.length;n&gt;e;e++)<span class="hljs-keyword">switch</span>(o=t[e],o.nodeType){<span class="hljs-keyword">case</span> Node.TEXT_NODE:i.push(o.data);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> Node.ELEMENT_NODE:<span class="hljs-string">"br"</span>===a(o)?i.push(<span class="hljs-string">"\n"</span>):i.push.apply(i,l(o.childNodes))}<span class="hljs-keyword">return</span> i},e}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.FileVerificationOperation=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.file=t}<span class="hljs-keyword">return</span> t(n,e),n.prototype.perform=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">new</span> FileReader,e.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t(!<span class="hljs-number">1</span>)},e.onload=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.onerror=<span class="hljs-literal">null</span>;<span class="hljs-keyword">try</span>{e.abort()}<span class="hljs-keyword">catch</span>(o){}<span class="hljs-keyword">return</span> t(!<span class="hljs-number">0</span>,n.file)}}(<span class="hljs-keyword">this</span>),e.readAsArrayBuffer(<span class="hljs-keyword">this</span>.file)},n}(e.Operation)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.CompositionInput=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">this</span>.inputController=t,e=<span class="hljs-keyword">this</span>.inputController,<span class="hljs-keyword">this</span>.responder=e.responder,<span class="hljs-keyword">this</span>.delegate=e.delegate,<span class="hljs-keyword">this</span>.inputSummary=e.inputSummary,<span class="hljs-keyword">this</span>.data={}}<span class="hljs-keyword">return</span> t(n,e),n.prototype.start=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data.start=t,<span class="hljs-string">"keypress"</span>===<span class="hljs-keyword">this</span>.inputSummary.eventName&amp;&amp;<span class="hljs-keyword">this</span>.inputSummary.textAdded&amp;&amp;<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.responder)&amp;&amp;e.deleteInDirection(<span class="hljs-string">"left"</span>),<span class="hljs-keyword">this</span>.selectionIsExpanded()||(<span class="hljs-keyword">this</span>.insertPlaceholder(),<span class="hljs-keyword">this</span>.requestRender()),<span class="hljs-keyword">this</span>.range=<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.responder)?n.getSelectedRange():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},n.prototype.update=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data.update=t,(e=<span class="hljs-keyword">this</span>.selectPlaceholder())?(<span class="hljs-keyword">this</span>.forgetPlaceholder(),<span class="hljs-keyword">this</span>.range=e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},n.prototype.end=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data.end=t,<span class="hljs-keyword">this</span>.forgetPlaceholder(),<span class="hljs-keyword">this</span>.canApplyToDocument()?(<span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">preferDocument</span>:!<span class="hljs-number">0</span>}),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillPerformTyping(),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.responder)&amp;&amp;n.setSelectedRange(<span class="hljs-keyword">this</span>.range),<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.responder)&amp;&amp;o.insertString(<span class="hljs-keyword">this</span>.data.end),<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.responder)?i.setSelectedRange(<span class="hljs-keyword">this</span>.range[<span class="hljs-number">0</span>]+<span class="hljs-keyword">this</span>.data.end.length):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.data.start||<span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.data.update?(<span class="hljs-keyword">this</span>.requestReparse(),<span class="hljs-keyword">this</span>.inputController.reset()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},n.prototype.getEndData=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.data.end},n.prototype.isEnded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.getEndData()},n.prototype.canApplyToDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===(<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.data.start)?t.length:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.data.end)?e.length:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.range},n.proxyMethod(<span class="hljs-string">"inputController.setInputSummary"</span>),n.proxyMethod(<span class="hljs-string">"inputController.requestRender"</span>),n.proxyMethod(<span class="hljs-string">"inputController.requestReparse"</span>),n.proxyMethod(<span class="hljs-string">"responder?.selectionIsExpanded"</span>),n.proxyMethod(<span class="hljs-string">"responder?.insertPlaceholder"</span>),n.proxyMethod(<span class="hljs-string">"responder?.selectPlaceholder"</span>),n.proxyMethod(<span class="hljs-string">"responder?.forgetPlaceholder"</span>),n}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a,u,c,l,h,p,d,f,g,m,y,v=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)b.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},b={}.hasOwnProperty,A=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};a=e.handleEvent,r=e.findClosestElementFromNode,s=e.findElementFromContainerAndOffset,o=e.defer,p=e.makeElement,u=e.innerElementIsActive,g=e.summarizeStringChange,d=e.objectsAreEqual,m=e.tagName,e.InputController=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">this</span>.element=t,<span class="hljs-keyword">this</span>.resetInputSummary(),<span class="hljs-keyword">this</span>.mutationObserver=<span class="hljs-keyword">new</span> e.MutationObserver(<span class="hljs-keyword">this</span>.element),<span class="hljs-keyword">this</span>.mutationObserver.delegate=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">for</span>(n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.events)a(n,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.handlerFor(n),<span class="hljs-attr">inPhase</span>:<span class="hljs-string">"capturing"</span>})}<span class="hljs-keyword">var</span> s;<span class="hljs-keyword">return</span> v(r,o),s=<span class="hljs-number">0</span>,r.keyNames={<span class="hljs-number">8</span>:<span class="hljs-string">"backspace"</span>,<span class="hljs-number">9</span>:<span class="hljs-string">"tab"</span>,<span class="hljs-number">13</span>:<span class="hljs-string">"return"</span>,<span class="hljs-number">37</span>:<span class="hljs-string">"left"</span>,<span class="hljs-number">39</span>:<span class="hljs-string">"right"</span>,<span class="hljs-number">46</span>:<span class="hljs-string">"delete"</span>,<span class="hljs-number">68</span>:<span class="hljs-string">"d"</span>,<span class="hljs-number">72</span>:<span class="hljs-string">"h"</span>,<span class="hljs-number">79</span>:<span class="hljs-string">"o"</span>},r.prototype.handlerFor=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">return</span> e.handleInput(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> u(<span class="hljs-keyword">this</span>.element)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.eventName=t,<span class="hljs-keyword">this</span>.events[t].call(<span class="hljs-keyword">this</span>,n))})}}(<span class="hljs-keyword">this</span>)},r.prototype.setInputSummary=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-literal">null</span>==t&amp;&amp;(t={}),<span class="hljs-keyword">this</span>.inputSummary.eventName=<span class="hljs-keyword">this</span>.eventName;<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> t)n=t[e],<span class="hljs-keyword">this</span>.inputSummary[e]=n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.inputSummary},r.prototype.resetInputSummary=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.inputSummary={}},r.prototype.reset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.resetInputSummary(),e.selectionChangeObserver.reset()},r.prototype.editorWillSyncDocumentView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mutationObserver.stop()},r.prototype.editorDidSyncDocumentView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mutationObserver.start()},r.prototype.requestRender=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},r.prototype.requestReparse=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.inputControllerDidRequestReparse&amp;&amp;t.inputControllerDidRequestReparse(),<span class="hljs-keyword">this</span>.requestRender()},r.prototype.elementDidMutate=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isComposing()?<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.handleInput(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mutationIsSignificant(t)&amp;&amp;(<span class="hljs-keyword">this</span>.mutationIsExpected(t)?<span class="hljs-keyword">this</span>.requestRender():<span class="hljs-keyword">this</span>.requestReparse()),<span class="hljs-keyword">this</span>.reset()})},r.prototype.mutationIsExpected=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s,a,u,c,l;<span class="hljs-keyword">return</span> a=t.textAdded,u=t.textDeleted,<span class="hljs-keyword">this</span>.inputSummary.preferDocument?!<span class="hljs-number">0</span>:(e=<span class="hljs-literal">null</span>!=a?a===<span class="hljs-keyword">this</span>.inputSummary.textAdded:!<span class="hljs-keyword">this</span>.inputSummary.textAdded,n=<span class="hljs-literal">null</span>!=u?<span class="hljs-keyword">this</span>.inputSummary.didDelete:!<span class="hljs-keyword">this</span>.inputSummary.didDelete,c=<span class="hljs-string">"\n"</span>===a&amp;&amp;!e,l=<span class="hljs-string">"\n"</span>===u&amp;&amp;!n,s=c&amp;&amp;!l||l&amp;&amp;!c,s&amp;&amp;(i=<span class="hljs-keyword">this</span>.getSelectedRange())&amp;&amp;(o=c?<span class="hljs-number">-1</span>:<span class="hljs-number">1</span>,<span class="hljs-literal">null</span>!=(r=<span class="hljs-keyword">this</span>.responder)?r.positionIsBlockBreak(i[<span class="hljs-number">1</span>]+o):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?!<span class="hljs-number">0</span>:e&amp;&amp;n)},r.prototype.mutationIsSignificant=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-built_in">Object</span>.keys(t).length&gt;<span class="hljs-number">0</span>,e=<span class="hljs-string">""</span>===(<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.compositionInput)?n.getEndData():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),o||!e},r.prototype.attachFiles=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o,i,r;<span class="hljs-keyword">for</span>(r=[],o=<span class="hljs-number">0</span>,i=t.length;i&gt;o;o++)n=t[o],r.push(<span class="hljs-keyword">new</span> e.FileVerificationOperation(n));<span class="hljs-keyword">return</span> r}(),<span class="hljs-built_in">Promise</span>.all(o).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> t.handleInput(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,o,i,r;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;i.inputControllerWillAttachFiles(),t=<span class="hljs-number">0</span>,o=e.length;o&gt;t;t++)n=e[t],<span class="hljs-literal">null</span>!=(r=<span class="hljs-keyword">this</span>.responder)&amp;&amp;r.insertFile(n);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.requestRender()})}}(<span class="hljs-keyword">this</span>))},r.prototype.events={<span class="hljs-attr">keydown</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a,u,l,h;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.isComposing()||<span class="hljs-keyword">this</span>.resetInputSummary(),r=<span class="hljs-keyword">this</span>.constructor.keyNames[t.keyCode]){<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.keys,l=[<span class="hljs-string">"ctrl"</span>,<span class="hljs-string">"alt"</span>,<span class="hljs-string">"shift"</span>,<span class="hljs-string">"meta"</span>],i=<span class="hljs-number">0</span>,a=l.length;a&gt;i;i++)u=l[i],t[u+<span class="hljs-string">"Key"</span>]&amp;&amp;(<span class="hljs-string">"ctrl"</span>===u&amp;&amp;(u=<span class="hljs-string">"control"</span>),o=<span class="hljs-literal">null</span>!=o?o[u]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);<span class="hljs-literal">null</span>!=(<span class="hljs-literal">null</span>!=o?o[r]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(<span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">keyName</span>:r}),e.selectionChangeObserver.reset(),o[r].call(<span class="hljs-keyword">this</span>,t))}<span class="hljs-keyword">return</span> c(t)&amp;&amp;(n=<span class="hljs-built_in">String</span>.fromCharCode(t.keyCode).toLowerCase())&amp;&amp;(s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(o=[<span class="hljs-string">"alt"</span>,<span class="hljs-string">"shift"</span>],i=[],e=<span class="hljs-number">0</span>,n=o.length;n&gt;e;e++)u=o[e],t[u+<span class="hljs-string">"Key"</span>]&amp;&amp;i.push(u);<span class="hljs-keyword">return</span> i}(),s.push(n),<span class="hljs-literal">null</span>!=(h=<span class="hljs-keyword">this</span>.delegate)?h.inputControllerDidReceiveKeyboardCommand(s):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?t.preventDefault():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">keypress</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==<span class="hljs-keyword">this</span>.inputSummary.eventName&amp;&amp;(!t.metaKey&amp;&amp;!t.ctrlKey||t.altKey)&amp;&amp;!h(t)&amp;&amp;!l(t))<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>===t.which?e=<span class="hljs-built_in">String</span>.fromCharCode(t.keyCode):<span class="hljs-number">0</span>!==t.which&amp;&amp;<span class="hljs-number">0</span>!==t.charCode&amp;&amp;(e=<span class="hljs-built_in">String</span>.fromCharCode(t.charCode)),<span class="hljs-literal">null</span>!=e?(<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;n.inputControllerWillPerformTyping(),<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.responder)&amp;&amp;o.insertString(e),<span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">textAdded</span>:e,<span class="hljs-attr">didDelete</span>:<span class="hljs-keyword">this</span>.selectionIsExpanded()})):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">textInput</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">return</span> e=t.data,i=<span class="hljs-keyword">this</span>.inputSummary.textAdded,i&amp;&amp;i!==e&amp;&amp;i.toUpperCase()===e?(n=<span class="hljs-keyword">this</span>.getSelectedRange(),<span class="hljs-keyword">this</span>.setSelectedRange([n[<span class="hljs-number">0</span>],n[<span class="hljs-number">1</span>]+i.length]),<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.responder)&amp;&amp;o.insertString(e),<span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">textAdded</span>:e}),<span class="hljs-keyword">this</span>.setSelectedRange(n)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">dragenter</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.preventDefault()},<span class="hljs-attr">dragstart</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=t.target,<span class="hljs-keyword">this</span>.serializeSelectionToDataTransfer(t.dataTransfer),<span class="hljs-keyword">this</span>.draggedRange=<span class="hljs-keyword">this</span>.getSelectedRange(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">dragover</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.draggedRange&amp;&amp;!<span class="hljs-keyword">this</span>.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={<span class="hljs-attr">x</span>:t.clientX,<span class="hljs-attr">y</span>:t.clientY},d(e,<span class="hljs-keyword">this</span>.draggingPoint))?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.draggingPoint=e,<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(<span class="hljs-keyword">this</span>.draggingPoint):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},<span class="hljs-attr">dragend</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.inputControllerDidCancelDrag&amp;&amp;t.inputControllerDidCancelDrag(),<span class="hljs-keyword">this</span>.draggedRange=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.draggingPoint=<span class="hljs-literal">null</span>},<span class="hljs-attr">drop</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a,u,c,l;<span class="hljs-keyword">return</span> t.preventDefault(),i=<span class="hljs-literal">null</span>!=(s=t.dataTransfer)?s.files:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,r={<span class="hljs-attr">x</span>:t.clientX,<span class="hljs-attr">y</span>:t.clientY},<span class="hljs-literal">null</span>!=(a=<span class="hljs-keyword">this</span>.responder)&amp;&amp;a.setLocationRangeFromPointRange(r),(<span class="hljs-literal">null</span>!=i?i.length:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?<span class="hljs-keyword">this</span>.attachFiles(i):<span class="hljs-keyword">this</span>.draggedRange?(<span class="hljs-literal">null</span>!=(u=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;u.inputControllerWillMoveText(),<span class="hljs-literal">null</span>!=(c=<span class="hljs-keyword">this</span>.responder)&amp;&amp;c.moveTextFromRange(<span class="hljs-keyword">this</span>.draggedRange),<span class="hljs-keyword">this</span>.draggedRange=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.requestRender()):(o=t.dataTransfer.getData(<span class="hljs-string">"application/x-trix-document"</span>))&amp;&amp;(n=e.Document.fromJSONString(o),<span class="hljs-literal">null</span>!=(l=<span class="hljs-keyword">this</span>.responder)&amp;&amp;l.insertDocument(n),<span class="hljs-keyword">this</span>.requestRender()),<span class="hljs-keyword">this</span>.draggedRange=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.draggingPoint=<span class="hljs-literal">null</span>},<span class="hljs-attr">cut</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.serializeSelectionToDataTransfer(t.clipboardData)&amp;&amp;t.preventDefault(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillCutText(),<span class="hljs-keyword">this</span>.deleteInDirection(<span class="hljs-string">"backward"</span>),t.defaultPrevented?<span class="hljs-keyword">this</span>.requestRender():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">copy</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">paste</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">var</span> o,r,a,u,c,l,h,p,d,g,m,y,v,b,C,w,x,E,S,k,R,L;<span class="hljs-keyword">return</span> c=<span class="hljs-literal">null</span>!=(h=n.clipboardData)?h:n.testClipboardData,l={<span class="hljs-attr">paste</span>:c},<span class="hljs-literal">null</span>==c||f(n)?<span class="hljs-keyword">void</span> <span class="hljs-keyword">this</span>.getPastedHTMLUsingHiddenElement(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> l.html=e,<span class="hljs-literal">null</span>!=(n=t.delegate)&amp;&amp;n.inputControllerWillPasteText(l),<span class="hljs-literal">null</span>!=(o=t.responder)&amp;&amp;o.insertHTML(e),t.requestRender(),<span class="hljs-literal">null</span>!=(i=t.delegate)?i.inputControllerDidPaste(l):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}}(<span class="hljs-keyword">this</span>)):(t(c)?(L=c.getData(<span class="hljs-string">"text/plain"</span>),l.string=L,<span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">textAdded</span>:L,<span class="hljs-attr">didDelete</span>:<span class="hljs-keyword">this</span>.selectionIsExpanded()}),<span class="hljs-literal">null</span>!=(p=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;p.inputControllerWillPasteText(l),<span class="hljs-literal">null</span>!=(b=<span class="hljs-keyword">this</span>.responder)&amp;&amp;b.insertString(L),<span class="hljs-keyword">this</span>.requestRender(),<span class="hljs-literal">null</span>!=(C=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;C.inputControllerDidPaste(l)):(u=c.getData(<span class="hljs-string">"text/html"</span>))?(l.html=u,<span class="hljs-literal">null</span>!=(w=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;w.inputControllerWillPasteText(l),<span class="hljs-literal">null</span>!=(x=<span class="hljs-keyword">this</span>.responder)&amp;&amp;x.insertHTML(u),<span class="hljs-keyword">this</span>.requestRender(),<span class="hljs-literal">null</span>!=(E=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;E.inputControllerDidPaste(l)):(a=c.getData(<span class="hljs-string">"URL"</span>))?(l.string=a,<span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">textAdded</span>:a,<span class="hljs-attr">didDelete</span>:<span class="hljs-keyword">this</span>.selectionIsExpanded()}),<span class="hljs-literal">null</span>!=(S=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;S.inputControllerWillPasteText(l),<span class="hljs-literal">null</span>!=(k=<span class="hljs-keyword">this</span>.responder)&amp;&amp;k.insertText(e.Text.textForStringWithAttributes(a,{<span class="hljs-attr">href</span>:a})),<span class="hljs-keyword">this</span>.requestRender(),<span class="hljs-literal">null</span>!=(R=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;R.inputControllerDidPaste(l)):A.call(c.types,<span class="hljs-string">"Files"</span>)&gt;=<span class="hljs-number">0</span>&amp;&amp;(r=<span class="hljs-literal">null</span>!=(d=c.items)&amp;&amp;<span class="hljs-literal">null</span>!=(g=d[<span class="hljs-number">0</span>])&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> g.getAsFile?g.getAsFile():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(!r.name&amp;&amp;(o=i(r))&amp;&amp;(r.name=<span class="hljs-string">"pasted-file-"</span>+ ++s+<span class="hljs-string">"."</span>+o),l.file=r,<span class="hljs-literal">null</span>!=(m=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;m.inputControllerWillAttachFiles(),<span class="hljs-literal">null</span>!=(y=<span class="hljs-keyword">this</span>.responder)&amp;&amp;y.insertFile(r),<span class="hljs-keyword">this</span>.requestRender(),<span class="hljs-literal">null</span>!=(v=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;v.inputControllerDidPaste(l)),n.preventDefault())},<span class="hljs-attr">compositionstart</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getCompositionInput().start(t.data)},<span class="hljs-attr">compositionupdate</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getCompositionInput().update(t.data)},<span class="hljs-attr">compositionend</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getCompositionInput().end(t.data)},<span class="hljs-attr">input</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.stopPropagation()}},r.prototype.keys={<span class="hljs-attr">backspace</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillPerformTyping(),<span class="hljs-keyword">this</span>.deleteInDirection(<span class="hljs-string">"backward"</span>,t)},<span class="hljs-string">"delete"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillPerformTyping(),<span class="hljs-keyword">this</span>.deleteInDirection(<span class="hljs-string">"forward"</span>,t)},<span class="hljs-string">"return"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">preferDocument</span>:!<span class="hljs-number">0</span>}),<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;t.inputControllerWillPerformTyping(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.responder)?e.insertLineBreak():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">tab</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.responder)?e.canIncreaseNestingLevel():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?(<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.responder)&amp;&amp;n.increaseNestingLevel(),<span class="hljs-keyword">this</span>.requestRender(),t.preventDefault()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">left</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionIsInCursorTarget()?(t.preventDefault(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.responder)?e.moveCursorInDirection(<span class="hljs-string">"backward"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">right</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionIsInCursorTarget()?(t.preventDefault(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.responder)?e.moveCursorInDirection(<span class="hljs-string">"forward"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">control</span>:{<span class="hljs-attr">d</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillPerformTyping(),<span class="hljs-keyword">this</span>.deleteInDirection(<span class="hljs-string">"forward"</span>,t)},<span class="hljs-attr">h</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillPerformTyping(),<span class="hljs-keyword">this</span>.deleteInDirection(<span class="hljs-string">"backward"</span>,t)},<span class="hljs-attr">o</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> t.preventDefault(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillPerformTyping(),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.responder)&amp;&amp;n.insertString(<span class="hljs-string">"\n"</span>,{<span class="hljs-attr">updatePosition</span>:!<span class="hljs-number">1</span>}),<span class="hljs-keyword">this</span>.requestRender()}},<span class="hljs-attr">shift</span>:{<span class="hljs-string">"return"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillPerformTyping(),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.responder)&amp;&amp;n.insertString(<span class="hljs-string">"\n"</span>),<span class="hljs-keyword">this</span>.requestRender(),t.preventDefault()},<span class="hljs-attr">tab</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.responder)?e.canDecreaseNestingLevel():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?(<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.responder)&amp;&amp;n.decreaseNestingLevel(),<span class="hljs-keyword">this</span>.requestRender(),t.preventDefault()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">left</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionIsInCursorTarget()?(t.preventDefault(),<span class="hljs-keyword">this</span>.expandSelectionInDirection(<span class="hljs-string">"backward"</span>)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">right</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionIsInCursorTarget()?(t.preventDefault(),<span class="hljs-keyword">this</span>.expandSelectionInDirection(<span class="hljs-string">"forward"</span>)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">alt</span>:{<span class="hljs-attr">backspace</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">preferDocument</span>:!<span class="hljs-number">1</span>}),<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)?t.inputControllerWillPerformTyping():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">meta</span>:{<span class="hljs-attr">backspace</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">preferDocument</span>:!<span class="hljs-number">1</span>}),<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)?t.inputControllerWillPerformTyping():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}}},r.prototype.handleInput=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">try</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;e.inputControllerWillHandleInput(),t.call(<span class="hljs-keyword">this</span>)}<span class="hljs-keyword">finally</span>{<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;n.inputControllerDidHandleInput()}},r.prototype.getCompositionInput=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isComposing()?<span class="hljs-keyword">this</span>.compositionInput:<span class="hljs-keyword">this</span>.compositionInput=<span class="hljs-keyword">new</span> e.CompositionInput(<span class="hljs-keyword">this</span>)},r.prototype.isComposing=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.compositionInput&amp;&amp;!<span class="hljs-keyword">this</span>.compositionInput.isEnded()},r.prototype.deleteInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.responder)?n.deleteInDirection(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)!==!<span class="hljs-number">1</span>?<span class="hljs-keyword">this</span>.setInputSummary({<span class="hljs-attr">didDelete</span>:!<span class="hljs-number">0</span>}):e?(e.preventDefault(),<span class="hljs-keyword">this</span>.requestRender()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},r.prototype.serializeSelectionToDataTransfer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> o,i;<span class="hljs-keyword">if</span>(n(t))<span class="hljs-keyword">return</span> o=<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.responder)?i.getSelectedDocument().toSerializableDocument():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,t.setData(<span class="hljs-string">"application/x-trix-document"</span>,<span class="hljs-built_in">JSON</span>.stringify(o)),t.setData(<span class="hljs-string">"text/html"</span>,e.DocumentView.render(o).innerHTML),t.setData(<span class="hljs-string">"text/plain"</span>,o.toString().replace(<span class="hljs-regexp">/\n$/</span>,<span class="hljs-string">""</span>)),!<span class="hljs-number">0</span>},r.prototype.canAcceptDataTransfer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s;<span class="hljs-keyword">for</span>(s={},i=<span class="hljs-literal">null</span>!=(o=<span class="hljs-literal">null</span>!=t?t.types:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?o:[],e=<span class="hljs-number">0</span>,n=i.length;n&gt;e;e++)r=i[e],s[r]=!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span> s.Files||s[<span class="hljs-string">"application/x-trix-document"</span>]||s[<span class="hljs-string">"text/html"</span>]||s[<span class="hljs-string">"text/plain"</span>]},r.prototype.getPastedHTMLUsingHiddenElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.getSelectedRange(),o={<span class="hljs-attr">position</span>:<span class="hljs-string">"absolute"</span>,<span class="hljs-attr">left</span>:<span class="hljs-built_in">window</span>.pageXOffset+<span class="hljs-string">"px"</span>,<span class="hljs-attr">top</span>:<span class="hljs-built_in">window</span>.pageYOffset+<span class="hljs-string">"px"</span>,<span class="hljs-attr">opacity</span>:<span class="hljs-number">0</span>},e=p({<span class="hljs-attr">style</span>:o,<span class="hljs-attr">tagName</span>:<span class="hljs-string">"div"</span>,<span class="hljs-attr">editable</span>:!<span class="hljs-number">0</span>}),<span class="hljs-built_in">document</span>.body.appendChild(e),e.focus(),requestAnimationFrame(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> i;
<span class="hljs-keyword">return</span> i=e.innerHTML,<span class="hljs-built_in">document</span>.body.removeChild(e),o.setSelectedRange(n),t(i)}}(<span class="hljs-keyword">this</span>))},r.proxyMethod(<span class="hljs-string">"responder?.getSelectedRange"</span>),r.proxyMethod(<span class="hljs-string">"responder?.setSelectedRange"</span>),r.proxyMethod(<span class="hljs-string">"responder?.expandSelectionInDirection"</span>),r.proxyMethod(<span class="hljs-string">"responder?.selectionIsInCursorTarget"</span>),r.proxyMethod(<span class="hljs-string">"responder?.selectionIsExpanded"</span>),r}(e.BasicObject),i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=t.type)&amp;&amp;<span class="hljs-literal">null</span>!=(n=e.match(<span class="hljs-regexp">/\/(\w+)$/</span>))?n[<span class="hljs-number">1</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},h=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.metaKey&amp;&amp;t.altKey&amp;&amp;!t.shiftKey&amp;&amp;<span class="hljs-number">94</span>===t.keyCode},l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.metaKey&amp;&amp;t.altKey&amp;&amp;t.shiftKey&amp;&amp;<span class="hljs-number">9674</span>===t.keyCode},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-regexp">/Mac|^iP/</span>.test(navigator.platform)?t.metaKey:t.ctrlKey},f=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span>(n=<span class="hljs-literal">null</span>!=(e=t.clipboardData)?e.types:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?A.call(n,<span class="hljs-string">"text/html"</span>)&lt;<span class="hljs-number">0</span>&amp;&amp;(A.call(n,<span class="hljs-string">"com.apple.webarchive"</span>)&gt;=<span class="hljs-number">0</span>||A.call(n,<span class="hljs-string">"com.apple.flat-rtfd"</span>)&gt;=<span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=t.getData(<span class="hljs-string">"text/plain"</span>),n=t.getData(<span class="hljs-string">"text/html"</span>),o&amp;&amp;n?(e=p(<span class="hljs-string">"div"</span>),e.innerHTML=n,e.textContent===o?!e.querySelector(<span class="hljs-string">":not(meta)"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-literal">null</span>!=o?o.length:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},y={<span class="hljs-string">"application/x-trix-feature-detection"</span>:<span class="hljs-string">"test"</span>},n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=(<span class="hljs-literal">null</span>!=t?t.setData:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)){<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> y)<span class="hljs-keyword">if</span>(n=y[e],t.setData(e,n),t.getData(e)!==n)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.apply(e,<span class="hljs-built_in">arguments</span>)}},u=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)c.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=e.handleEvent,r=e.makeElement,s=e.tagName,o=e.InputController.keyNames,i=e.config.lang,t=e.config.css.classNames,e.AttachmentEditorController=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">this</span>.attachmentPiece=t,<span class="hljs-keyword">this</span>.element=e,<span class="hljs-keyword">this</span>.container=n,<span class="hljs-keyword">this</span>.uninstall=a(<span class="hljs-keyword">this</span>.uninstall,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didKeyDownCaption=a(<span class="hljs-keyword">this</span>.didKeyDownCaption,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didChangeCaption=a(<span class="hljs-keyword">this</span>.didChangeCaption,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didClickCaption=a(<span class="hljs-keyword">this</span>.didClickCaption,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didClickRemoveButton=a(<span class="hljs-keyword">this</span>.didClickRemoveButton,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.attachment=<span class="hljs-keyword">this</span>.attachmentPiece.attachment,<span class="hljs-string">"a"</span>===s(<span class="hljs-keyword">this</span>.element)&amp;&amp;(<span class="hljs-keyword">this</span>.element=<span class="hljs-keyword">this</span>.element.firstChild),<span class="hljs-keyword">this</span>.install()}<span class="hljs-keyword">var</span> l;<span class="hljs-keyword">return</span> u(c,e),l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=t.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),e[<span class="hljs-string">"do"</span>](),<span class="hljs-literal">null</span>==<span class="hljs-keyword">this</span>.undos&amp;&amp;(<span class="hljs-keyword">this</span>.undos=[]),<span class="hljs-keyword">this</span>.undos.push(e.undo)}},c.prototype.install=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.makeElementMutable(),<span class="hljs-keyword">this</span>.attachment.isPreviewable()&amp;&amp;<span class="hljs-keyword">this</span>.makeCaptionEditable(),<span class="hljs-keyword">this</span>.addRemoveButton()},c.prototype.makeElementMutable=l(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-string">"do"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.element.dataset.trixMutable=!<span class="hljs-number">0</span>}}(<span class="hljs-keyword">this</span>),<span class="hljs-attr">undo</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">delete</span> t.element.dataset.trixMutable}}(<span class="hljs-keyword">this</span>)}}),c.prototype.makeCaptionEditable=l(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span> t=<span class="hljs-keyword">this</span>.element.querySelector(<span class="hljs-string">"figcaption"</span>),e=<span class="hljs-literal">null</span>,{<span class="hljs-string">"do"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e=n(<span class="hljs-string">"click"</span>,{<span class="hljs-attr">onElement</span>:t,<span class="hljs-attr">withCallback</span>:o.didClickCaption,<span class="hljs-attr">inPhase</span>:<span class="hljs-string">"capturing"</span>})}}(<span class="hljs-keyword">this</span>),<span class="hljs-attr">undo</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.destroy()}}(<span class="hljs-keyword">this</span>)}}),c.prototype.addRemoveButton=l(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=r({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"button"</span>,<span class="hljs-attr">textContent</span>:i.remove,<span class="hljs-attr">className</span>:t.attachment.removeButton,<span class="hljs-attr">attributes</span>:{<span class="hljs-attr">type</span>:<span class="hljs-string">"button"</span>,<span class="hljs-attr">title</span>:i.remove},<span class="hljs-attr">data</span>:{<span class="hljs-attr">trixMutable</span>:!<span class="hljs-number">0</span>}}),n(<span class="hljs-string">"click"</span>,{<span class="hljs-attr">onElement</span>:e,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didClickRemoveButton}),{<span class="hljs-string">"do"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.element.appendChild(e)}}(<span class="hljs-keyword">this</span>),<span class="hljs-attr">undo</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.element.removeChild(e)}}(<span class="hljs-keyword">this</span>)}}),c.prototype.editCaption=l(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,o,s,a,u;<span class="hljs-keyword">return</span> a=r({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"textarea"</span>,<span class="hljs-attr">className</span>:t.attachment.captionEditor,<span class="hljs-attr">attributes</span>:{<span class="hljs-attr">placeholder</span>:i.captionPlaceholder}}),a.value=<span class="hljs-keyword">this</span>.attachmentPiece.getCaption(),u=a.cloneNode(),u.classList.add(<span class="hljs-string">"trix-autoresize-clone"</span>),e=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> u.value=a.value,a.style.height=u.scrollHeight+<span class="hljs-string">"px"</span>},n(<span class="hljs-string">"input"</span>,{<span class="hljs-attr">onElement</span>:a,<span class="hljs-attr">withCallback</span>:e}),n(<span class="hljs-string">"keydown"</span>,{<span class="hljs-attr">onElement</span>:a,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didKeyDownCaption}),n(<span class="hljs-string">"change"</span>,{<span class="hljs-attr">onElement</span>:a,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didChangeCaption}),n(<span class="hljs-string">"blur"</span>,{<span class="hljs-attr">onElement</span>:a,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.uninstall}),s=<span class="hljs-keyword">this</span>.element.querySelector(<span class="hljs-string">"figcaption"</span>),o=s.cloneNode(),{<span class="hljs-string">"do"</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> s.style.display=<span class="hljs-string">"none"</span>,o.appendChild(a),o.appendChild(u),o.classList.add(t.attachment.editingCaption),s.parentElement.insertBefore(o,s),e(),a.focus()},<span class="hljs-attr">undo</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> o.parentNode.removeChild(o),s.style.display=<span class="hljs-literal">null</span>}}}),c.prototype.didClickRemoveButton=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> t.preventDefault(),t.stopPropagation(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(<span class="hljs-keyword">this</span>.attachment):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},c.prototype.didClickCaption=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.preventDefault(),<span class="hljs-keyword">this</span>.editCaption()},c.prototype.didChangeCaption=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> e=t.target.value.replace(<span class="hljs-regexp">/\s/g</span>,<span class="hljs-string">" "</span>).trim(),e?<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.attachmentEditorDidRequestUpdatingAttributesForAttachment?n.attachmentEditorDidRequestUpdatingAttributesForAttachment({<span class="hljs-attr">caption</span>:e},<span class="hljs-keyword">this</span>.attachment):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> o.attachmentEditorDidRequestRemovingAttributeForAttachment?o.attachmentEditorDidRequestRemovingAttributeForAttachment(<span class="hljs-string">"caption"</span>,<span class="hljs-keyword">this</span>.attachment):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},c.prototype.didKeyDownCaption=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span><span class="hljs-string">"return"</span>===o[t.keyCode]?(t.preventDefault(),<span class="hljs-keyword">this</span>.didChangeCaption(t),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(<span class="hljs-keyword">this</span>.attachment):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},c.prototype.uninstall=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t,e;e=<span class="hljs-keyword">this</span>.undos.pop();)e();<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)?t.didUninstallAttachmentEditor(<span class="hljs-keyword">this</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},c}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)s.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=e.makeElement,i=e.selectionElements,t=e.config.css.classNames,e.AttachmentView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params"></span>)</span>{s.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.attachment=<span class="hljs-keyword">this</span>.object,<span class="hljs-keyword">this</span>.attachment.uploadProgressDelegate=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.attachmentPiece=<span class="hljs-keyword">this</span>.options.piece}<span class="hljs-keyword">return</span> r(s,e),s.attachmentSelector=<span class="hljs-string">"[data-trix-attachment]"</span>,s.prototype.createContentNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>[]},s.prototype.createNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,r,s,a,u,c,l,h,p,d;<span class="hljs-keyword">if</span>(s=o({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"figure"</span>,<span class="hljs-attr">className</span>:<span class="hljs-keyword">this</span>.getClassName()}),<span class="hljs-keyword">this</span>.attachment.hasContent())s.innerHTML=<span class="hljs-keyword">this</span>.attachment.getContent();<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(p=<span class="hljs-keyword">this</span>.createContentNodes(),u=<span class="hljs-number">0</span>,l=p.length;l&gt;u;u++)h=p[u],s.appendChild(h);s.appendChild(<span class="hljs-keyword">this</span>.createCaptionElement()),n={<span class="hljs-attr">trixAttachment</span>:<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.attachment),<span class="hljs-attr">trixContentType</span>:<span class="hljs-keyword">this</span>.attachment.getContentType(),<span class="hljs-attr">trixId</span>:<span class="hljs-keyword">this</span>.attachment.id},e=<span class="hljs-keyword">this</span>.attachmentPiece.getAttributesForAttachment(),e.isEmpty()||(n.trixAttributes=<span class="hljs-built_in">JSON</span>.stringify(e)),<span class="hljs-keyword">this</span>.attachment.isPending()&amp;&amp;(<span class="hljs-keyword">this</span>.progressElement=o({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"progress"</span>,<span class="hljs-attr">attributes</span>:{<span class="hljs-string">"class"</span>:t.attachment.progressBar,<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.attachment.getUploadProgress(),<span class="hljs-attr">max</span>:<span class="hljs-number">100</span>},<span class="hljs-attr">data</span>:{<span class="hljs-attr">trixMutable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">trixStoreKey</span>:[<span class="hljs-string">"progressElement"</span>,<span class="hljs-keyword">this</span>.attachment.id].join(<span class="hljs-string">"/"</span>)}}),s.appendChild(<span class="hljs-keyword">this</span>.progressElement),n.trixSerialize=!<span class="hljs-number">1</span>),(a=<span class="hljs-keyword">this</span>.getHref())?(r=o(<span class="hljs-string">"a"</span>,{<span class="hljs-attr">href</span>:a}),r.appendChild(s)):r=s;<span class="hljs-keyword">for</span>(c <span class="hljs-keyword">in</span> n)d=n[c],r.dataset[c]=d;<span class="hljs-keyword">return</span> r.setAttribute(<span class="hljs-string">"contenteditable"</span>,!<span class="hljs-number">1</span>),[i.create(<span class="hljs-string">"cursorTarget"</span>),r,i.create(<span class="hljs-string">"cursorTarget"</span>)]},s.prototype.createCaptionElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r,s;<span class="hljs-keyword">return</span> n=o({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"figcaption"</span>,<span class="hljs-attr">className</span>:t.attachment.caption}),(e=<span class="hljs-keyword">this</span>.attachmentPiece.getCaption())?(n.classList.add(t.attachment.captionEdited),n.textContent=e):(i=<span class="hljs-keyword">this</span>.attachment.getFilename())&amp;&amp;(n.textContent=i,(r=<span class="hljs-keyword">this</span>.attachment.getFormattedFilesize())&amp;&amp;(n.appendChild(<span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">" "</span>)),s=o({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"span"</span>,<span class="hljs-attr">className</span>:t.attachment.size,<span class="hljs-attr">textContent</span>:r}),n.appendChild(s))),n},s.prototype.getClassName=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=[t.attachment.container,<span class="hljs-string">""</span>+t.attachment.typePrefix+<span class="hljs-keyword">this</span>.attachment.getType()],(e=<span class="hljs-keyword">this</span>.attachment.getExtension())&amp;&amp;n.push(e),n.join(<span class="hljs-string">" "</span>)},s.prototype.getHref=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> n(<span class="hljs-keyword">this</span>.attachment.getContent(),<span class="hljs-string">"a"</span>)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.attachment.getHref()},s.prototype.findProgressElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.findElement())?t.querySelector(<span class="hljs-string">"progress"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.attachmentDidChangeUploadProgress=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.attachment.getUploadProgress(),<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.findProgressElement())?t.value=e:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s}(e.ObjectView),n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=o(<span class="hljs-string">"div"</span>),n.innerHTML=<span class="hljs-literal">null</span>!=t?t:<span class="hljs-string">""</span>,n.querySelector(e)}}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)r.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=e.defer,n=e.makeElement,o=e.measureElement,e.PreviewableAttachmentView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params"></span>)</span>{e.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.attachment.previewDelegate=<span class="hljs-keyword">this</span>}<span class="hljs-keyword">return</span> i(e,t),e.prototype.createContentNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.image=n({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"img"</span>,<span class="hljs-attr">attributes</span>:{<span class="hljs-attr">src</span>:<span class="hljs-string">""</span>},<span class="hljs-attr">data</span>:{<span class="hljs-attr">trixMutable</span>:!<span class="hljs-number">0</span>}}),<span class="hljs-keyword">this</span>.refresh(<span class="hljs-keyword">this</span>.image),[<span class="hljs-keyword">this</span>.image]},e.prototype.refresh=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.findElement())?e.querySelector(<span class="hljs-string">"img"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),t?<span class="hljs-keyword">this</span>.updateAttributesForImage(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},e.prototype.updateAttributesForImage=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s;<span class="hljs-keyword">return</span> r=<span class="hljs-keyword">this</span>.attachment.getURL(),n=<span class="hljs-keyword">this</span>.attachment.getPreviewURL(),t.src=n||r,n===r?t.removeAttribute(<span class="hljs-string">"data-trix-serialized-attributes"</span>):(o=<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">src</span>:r}),t.setAttribute(<span class="hljs-string">"data-trix-serialized-attributes"</span>,o)),s=<span class="hljs-keyword">this</span>.attachment.getWidth(),e=<span class="hljs-keyword">this</span>.attachment.getHeight(),<span class="hljs-literal">null</span>!=s&amp;&amp;(t.width=s),<span class="hljs-literal">null</span>!=e&amp;&amp;(t.height=e),i=[<span class="hljs-string">"imageElement"</span>,<span class="hljs-keyword">this</span>.attachment.id,t.src,t.width,t.height].join(<span class="hljs-string">"/"</span>),t.dataset.trixStoreKey=i},e.prototype.attachmentDidChangePreviewURL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.refresh(<span class="hljs-keyword">this</span>.image),<span class="hljs-keyword">this</span>.refresh()},e}(e.AttachmentView)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)r.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},r={}.hasOwnProperty;o=e.makeElement,t=e.findInnerElement,n=e.getTextConfig,e.PieceView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;s.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.piece=<span class="hljs-keyword">this</span>.object,<span class="hljs-keyword">this</span>.attributes=<span class="hljs-keyword">this</span>.piece.getAttributes(),t=<span class="hljs-keyword">this</span>.options,<span class="hljs-keyword">this</span>.textConfig=t.textConfig,<span class="hljs-keyword">this</span>.context=t.context,<span class="hljs-keyword">this</span>.piece.attachment?<span class="hljs-keyword">this</span>.attachment=<span class="hljs-keyword">this</span>.piece.attachment:<span class="hljs-keyword">this</span>.string=<span class="hljs-keyword">this</span>.piece.toString()}<span class="hljs-keyword">var</span> a;<span class="hljs-keyword">return</span> i(s,r),s.prototype.createNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s;<span class="hljs-keyword">if</span>(s=<span class="hljs-keyword">this</span>.attachment?<span class="hljs-keyword">this</span>.createAttachmentNodes():<span class="hljs-keyword">this</span>.createStringNodes(),e=<span class="hljs-keyword">this</span>.createElement()){<span class="hljs-keyword">for</span>(o=t(e),n=<span class="hljs-number">0</span>,i=s.length;i&gt;n;n++)r=s[n],o.appendChild(r);s=[e]}<span class="hljs-keyword">return</span> s},s.prototype.createAttachmentNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;<span class="hljs-keyword">return</span> t=<span class="hljs-keyword">this</span>.attachment.isPreviewable()?e.PreviewableAttachmentView:e.AttachmentView,n=<span class="hljs-keyword">this</span>.createChildView(t,<span class="hljs-keyword">this</span>.piece.attachment,{<span class="hljs-attr">piece</span>:<span class="hljs-keyword">this</span>.piece}),n.getNodes()},s.prototype.createStringNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,i,r,s,a,u,c,l;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=(u=<span class="hljs-keyword">this</span>.textConfig)?u.plaintext:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>[<span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-keyword">this</span>.string)];<span class="hljs-keyword">for</span>(a=[],c=<span class="hljs-keyword">this</span>.string.split(<span class="hljs-string">"\n"</span>),n=e=<span class="hljs-number">0</span>,i=c.length;i&gt;e;n=++e)l=c[n],n&gt;<span class="hljs-number">0</span>&amp;&amp;(t=o(<span class="hljs-string">"br"</span>),a.push(t)),(r=l.length)&amp;&amp;(s=<span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-keyword">this</span>.preserveSpaces(l)),a.push(s));<span class="hljs-keyword">return</span> a},s.prototype.createElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,i,r,s,a,u,c;<span class="hljs-keyword">for</span>(r <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.attributes)<span class="hljs-keyword">if</span>((t=n(r))&amp;&amp;(t.tagName&amp;&amp;(s=o(t.tagName),i?(i.appendChild(s),i=s):e=i=s),t.style))<span class="hljs-keyword">if</span>(u){a=t.style;<span class="hljs-keyword">for</span>(r <span class="hljs-keyword">in</span> a)c=a[r],u[r]=c}<span class="hljs-keyword">else</span> u=t.style;<span class="hljs-keyword">if</span>(u){<span class="hljs-literal">null</span>==e&amp;&amp;(e=o(<span class="hljs-string">"span"</span>));<span class="hljs-keyword">for</span>(r <span class="hljs-keyword">in</span> u)c=u[r],e.style[r]=c}<span class="hljs-keyword">return</span> e},s.prototype.createContainerElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,i,r,s;r=<span class="hljs-keyword">this</span>.attributes;<span class="hljs-keyword">for</span>(i <span class="hljs-keyword">in</span> r)<span class="hljs-keyword">if</span>(s=r[i],(e=n(i))&amp;&amp;e.groupTagName)<span class="hljs-keyword">return</span> t={},t[i]=s,o(e.groupTagName,t)},a=e.NON_BREAKING_SPACE,s.prototype.preserveSpaces=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.context.isLast&amp;&amp;(t=t.replace(<span class="hljs-regexp">/\ $/</span>,a)),t=t.replace(<span class="hljs-regexp">/(\S)\ {3}(\S)/g</span>,<span class="hljs-string">"$1 "</span>+a+<span class="hljs-string">" $2"</span>).replace(<span class="hljs-regexp">/\ {2}/g</span>,a+<span class="hljs-string">" "</span>).replace(<span class="hljs-regexp">/\ {2}/g</span>,<span class="hljs-string">" "</span>+a),(<span class="hljs-keyword">this</span>.context.isFirst||<span class="hljs-keyword">this</span>.context.followsWhitespace)&amp;&amp;(t=t.replace(<span class="hljs-regexp">/^\ /</span>,a)),t},s}(e.ObjectView)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.TextView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{o.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.text=<span class="hljs-keyword">this</span>.object,<span class="hljs-keyword">this</span>.textConfig=<span class="hljs-keyword">this</span>.options.textConfig}<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">return</span> t(o,n),o.prototype.createNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,r,s,a,u,c,l,h;<span class="hljs-keyword">for</span>(a=[],c=e.ObjectGroup.groupObjects(<span class="hljs-keyword">this</span>.getPieces()),r=c.length<span class="hljs-number">-1</span>,o=n=<span class="hljs-number">0</span>,s=c.length;s&gt;n;o=++n)u=c[o],t={},<span class="hljs-number">0</span>===o&amp;&amp;(t.isFirst=!<span class="hljs-number">0</span>),o===r&amp;&amp;(t.isLast=!<span class="hljs-number">0</span>),i(l)&amp;&amp;(t.followsWhitespace=!<span class="hljs-number">0</span>),h=<span class="hljs-keyword">this</span>.findOrCreateCachedChildView(e.PieceView,u,{<span class="hljs-attr">textConfig</span>:<span class="hljs-keyword">this</span>.textConfig,<span class="hljs-attr">context</span>:t}),a.push.apply(a,h.getNodes()),l=u;<span class="hljs-keyword">return</span> a},o.prototype.getPieces=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.text.getPieces(),i=[],t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)n=o[t],n.hasAttribute(<span class="hljs-string">"blockBreak"</span>)||i.push(n);<span class="hljs-keyword">return</span> i},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-regexp">/\s$/</span>.test(<span class="hljs-literal">null</span>!=t?t.toString():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},o}(e.ObjectView)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)i.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=e.makeElement,t=e.getBlockConfig,e.BlockView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params"></span>)</span>{r.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.block=<span class="hljs-keyword">this</span>.object,<span class="hljs-keyword">this</span>.attributes=<span class="hljs-keyword">this</span>.block.getAttributes()}<span class="hljs-keyword">return</span> o(r,i),r.prototype.createNodes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o,i,r,s,a,u,c,l,h;<span class="hljs-keyword">if</span>(o=<span class="hljs-built_in">document</span>.createComment(<span class="hljs-string">"block"</span>),u=[o],<span class="hljs-keyword">this</span>.block.isEmpty()?u.push(n(<span class="hljs-string">"br"</span>)):(l=<span class="hljs-literal">null</span>!=(c=t(<span class="hljs-keyword">this</span>.block.getLastAttribute()))?c.text:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,h=<span class="hljs-keyword">this</span>.findOrCreateCachedChildView(e.TextView,<span class="hljs-keyword">this</span>.block.text,{<span class="hljs-attr">textConfig</span>:l}),u.push.apply(u,h.getNodes()),<span class="hljs-keyword">this</span>.shouldAddExtraNewlineElement()&amp;&amp;u.push(n(<span class="hljs-string">"br"</span>))),<span class="hljs-keyword">this</span>.attributes.length)<span class="hljs-keyword">return</span> u;<span class="hljs-keyword">for</span>(i=n(e.config.blockAttributes[<span class="hljs-string">"default"</span>].tagName),r=<span class="hljs-number">0</span>,s=u.length;s&gt;r;r++)a=u[r],i.appendChild(a);<span class="hljs-keyword">return</span>[i]},r.prototype.createContainerElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> o,i;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.attributes[e],i=t(o),n(i.tagName)},r.prototype.shouldAddExtraNewlineElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-regexp">/\n\n$/</span>.test(<span class="hljs-keyword">this</span>.block.toString())},r}(e.ObjectView)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)i.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=e.defer,n=e.makeElement,e.DocumentView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">r</span>(<span class="hljs-params"></span>)</span>{r.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.element=<span class="hljs-keyword">this</span>.options.element,<span class="hljs-keyword">this</span>.elementStore=<span class="hljs-keyword">new</span> e.ElementStore,<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.object)}<span class="hljs-keyword">var</span> s,a,u;<span class="hljs-keyword">return</span> o(r,i),r.render=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,o;<span class="hljs-keyword">return</span> e=n(<span class="hljs-string">"div"</span>),o=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(t,{<span class="hljs-attr">element</span>:e}),o.render(),o.sync(),e},r.prototype.setDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.isEqualTo(<span class="hljs-keyword">this</span>.document)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.document=<span class="hljs-keyword">this</span>.object=t},r.prototype.render=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,o,i,r,s,a,u;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.childViews=[],<span class="hljs-keyword">this</span>.shadowElement=n(<span class="hljs-string">"div"</span>),!<span class="hljs-keyword">this</span>.document.isEmpty()){<span class="hljs-keyword">for</span>(s=e.ObjectGroup.groupObjects(<span class="hljs-keyword">this</span>.document.getBlocks(),{<span class="hljs-attr">asTree</span>:!<span class="hljs-number">0</span>}),a=[],t=<span class="hljs-number">0</span>,o=s.length;o&gt;t;t++)r=s[t],u=<span class="hljs-keyword">this</span>.findOrCreateCachedChildView(e.BlockView,r),a.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o;<span class="hljs-keyword">for</span>(n=u.getNodes(),o=[],t=<span class="hljs-number">0</span>,e=n.length;e&gt;t;t++)i=n[t],o.push(<span class="hljs-keyword">this</span>.shadowElement.appendChild(i));<span class="hljs-keyword">return</span> o}.call(<span class="hljs-keyword">this</span>));<span class="hljs-keyword">return</span> a}},r.prototype.isSynced=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> s(<span class="hljs-keyword">this</span>.shadowElement,<span class="hljs-keyword">this</span>.element)},r.prototype.sync=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">for</span>(t=<span class="hljs-keyword">this</span>.createDocumentFragmentForSync();<span class="hljs-keyword">this</span>.element.lastChild;)<span class="hljs-keyword">this</span>.element.removeChild(<span class="hljs-keyword">this</span>.element.lastChild);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.element.appendChild(t),<span class="hljs-keyword">this</span>.didSync()},r.prototype.didSync=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elementStore.reset(a(<span class="hljs-keyword">this</span>.element)),t(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.garbageCollectCachedViews()}}(<span class="hljs-keyword">this</span>))},r.prototype.createDocumentFragmentForSync=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r,s,u,c,l;<span class="hljs-keyword">for</span>(e=<span class="hljs-built_in">document</span>.createDocumentFragment(),u=<span class="hljs-keyword">this</span>.shadowElement.childNodes,n=<span class="hljs-number">0</span>,i=u.length;i&gt;n;n++)s=u[n],e.appendChild(s.cloneNode(!<span class="hljs-number">0</span>));<span class="hljs-keyword">for</span>(c=a(e),o=<span class="hljs-number">0</span>,r=c.length;r&gt;o;o++)t=c[o],(l=<span class="hljs-keyword">this</span>.elementStore.remove(t))&amp;&amp;t.parentNode.replaceChild(l,t);<span class="hljs-keyword">return</span> e},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.querySelectorAll(<span class="hljs-string">"[data-trix-store-key]"</span>)},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> u(t.innerHTML)===u(e.innerHTML)},u=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.replace(<span class="hljs-regexp">/&amp;nbsp;/g</span>,<span class="hljs-string">" "</span>)},r}(e.ObjectView)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.apply(e,<span class="hljs-built_in">arguments</span>)}},u=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)c.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=e.handleEvent,s=e.tagName,o=e.findClosestElementFromNode,r=e.innerElementIsActive,n=e.defer,t=e.AttachmentView.attachmentSelector,e.CompositionController=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params">n,o</span>)</span>{<span class="hljs-keyword">this</span>.element=n,<span class="hljs-keyword">this</span>.composition=o,<span class="hljs-keyword">this</span>.didClickAttachment=a(<span class="hljs-keyword">this</span>.didClickAttachment,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didBlur=a(<span class="hljs-keyword">this</span>.didBlur,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didFocus=a(<span class="hljs-keyword">this</span>.didFocus,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.documentView=<span class="hljs-keyword">new</span> e.DocumentView(<span class="hljs-keyword">this</span>.composition.document,{<span class="hljs-attr">element</span>:<span class="hljs-keyword">this</span>.element}),i(<span class="hljs-string">"focus"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didFocus}),i(<span class="hljs-string">"blur"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didBlur}),i(<span class="hljs-string">"click"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:<span class="hljs-string">"a[contenteditable=false]"</span>,<span class="hljs-attr">preventDefault</span>:!<span class="hljs-number">0</span>}),i(<span class="hljs-string">"mousedown"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:t,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didClickAttachment}),i(<span class="hljs-string">"click"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:<span class="hljs-string">"a"</span>+t,<span class="hljs-attr">preventDefault</span>:!<span class="hljs-number">0</span>})}<span class="hljs-keyword">return</span> u(s,o),s.prototype.didFocus=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> t.focused?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(t.focused=!<span class="hljs-number">0</span>,<span class="hljs-literal">null</span>!=(e=t.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionControllerDidFocus?e.compositionControllerDidFocus():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)}}(<span class="hljs-keyword">this</span>),<span class="hljs-literal">null</span>!=(e=<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.blurPromise)?n.then(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?e:t()},s.prototype.didBlur=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blurPromise=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> n(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> r(t.element)||(t.focused=<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>!=(n=t.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.compositionControllerDidBlur&amp;&amp;n.compositionControllerDidBlur()),t.blurPromise=<span class="hljs-literal">null</span>,e()})}}(<span class="hljs-keyword">this</span>))},s.prototype.didClickAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.findAttachmentForElement(e),<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> o.compositionControllerDidSelectAttachment?o.compositionControllerDidSelectAttachment(n):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.render=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.revision!==<span class="hljs-keyword">this</span>.composition.revision&amp;&amp;(<span class="hljs-keyword">this</span>.documentView.setDocument(<span class="hljs-keyword">this</span>.composition.document),<span class="hljs-keyword">this</span>.documentView.render(),<span class="hljs-keyword">this</span>.revision=<span class="hljs-keyword">this</span>.composition.revision),<span class="hljs-keyword">this</span>.documentView.isSynced()||(<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.compositionControllerWillSyncDocumentView&amp;&amp;t.compositionControllerWillSyncDocumentView(),<span class="hljs-keyword">this</span>.documentView.sync(),<span class="hljs-keyword">this</span>.reinstallAttachmentEditor(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionControllerDidSyncDocumentView&amp;&amp;e.compositionControllerDidSyncDocumentView()),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.compositionControllerDidRender?n.compositionControllerDidRender():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.rerenderViewForObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.invalidateViewForObject(t),<span class="hljs-keyword">this</span>.render()},s.prototype.invalidateViewForObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.documentView.invalidateViewForObject(t)},s.prototype.isViewCachingEnabled=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.documentView.isViewCachingEnabled()},s.prototype.enableViewCaching=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.documentView.enableViewCaching()},s.prototype.disableViewCaching=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.documentView.disableViewCaching()},s.prototype.refreshViewCache=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.documentView.garbageCollectCachedViews()},s.prototype.installAttachmentEditorForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">if</span>((<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.attachmentEditor)?i.attachment:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)!==t&amp;&amp;(o=<span class="hljs-keyword">this</span>.documentView.findElementForObject(t)))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.uninstallAttachmentEditor(),n=<span class="hljs-keyword">this</span>.composition.document.getAttachmentPieceForAttachment(t),<span class="hljs-keyword">this</span>.attachmentEditor=<span class="hljs-keyword">new</span> e.AttachmentEditorController(n,o,<span class="hljs-keyword">this</span>.element),<span class="hljs-keyword">this</span>.attachmentEditor.delegate=<span class="hljs-keyword">this</span>},s.prototype.uninstallAttachmentEditor=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.attachmentEditor)?t.uninstall():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.reinstallAttachmentEditor=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachmentEditor?(t=<span class="hljs-keyword">this</span>.attachmentEditor.attachment,<span class="hljs-keyword">this</span>.uninstallAttachmentEditor(),<span class="hljs-keyword">this</span>.installAttachmentEditorForAttachment(t)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.editAttachmentCaption=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.attachmentEditor)?t.editCaption():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.didUninstallAttachmentEditor=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachmentEditor=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.render()},s.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.compositionControllerWillUpdateAttachment&amp;&amp;n.compositionControllerWillUpdateAttachment(e),<span class="hljs-keyword">this</span>.composition.updateAttributesForAttachment(t,e)},s.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.compositionControllerWillUpdateAttachment&amp;&amp;n.compositionControllerWillUpdateAttachment(e),<span class="hljs-keyword">this</span>.composition.removeAttributeForAttachment(t,e)},s.prototype.attachmentEditorDidRequestRemovalOfAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.attachmentEditorDidRequestDeselectingAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.findAttachmentForElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.document.getAttachmentById(<span class="hljs-built_in">parseInt</span>(t.dataset.trixId,<span class="hljs-number">10</span>))},s}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.apply(e,<span class="hljs-built_in">arguments</span>)}},r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)s.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=e.handleEvent,o=e.triggerEvent,t=e.findClosestElementFromNode,e.ToolbarController=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.element=t,<span class="hljs-keyword">this</span>.didKeyDownDialogInput=i(<span class="hljs-keyword">this</span>.didKeyDownDialogInput,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didClickDialogButton=i(<span class="hljs-keyword">this</span>.didClickDialogButton,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didClickAttributeButton=i(<span class="hljs-keyword">this</span>.didClickAttributeButton,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didClickActionButton=i(<span class="hljs-keyword">this</span>.didClickActionButton,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.attributes={},<span class="hljs-keyword">this</span>.actions={},<span class="hljs-keyword">this</span>.resetDialogInputs(),n(<span class="hljs-string">"mousedown"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:a,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didClickActionButton}),n(<span class="hljs-string">"mousedown"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:c,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didClickAttributeButton}),n(<span class="hljs-string">"click"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:y,<span class="hljs-attr">preventDefault</span>:!<span class="hljs-number">0</span>}),n(<span class="hljs-string">"click"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:l,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didClickDialogButton}),n(<span class="hljs-string">"keydown"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">matchingSelector</span>:h,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didKeyDownDialogInput})}<span class="hljs-keyword">var</span> a,u,c,l,h,p,d,f,g,m,y;<span class="hljs-keyword">return</span> r(s,e),a=<span class="hljs-string">"button[data-trix-action]"</span>,c=<span class="hljs-string">"button[data-trix-attribute]"</span>,y=[a,c].join(<span class="hljs-string">", "</span>),p=<span class="hljs-string">".dialog[data-trix-dialog]"</span>,u=p+<span class="hljs-string">".active"</span>,l=p+<span class="hljs-string">" input[data-trix-method]"</span>,h=p+<span class="hljs-string">" input[type=text], "</span>+p+<span class="hljs-string">" input[type=url]"</span>,s.prototype.didClickActionButton=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;o.toolbarDidClickButton(),t.preventDefault(),n=d(e),<span class="hljs-keyword">this</span>.getDialog(n)?<span class="hljs-keyword">this</span>.toggleDialog(n):<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.delegate)?i.toolbarDidInvokeAction(n):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.didClickAttributeButton=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;o.toolbarDidClickButton(),t.preventDefault(),n=f(e),<span class="hljs-keyword">this</span>.getDialog(n)?<span class="hljs-keyword">this</span>.toggleDialog(n):<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;i.toolbarDidToggleAttribute(n),<span class="hljs-keyword">this</span>.refreshAttributeButtons()},s.prototype.didClickDialogButton=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">var</span> o,i;<span class="hljs-keyword">return</span> o=t(n,{<span class="hljs-attr">matchingSelector</span>:p}),i=n.getAttribute(<span class="hljs-string">"data-trix-method"</span>),<span class="hljs-keyword">this</span>[i].call(<span class="hljs-keyword">this</span>,o)},s.prototype.didKeyDownDialogInput=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> <span class="hljs-number">13</span>===t.keyCode&amp;&amp;(t.preventDefault(),n=e.getAttribute(<span class="hljs-string">"name"</span>),o=<span class="hljs-keyword">this</span>.getDialog(n),<span class="hljs-keyword">this</span>.setAttribute(o)),<span class="hljs-number">27</span>===t.keyCode?(t.preventDefault(),<span class="hljs-keyword">this</span>.hideDialog()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.updateActions=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.actions=t,<span class="hljs-keyword">this</span>.refreshActionButtons()},s.prototype.refreshActionButtons=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.eachActionButton(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">return</span> e.disabled=t.actions[n]===!<span class="hljs-number">1</span>}}(<span class="hljs-keyword">this</span>))},s.prototype.eachActionButton=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.element.querySelectorAll(a),r=[],n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)e=i[n],r.push(t(e,d(e)));<span class="hljs-keyword">return</span> r},s.prototype.updateAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes=t,<span class="hljs-keyword">this</span>.refreshAttributeButtons()},s.prototype.refreshAttributeButtons=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.eachAttributeButton(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">return</span> e.disabled=t.attributes[n]===!<span class="hljs-number">1</span>,t.attributes[n]||t.dialogIsVisible(n)?e.classList.add(<span class="hljs-string">"active"</span>):e.classList.remove(<span class="hljs-string">"active"</span>)}}(<span class="hljs-keyword">this</span>))},s.prototype.eachAttributeButton=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.element.querySelectorAll(c),r=[],n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)e=i[n],r.push(t(e,f(e)));<span class="hljs-keyword">return</span> r},s.prototype.applyKeyboardCommand=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r,s,a,u;<span class="hljs-keyword">for</span>(s=<span class="hljs-built_in">JSON</span>.stringify(t.sort()),u=<span class="hljs-keyword">this</span>.element.querySelectorAll(<span class="hljs-string">"[data-trix-key]"</span>),r=<span class="hljs-number">0</span>,a=u.length;a&gt;r;r++)<span class="hljs-keyword">if</span>(e=u[r],i=e.getAttribute(<span class="hljs-string">"data-trix-key"</span>).split(<span class="hljs-string">"+"</span>),n=<span class="hljs-built_in">JSON</span>.stringify(i.sort()),n===s)<span class="hljs-keyword">return</span> o(<span class="hljs-string">"mousedown"</span>,{<span class="hljs-attr">onElement</span>:e}),!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},s.prototype.dialogIsVisible=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.getDialog(t))?e.classList.contains(<span class="hljs-string">"active"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.toggleDialog=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dialogIsVisible(t)?<span class="hljs-keyword">this</span>.hideDialog():<span class="hljs-keyword">this</span>.showDialog(t)},s.prototype.showDialog=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s,a,u,c,l;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">this</span>.hideDialog(),<span class="hljs-literal">null</span>!=(a=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;a.toolbarWillShowDialog(),o=<span class="hljs-keyword">this</span>.getDialog(t),o.classList.add(<span class="hljs-string">"active"</span>),u=o.querySelectorAll(<span class="hljs-string">"input[disabled]"</span>),i=<span class="hljs-number">0</span>,s=u.length;s&gt;i;i++)n=u[i],n.removeAttribute(<span class="hljs-string">"disabled"</span>);<span class="hljs-keyword">return</span>(e=f(o))&amp;&amp;(r=m(o,t))&amp;&amp;(r.value=<span class="hljs-literal">null</span>!=(c=<span class="hljs-keyword">this</span>.attributes[e])?c:<span class="hljs-string">""</span>,r.select()),<span class="hljs-literal">null</span>!=(l=<span class="hljs-keyword">this</span>.delegate)?l.toolbarDidShowDialog(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.setAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> e=f(t),n=m(t,e),n.willValidate&amp;&amp;!n.checkValidity()?(n.classList.add(<span class="hljs-string">"validate"</span>),n.focus()):(<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;o.toolbarDidUpdateAttribute(e,n.value),<span class="hljs-keyword">this</span>.hideDialog())},s.prototype.removeAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> e=f(t),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;n.toolbarDidRemoveAttribute(e),<span class="hljs-keyword">this</span>.hideDialog()},s.prototype.hideDialog=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.element.querySelector(u))?(t.classList.remove(<span class="hljs-string">"active"</span>),<span class="hljs-keyword">this</span>.resetDialogInputs(),<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)?e.toolbarDidHideDialog(g(t)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.resetDialogInputs=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.element.querySelectorAll(h),i=[],t=<span class="hljs-number">0</span>,n=o.length;n&gt;t;t++)e=o[t],e.setAttribute(<span class="hljs-string">"disabled"</span>,<span class="hljs-string">"disabled"</span>),i.push(e.classList.remove(<span class="hljs-string">"validate"</span>));<span class="hljs-keyword">return</span> i},s.prototype.getDialog=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.element.querySelector(<span class="hljs-string">".dialog[data-trix-dialog="</span>+t+<span class="hljs-string">"]"</span>)},m=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==e&amp;&amp;(e=f(t)),t.querySelector(<span class="hljs-string">"input[name='"</span>+e+<span class="hljs-string">"']"</span>)},d=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.getAttribute(<span class="hljs-string">"data-trix-action"</span>)},f=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.getAttribute(<span class="hljs-string">"data-trix-attribute"</span>)},g=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.getAttribute(<span class="hljs-string">"data-trix-dialog"</span>)},s}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ImagePreloadOperation=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.url=t}<span class="hljs-keyword">return</span> t(n,e),n.prototype.perform=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">new</span> Image,e.onload=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!<span class="hljs-number">0</span>,e)}}(<span class="hljs-keyword">this</span>),e.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t(!<span class="hljs-number">1</span>)},e.src=<span class="hljs-keyword">this</span>.url},n}(e.Operation)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.apply(e,<span class="hljs-built_in">arguments</span>)}},n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)o.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.Attachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-literal">null</span>==n&amp;&amp;(n={}),<span class="hljs-keyword">this</span>.releaseFile=t(<span class="hljs-keyword">this</span>.releaseFile,<span class="hljs-keyword">this</span>),i.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.attributes=e.Hash.box(n),<span class="hljs-keyword">this</span>.didChangeAttributes()}<span class="hljs-keyword">return</span> n(i,o),i.previewablePattern=<span class="hljs-regexp">/^image(\/(gif|png|jpe?g)|$)/</span>,i.attachmentForFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.attributesForFile(t),e=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(n),e.setFile(t),e},i.attributesForFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> e.Hash({<span class="hljs-attr">filename</span>:t.name,<span class="hljs-attr">filesize</span>:t.size,<span class="hljs-attr">contentType</span>:t.type})},i.fromJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(t)},i.prototype.getAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(t)},i.prototype.hasAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.has(t)},i.prototype.getAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.toObject()},i.prototype.setAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t={}),e=<span class="hljs-keyword">this</span>.attributes.merge(t),<span class="hljs-keyword">this</span>.attributes.isEqualTo(e)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.attributes=e,<span class="hljs-keyword">this</span>.didChangeAttributes(),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.attachmentDidChangeAttributes?n.attachmentDidChangeAttributes(<span class="hljs-keyword">this</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},i.prototype.didChangeAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isPreviewable()?<span class="hljs-keyword">this</span>.preloadURL():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.isPending=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.file&amp;&amp;!(<span class="hljs-keyword">this</span>.getURL()||<span class="hljs-keyword">this</span>.getHref())},i.prototype.isPreviewable=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.has(<span class="hljs-string">"previewable"</span>)?<span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"previewable"</span>):<span class="hljs-keyword">this</span>.constructor.previewablePattern.test(<span class="hljs-keyword">this</span>.getContentType())},i.prototype.getType=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasContent()?<span class="hljs-string">"content"</span>:<span class="hljs-keyword">this</span>.isPreviewable()?<span class="hljs-string">"preview"</span>:<span class="hljs-string">"file"</span>},i.prototype.getURL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"url"</span>)},i.prototype.getHref=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"href"</span>)},i.prototype.getFilename=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"filename"</span>))?t:<span class="hljs-string">""</span>},i.prototype.getFilesize=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"filesize"</span>)},i.prototype.getFormattedFilesize=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=<span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"filesize"</span>),<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> t?e.config.fileSize.formatter(t):<span class="hljs-string">""</span>},i.prototype.getExtension=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.getFilename().match(<span class="hljs-regexp">/\.(\w+)$/</span>))?t[<span class="hljs-number">1</span>].toLowerCase():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.getContentType=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"contentType"</span>)},i.prototype.hasContent=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.has(<span class="hljs-string">"content"</span>)},i.prototype.getContent=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"content"</span>)},i.prototype.getWidth=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"width"</span>)},i.prototype.getHeight=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"height"</span>)},i.prototype.getFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.file},i.prototype.setFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.file=t,<span class="hljs-keyword">this</span>.isPreviewable()?<span class="hljs-keyword">this</span>.preloadFile():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.releaseFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.releasePreloadedFile(),<span class="hljs-keyword">this</span>.file=<span class="hljs-literal">null</span>},i.prototype.getUploadProgress=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.uploadProgress)?t:<span class="hljs-number">0</span>},i.prototype.setUploadProgress=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.uploadProgress!==t?(<span class="hljs-keyword">this</span>.uploadProgress=t,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.uploadProgressDelegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(<span class="hljs-keyword">this</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getAttributes()},i.prototype.getCacheKey=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>[i.__super__.getCacheKey.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.attributes.getCacheKey(),<span class="hljs-keyword">this</span>.getPreviewURL()].join(<span class="hljs-string">"/"</span>)},i.prototype.getPreviewURL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.previewURL||<span class="hljs-keyword">this</span>.preloadingURL},i.prototype.setPreviewURL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> t!==<span class="hljs-keyword">this</span>.getPreviewURL()?(<span class="hljs-keyword">this</span>.previewURL=t,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.previewDelegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.attachmentDidChangePreviewURL&amp;&amp;e.attachmentDidChangePreviewURL(<span class="hljs-keyword">this</span>),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(<span class="hljs-keyword">this</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.preloadURL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.preload(<span class="hljs-keyword">this</span>.getURL(),<span class="hljs-keyword">this</span>.releaseFile)},i.prototype.preloadFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.file?(<span class="hljs-keyword">this</span>.fileObjectURL=URL.createObjectURL(<span class="hljs-keyword">this</span>.file),<span class="hljs-keyword">this</span>.preload(<span class="hljs-keyword">this</span>.fileObjectURL)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.releasePreloadedFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fileObjectURL?(URL.revokeObjectURL(<span class="hljs-keyword">this</span>.fileObjectURL),<span class="hljs-keyword">this</span>.fileObjectURL=<span class="hljs-literal">null</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.preload=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> t&amp;&amp;t!==<span class="hljs-keyword">this</span>.getPreviewURL()?(<span class="hljs-keyword">this</span>.preloadingURL=t,o=<span class="hljs-keyword">new</span> e.ImagePreloadOperation(t),o.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-keyword">var</span> i,r;<span class="hljs-keyword">return</span> r=o.width,i=o.height,e.setAttributes({<span class="hljs-attr">width</span>:r,<span class="hljs-attr">height</span>:i}),e.preloadingURL=<span class="hljs-literal">null</span>,e.setPreviewURL(t),<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> n?n():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}}(<span class="hljs-keyword">this</span>))):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i}(e.Object)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Piece=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-literal">null</span>==n&amp;&amp;(n={}),o.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.attributes=e.Hash.box(n)}<span class="hljs-keyword">return</span> t(o,n),o.types={},o.registerType=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> e.type=t,<span class="hljs-keyword">this</span>.types[t]=e},o.fromJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.types[t.type])?e.fromJSON(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},o.prototype.copyWithAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.getValue(),t)},o.prototype.copyWithAdditionalAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithAttributes(<span class="hljs-keyword">this</span>.attributes.merge(t))},o.prototype.copyWithoutAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithAttributes(<span class="hljs-keyword">this</span>.attributes.remove(t))},o.prototype.copy=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithAttributes(<span class="hljs-keyword">this</span>.attributes)},o.prototype.getAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.get(t)},o.prototype.getAttributesHash=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes
},o.prototype.getAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.toObject()},o.prototype.getCommonAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span>(n=pieceList.getPieceAtIndex(<span class="hljs-number">0</span>))?(t=n.attributes,e=t.getKeys(),pieceList.eachPiece(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">return</span> e=t.getKeysCommonToHash(n.attributes),t=t.slice(e)}),t.toObject()):{}},o.prototype.hasAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.has(t)},o.prototype.hasSameStringValueAsPiece=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-keyword">this</span>.toString()===t.toString()},o.prototype.hasSameAttributesAsPiece=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=t&amp;&amp;(<span class="hljs-keyword">this</span>.attributes===t.attributes||<span class="hljs-keyword">this</span>.attributes.isEqualTo(t.attributes))},o.prototype.isBlockBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},o.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> o.__super__.isEqualTo.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)||<span class="hljs-keyword">this</span>.hasSameConstructorAs(t)&amp;&amp;<span class="hljs-keyword">this</span>.hasSameStringValueAsPiece(t)&amp;&amp;<span class="hljs-keyword">this</span>.hasSameAttributesAsPiece(t)},o.prototype.isEmpty=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.length},o.prototype.isSerializable=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>},o.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-keyword">this</span>.constructor.type,<span class="hljs-attr">attributes</span>:<span class="hljs-keyword">this</span>.getAttributes()}},o.prototype.contentsForInspection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-keyword">this</span>.constructor.type,<span class="hljs-attr">attributes</span>:<span class="hljs-keyword">this</span>.attributes.inspect()}},o.prototype.canBeGrouped=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasAttribute(<span class="hljs-string">"href"</span>)},o.prototype.canBeGroupedWith=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"href"</span>)===t.getAttribute(<span class="hljs-string">"href"</span>)},o.prototype.getLength=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.length},o.prototype.canBeConsolidatedWith=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},o}(e.Object)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Piece.registerType(<span class="hljs-string">"attachment"</span>,e.AttachmentPiece=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.attachment=t,o.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.length=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.ensureAttachmentExclusivelyHasAttribute(<span class="hljs-string">"href"</span>)}<span class="hljs-keyword">return</span> t(o,n),o.fromJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(e.Attachment.fromJSON(t.attachment),t.attributes)},o.prototype.ensureAttachmentExclusivelyHasAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasAttribute(t)&amp;&amp;<span class="hljs-keyword">this</span>.attachment.hasAttribute(t)?<span class="hljs-keyword">this</span>.attributes=<span class="hljs-keyword">this</span>.attributes.remove(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},o.prototype.getValue=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachment},o.prototype.isSerializable=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.attachment.isPending()},o.prototype.getCaption=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.attributes.get(<span class="hljs-string">"caption"</span>))?t:<span class="hljs-string">""</span>},o.prototype.getAttributesForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.slice([<span class="hljs-string">"caption"</span>])},o.prototype.canBeGrouped=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> o.__super__.canBeGrouped.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)&amp;&amp;!<span class="hljs-keyword">this</span>.attachment.hasAttribute(<span class="hljs-string">"href"</span>)},o.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> o.__super__.isEqualTo.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)&amp;&amp;<span class="hljs-keyword">this</span>.attachment.id===(<span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-literal">null</span>!=(e=t.attachment)?e.id:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},o.prototype.toString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.OBJECT_REPLACEMENT_CHARACTER},o.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=o.__super__.toJSON.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),t.attachment=<span class="hljs-keyword">this</span>.attachment,t},o.prototype.getCacheKey=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>[o.__super__.getCacheKey.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.attachment.getCacheKey()].join(<span class="hljs-string">"/"</span>)},o.prototype.toConsole=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.toString())},o}(e.Piece))}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Piece.registerType(<span class="hljs-string">"string"</span>,e.StringPiece=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{n.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.string=t,<span class="hljs-keyword">this</span>.length=<span class="hljs-keyword">this</span>.string.length}<span class="hljs-keyword">return</span> t(n,e),n.fromJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(t.string,t.attributes)},n.prototype.getValue=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.string},n.prototype.toString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.string.toString()},n.prototype.isBlockBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"\n"</span>===<span class="hljs-keyword">this</span>.toString()&amp;&amp;<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"blockBreak"</span>)===!<span class="hljs-number">0</span>},n.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=n.__super__.toJSON.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),t.string=<span class="hljs-keyword">this</span>.string,t},n.prototype.canBeConsolidatedWith=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-keyword">this</span>.hasSameConstructorAs(t)&amp;&amp;<span class="hljs-keyword">this</span>.hasSameAttributesAsPiece(t)},n.prototype.consolidateWith=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.toString()+t.toString(),<span class="hljs-keyword">this</span>.attributes)},n.prototype.splitAtOffset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===t?(e=<span class="hljs-literal">null</span>,n=<span class="hljs-keyword">this</span>):t===<span class="hljs-keyword">this</span>.length?(e=<span class="hljs-keyword">this</span>,n=<span class="hljs-literal">null</span>):(e=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.string.slice(<span class="hljs-number">0</span>,t),<span class="hljs-keyword">this</span>.attributes),n=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.string.slice(t),<span class="hljs-keyword">this</span>.attributes)),[e,n]},n.prototype.toConsole=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=<span class="hljs-keyword">this</span>.string,t.length&gt;<span class="hljs-number">15</span>&amp;&amp;(t=t.slice(<span class="hljs-number">0</span>,<span class="hljs-number">14</span>)+<span class="hljs-string">"\u2026"</span>),<span class="hljs-built_in">JSON</span>.stringify(t.toString())},n}(e.Piece))}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)o.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice;t=e.spliceArray,e.SplittableList=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),o.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.objects=t.slice(<span class="hljs-number">0</span>),<span class="hljs-keyword">this</span>.length=<span class="hljs-keyword">this</span>.objects.length}<span class="hljs-keyword">var</span> r,s,a;<span class="hljs-keyword">return</span> n(o,e),o.box=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">instanceof</span> <span class="hljs-keyword">this</span>?t:<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(t)},o.prototype.indexOf=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.objects.indexOf(t)},o.prototype.splice=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-number">1</span>&lt;=<span class="hljs-built_in">arguments</span>.length?i.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">0</span>):[],<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(t.apply(<span class="hljs-literal">null</span>,[<span class="hljs-keyword">this</span>.objects].concat(i.call(e))))},o.prototype.eachObject=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s;<span class="hljs-keyword">for</span>(r=<span class="hljs-keyword">this</span>.objects,s=[],n=e=<span class="hljs-number">0</span>,o=r.length;o&gt;e;n=++e)i=r[n],s.push(t(i,n));<span class="hljs-keyword">return</span> s},o.prototype.insertObjectAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.splice(e,<span class="hljs-number">0</span>,t)},o.prototype.insertSplittableListAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.splice.apply(<span class="hljs-keyword">this</span>,[e,<span class="hljs-number">0</span>].concat(i.call(t.objects)))},o.prototype.insertSplittableListAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> i=<span class="hljs-keyword">this</span>.splitObjectAtPosition(e),o=i[<span class="hljs-number">0</span>],n=i[<span class="hljs-number">1</span>],<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(o).insertSplittableListAtIndex(t,n)},o.prototype.editObjectAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.replaceObjectAtIndex(e(<span class="hljs-keyword">this</span>.objects[t]),t)},o.prototype.replaceObjectAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.splice(e,<span class="hljs-number">1</span>,t)},o.prototype.removeObjectAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.splice(t,<span class="hljs-number">1</span>)},o.prototype.getObjectAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.objects[t]},o.prototype.getSplittableListInRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.splitObjectsAtRange(t),n=o[<span class="hljs-number">0</span>],e=o[<span class="hljs-number">1</span>],i=o[<span class="hljs-number">2</span>],<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n.slice(e,i+<span class="hljs-number">1</span>))},o.prototype.selectSplittableList=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.objects,r=[],n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)e=i[n],t(e)&amp;&amp;r.push(e);<span class="hljs-keyword">return</span> r}.call(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n)},o.prototype.removeObjectsInRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.splitObjectsAtRange(t),n=o[<span class="hljs-number">0</span>],e=o[<span class="hljs-number">1</span>],i=o[<span class="hljs-number">2</span>],<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n).splice(e,i-e+<span class="hljs-number">1</span>)},o.prototype.transformObjectsInRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a,u;<span class="hljs-keyword">return</span> s=<span class="hljs-keyword">this</span>.splitObjectsAtRange(t),r=s[<span class="hljs-number">0</span>],o=s[<span class="hljs-number">1</span>],a=s[<span class="hljs-number">2</span>],u=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,s,u;<span class="hljs-keyword">for</span>(u=[],n=t=<span class="hljs-number">0</span>,s=r.length;s&gt;t;n=++t)i=r[n],u.push(n&gt;=o&amp;&amp;a&gt;=n?e(i):i);<span class="hljs-keyword">return</span> u}(),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(u)},o.prototype.splitObjectsAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,s,u;<span class="hljs-keyword">return</span> i=<span class="hljs-keyword">this</span>.splitObjectAtPosition(a(t)),n=i[<span class="hljs-number">0</span>],e=i[<span class="hljs-number">1</span>],o=i[<span class="hljs-number">2</span>],s=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n).splitObjectAtPosition(r(t)+o),n=s[<span class="hljs-number">0</span>],u=s[<span class="hljs-number">1</span>],[n,e,u<span class="hljs-number">-1</span>]},o.prototype.getObjectAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.findIndexAndOffsetAtPosition(t),e=o.index,n=o.offset,<span class="hljs-keyword">this</span>.objects[e]},o.prototype.splitObjectAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s,a,u,c,l;<span class="hljs-keyword">return</span> s=<span class="hljs-keyword">this</span>.findIndexAndOffsetAtPosition(t),e=s.index,r=s.offset,i=<span class="hljs-keyword">this</span>.objects.slice(<span class="hljs-number">0</span>),<span class="hljs-literal">null</span>!=e?<span class="hljs-number">0</span>===r?(c=e,l=<span class="hljs-number">0</span>):(o=<span class="hljs-keyword">this</span>.getObjectAtIndex(e),a=o.splitAtOffset(r),n=a[<span class="hljs-number">0</span>],u=a[<span class="hljs-number">1</span>],i.splice(e,<span class="hljs-number">1</span>,n,u),c=e+<span class="hljs-number">1</span>,l=n.getLength()-r):(c=i.length,l=<span class="hljs-number">0</span>),[i,c,l]},o.prototype.consolidate=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r;<span class="hljs-keyword">for</span>(o=[],i=<span class="hljs-keyword">this</span>.objects[<span class="hljs-number">0</span>],r=<span class="hljs-keyword">this</span>.objects.slice(<span class="hljs-number">1</span>),t=<span class="hljs-number">0</span>,e=r.length;e&gt;t;t++)n=r[t],(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> i.canBeConsolidatedWith?i.canBeConsolidatedWith(n):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?i=i.consolidateWith(n):(o.push(i),i=n);<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=i&amp;&amp;o.push(i),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(o)},o.prototype.consolidateFromIndexToIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,r;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.objects.slice(<span class="hljs-number">0</span>),r=o.slice(t,e+<span class="hljs-number">1</span>),n=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(r).consolidate().toArray(),<span class="hljs-keyword">this</span>.splice.apply(<span class="hljs-keyword">this</span>,[t,r.length].concat(i.call(n)))},o.prototype.findIndexAndOffsetAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s,a;<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>,a=<span class="hljs-keyword">this</span>.objects,o=n=<span class="hljs-number">0</span>,i=a.length;i&gt;n;o=++n){<span class="hljs-keyword">if</span>(s=a[o],r=e+s.getLength(),t&gt;=e&amp;&amp;r&gt;t)<span class="hljs-keyword">return</span>{<span class="hljs-attr">index</span>:o,<span class="hljs-attr">offset</span>:t-e};e=r}<span class="hljs-keyword">return</span>{<span class="hljs-attr">index</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">offset</span>:<span class="hljs-literal">null</span>}},o.prototype.findPositionAtIndexAndOffset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a;<span class="hljs-keyword">for</span>(s=<span class="hljs-number">0</span>,a=<span class="hljs-keyword">this</span>.objects,n=o=<span class="hljs-number">0</span>,i=a.length;i&gt;o;n=++o)<span class="hljs-keyword">if</span>(r=a[n],t&gt;n)s+=r.getLength();<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n===t){s+=e;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">return</span> s},o.prototype.getEndPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.endPosition?<span class="hljs-keyword">this</span>.endPosition:<span class="hljs-keyword">this</span>.endPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>,i=<span class="hljs-keyword">this</span>.objects,n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)t=i[n],e+=t.getLength();<span class="hljs-keyword">return</span> e}.call(<span class="hljs-keyword">this</span>)},o.prototype.toString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.objects.join(<span class="hljs-string">""</span>)},o.prototype.toArray=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.objects.slice(<span class="hljs-number">0</span>)},o.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.toArray()},o.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> o.__super__.isEqualTo.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)||s(<span class="hljs-keyword">this</span>.objects,<span class="hljs-literal">null</span>!=t?t.objects:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==e&amp;&amp;(e=[]),t.length!==e.length)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(s=!<span class="hljs-number">0</span>,o=n=<span class="hljs-number">0</span>,i=t.length;i&gt;n;o=++n)r=t[o],s&amp;&amp;!r.isEqualTo(e[o])&amp;&amp;(s=!<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> s},o.prototype.contentsForInspection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>{<span class="hljs-attr">objects</span>:<span class="hljs-string">"["</span>+<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.objects,i=[],e=<span class="hljs-number">0</span>,n=o.length;n&gt;e;e++)t=o[e],i.push(t.inspect());<span class="hljs-keyword">return</span> i}.call(<span class="hljs-keyword">this</span>).join(<span class="hljs-string">", "</span>)+<span class="hljs-string">"]"</span>}},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t[<span class="hljs-number">0</span>]},r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t[<span class="hljs-number">1</span>]},o}(e.Object)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Text=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),o.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.pieceList=<span class="hljs-keyword">new</span> e.SplittableList(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,o,i;<span class="hljs-keyword">for</span>(i=[],e=<span class="hljs-number">0</span>,o=t.length;o&gt;e;e++)n=t[e],n.isEmpty()||i.push(n);<span class="hljs-keyword">return</span> i}())}<span class="hljs-keyword">return</span> t(o,n),o.textForAttachmentWithAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">new</span> e.AttachmentPiece(t,n),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>([o])},o.textForStringWithAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">new</span> e.StringPiece(t,n),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>([o])},o.fromJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o,i,r;<span class="hljs-keyword">for</span>(r=[],o=<span class="hljs-number">0</span>,i=t.length;i&gt;o;o++)n=t[o],r.push(e.Piece.fromJSON(n));<span class="hljs-keyword">return</span> r}(),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(o)},o.prototype.copy=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithPieceList(<span class="hljs-keyword">this</span>.pieceList)},o.prototype.copyWithPieceList=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(t.consolidate().toArray())},o.prototype.copyUsingObjectMap=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.getPieces(),s=[],n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)e=i[n],s.push(<span class="hljs-literal">null</span>!=(r=t.find(e))?r:e);<span class="hljs-keyword">return</span> s}.call(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n)},o.prototype.appendText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.insertTextAtPosition(t,<span class="hljs-keyword">this</span>.getLength())},o.prototype.insertTextAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithPieceList(<span class="hljs-keyword">this</span>.pieceList.insertSplittableListAtPosition(t.pieceList,e))},o.prototype.removeTextAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithPieceList(<span class="hljs-keyword">this</span>.pieceList.removeObjectsInRange(t))},o.prototype.replaceTextAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.removeTextAtRange(e).insertTextAtPosition(t,e[<span class="hljs-number">0</span>])},o.prototype.moveTextFromRangeToPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">if</span>(!(t[<span class="hljs-number">0</span>]&lt;=e&amp;&amp;e&lt;=t[<span class="hljs-number">1</span>]))<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.getTextAtRange(t),n=o.getLength(),t[<span class="hljs-number">0</span>]&lt;e&amp;&amp;(e-=n),<span class="hljs-keyword">this</span>.removeTextAtRange(t).insertTextAtPosition(o,e)},o.prototype.addAttributeAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o={},o[t]=e,<span class="hljs-keyword">this</span>.addAttributesAtRange(o,n)},o.prototype.addAttributesAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithPieceList(<span class="hljs-keyword">this</span>.pieceList.transformObjectsInRange(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> e.copyWithAdditionalAttributes(t)}))},o.prototype.removeAttributeAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithPieceList(<span class="hljs-keyword">this</span>.pieceList.transformObjectsInRange(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> e.copyWithoutAttribute(t)}))},o.prototype.setAttributesAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithPieceList(<span class="hljs-keyword">this</span>.pieceList.transformObjectsInRange(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> e.copyWithAttributes(t)}))},o.prototype.getAttributesAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.pieceList.getObjectAtPosition(t))?n.getAttributes():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?e:{}},o.prototype.getCommonAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;<span class="hljs-keyword">return</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.pieceList.toArray(),i=[],t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)n=o[t],i.push(n.getAttributes());<span class="hljs-keyword">return</span> i}.call(<span class="hljs-keyword">this</span>),e.Hash.fromCommonAttributesOfObjects(t).toObject()},o.prototype.getCommonAttributesAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.getTextAtRange(t).getCommonAttributes())?e:{}},o.prototype.getExpandedRangeForAttributeAtOffset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">for</span>(n=i=e,o=<span class="hljs-keyword">this</span>.getLength();n&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-keyword">this</span>.getCommonAttributesAtRange([n<span class="hljs-number">-1</span>,i])[t];)n--;<span class="hljs-keyword">for</span>(;o&gt;i&amp;&amp;<span class="hljs-keyword">this</span>.getCommonAttributesAtRange([e,i+<span class="hljs-number">1</span>])[t];)i++;<span class="hljs-keyword">return</span>[n,i]},o.prototype.getTextAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithPieceList(<span class="hljs-keyword">this</span>.pieceList.getSplittableListInRange(t))},o.prototype.getStringAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pieceList.getSplittableListInRange(t).toString()},o.prototype.getStringAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getStringAtRange([t,t+<span class="hljs-number">1</span>])},o.prototype.startsWithString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getStringAtRange([<span class="hljs-number">0</span>,t.length])===t},o.prototype.endsWithString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getLength(),<span class="hljs-keyword">this</span>.getStringAtRange([e-t.length,e])===t},o.prototype.getAttachmentPieces=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.pieceList.toArray(),i=[],t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)n=o[t],<span class="hljs-literal">null</span>!=n.attachment&amp;&amp;i.push(n);<span class="hljs-keyword">return</span> i},o.prototype.getAttachments=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.getAttachmentPieces(),i=[],t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)n=o[t],i.push(n.attachment);<span class="hljs-keyword">return</span> i},o.prototype.getAttachmentAndPositionById=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,r=<span class="hljs-keyword">this</span>.pieceList.toArray(),e=<span class="hljs-number">0</span>,n=r.length;n&gt;e;e++){<span class="hljs-keyword">if</span>(o=r[e],(<span class="hljs-literal">null</span>!=(s=o.attachment)?s.id:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===t)<span class="hljs-keyword">return</span>{<span class="hljs-attr">attachment</span>:o.attachment,<span class="hljs-attr">position</span>:i};i+=o.length}<span class="hljs-keyword">return</span>{<span class="hljs-attr">attachment</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">position</span>:<span class="hljs-literal">null</span>}},o.prototype.getAttachmentById=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.getAttachmentAndPositionById(t),e=o.attachment,n=o.position,e},o.prototype.getRangeOfAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.getAttachmentAndPositionById(t.id),t=n.attachment,e=n.position,<span class="hljs-literal">null</span>!=t?[e,e+<span class="hljs-number">1</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},o.prototype.updateAttributesForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span>(n=<span class="hljs-keyword">this</span>.getRangeOfAttachment(e))?<span class="hljs-keyword">this</span>.addAttributesAtRange(t,n):<span class="hljs-keyword">this</span>},o.prototype.getLength=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pieceList.getEndPosition()},o.prototype.isEmpty=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.getLength()},o.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> o.__super__.isEqualTo.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)||(<span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-literal">null</span>!=(e=t.pieceList)?e.isEqualTo(<span class="hljs-keyword">this</span>.pieceList):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},o.prototype.isBlockBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>===<span class="hljs-keyword">this</span>.getLength()&amp;&amp;<span class="hljs-keyword">this</span>.pieceList.getObjectAtIndex(<span class="hljs-number">0</span>).isBlockBreak()},o.prototype.eachPiece=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pieceList.eachObject(t)},o.prototype.getPieces=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pieceList.toArray()},o.prototype.getPieceAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pieceList.getObjectAtPosition(t)},o.prototype.contentsForInspection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">pieceList</span>:<span class="hljs-keyword">this</span>.pieceList.inspect()}},o.prototype.toSerializableText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=<span class="hljs-keyword">this</span>.pieceList.selectSplittableList(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.isSerializable()}),<span class="hljs-keyword">this</span>.copyWithPieceList(t)},o.prototype.toString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pieceList.toString()},o.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pieceList.toJSON()},o.prototype.toConsole=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.pieceList.toArray(),i=[],e=<span class="hljs-number">0</span>,n=o.length;n&gt;e;e++)t=o[e],i.push(<span class="hljs-built_in">JSON</span>.parse(t.toConsole()));<span class="hljs-keyword">return</span> i}.call(<span class="hljs-keyword">this</span>))},o}(e.Object)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)a.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},a={}.hasOwnProperty,u=[].slice,c=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};t=e.arraysAreEqual,r=e.spliceArray,o=e.getBlockConfig,n=e.getBlockAttributeNames,i=e.getListAttributeNames,e.Block=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-keyword">new</span> e.Text),<span class="hljs-literal">null</span>==n&amp;&amp;(n=[]),a.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-keyword">this</span>.text=h(t),<span class="hljs-keyword">this</span>.attributes=n}<span class="hljs-keyword">var</span> l,h,p,d,f,g,m,y,v;<span class="hljs-keyword">return</span> s(a,n),a.fromJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=e.Text.fromJSON(t.text),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(n,t.attributes)},a.prototype.isEmpty=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.text.isBlockBreak()},a.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> a.__super__.isEqualTo.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)||<span class="hljs-keyword">this</span>.text.isEqualTo(<span class="hljs-literal">null</span>!=e?e.text:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;t(<span class="hljs-keyword">this</span>.attributes,<span class="hljs-literal">null</span>!=e?e.attributes:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},a.prototype.copyWithText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(t,<span class="hljs-keyword">this</span>.attributes)},a.prototype.copyWithoutText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithText(<span class="hljs-literal">null</span>)},a.prototype.copyWithAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.text,t)},a.prototype.copyUsingObjectMap=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.copyWithText((e=t.find(<span class="hljs-keyword">this</span>.text))?e:<span class="hljs-keyword">this</span>.text.copyUsingObjectMap(t))},a.prototype.addAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.attributes.concat(d(t)),<span class="hljs-keyword">this</span>.copyWithAttributes(e)},a.prototype.removeAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=o(t).listAttribute,e=g(g(<span class="hljs-keyword">this</span>.attributes,t),n),<span class="hljs-keyword">this</span>.copyWithAttributes(e)},a.prototype.removeLastAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.removeAttribute(<span class="hljs-keyword">this</span>.getLastAttribute())},a.prototype.getLastAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> f(<span class="hljs-keyword">this</span>.attributes)},a.prototype.getAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.slice(<span class="hljs-number">0</span>)},a.prototype.getAttributeLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes.length},a.prototype.getAttributeAtLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes[t<span class="hljs-number">-1</span>]},a.prototype.hasAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getAttributeLevel()&gt;<span class="hljs-number">0</span>},a.prototype.getLastNestableAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> f(<span class="hljs-keyword">this</span>.getNestableAttributes())},a.prototype.getNestableAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.attributes,r=[],e=<span class="hljs-number">0</span>,n=i.length;n&gt;e;e++)t=i[e],o(t).nestable&amp;&amp;r.push(t);<span class="hljs-keyword">return</span> r},a.prototype.getNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getNestableAttributes().length},a.prototype.decreaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.getLastNestableAttribute())?<span class="hljs-keyword">this</span>.removeAttribute(t):<span class="hljs-keyword">this</span>},a.prototype.increaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.getLastNestableAttribute())?(n=<span class="hljs-keyword">this</span>.attributes.lastIndexOf(t),e=r.apply(<span class="hljs-literal">null</span>,[<span class="hljs-keyword">this</span>.attributes,n+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>].concat(u.call(d(t)))),<span class="hljs-keyword">this</span>.copyWithAttributes(e)):<span class="hljs-keyword">this</span>},a.prototype.getListItemAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.attributes,r=[],e=<span class="hljs-number">0</span>,n=i.length;n&gt;e;e++)t=i[e],o(t).listAttribute&amp;&amp;r.push(t);<span class="hljs-keyword">return</span> r},a.prototype.isListItem=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=o(<span class="hljs-keyword">this</span>.getLastAttribute()))?t.listAttribute:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.isTerminalBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=o(<span class="hljs-keyword">this</span>.getLastAttribute()))?t.terminal:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.breaksOnReturn=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=o(<span class="hljs-keyword">this</span>.getLastAttribute()))?t.breakOnReturn:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.findLineBreakInDirectionFromPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.toString(),n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">switch</span>(t){<span class="hljs-keyword">case</span><span class="hljs-string">"forward"</span>:<span class="hljs-keyword">return</span> o.indexOf(<span class="hljs-string">"\n"</span>,e);<span class="hljs-keyword">case</span><span class="hljs-string">"backward"</span>:<span class="hljs-keyword">return</span> o.slice(<span class="hljs-number">0</span>,e).lastIndexOf(<span class="hljs-string">"\n"</span>)}}(),<span class="hljs-number">-1</span>!==n?n:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.contentsForInspection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">text</span>:<span class="hljs-keyword">this</span>.text.inspect(),<span class="hljs-attr">attributes</span>:<span class="hljs-keyword">this</span>.attributes}},a.prototype.toString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.text.toString()},a.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">text</span>:<span class="hljs-keyword">this</span>.text,<span class="hljs-attr">attributes</span>:<span class="hljs-keyword">this</span>.attributes}},a.prototype.getLength=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.text.getLength()},a.prototype.canBeConsolidatedWith=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.hasAttributes()&amp;&amp;!t.hasAttributes()},a.prototype.consolidateWith=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> n=e.Text.textForStringWithAttributes(<span class="hljs-string">"\n"</span>),o=<span class="hljs-keyword">this</span>.getTextWithoutBlockBreak().appendText(n),<span class="hljs-keyword">this</span>.copyWithText(o.appendText(t.text))},a.prototype.splitAtOffset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===t?(e=<span class="hljs-literal">null</span>,n=<span class="hljs-keyword">this</span>):t===<span class="hljs-keyword">this</span>.getLength()?(e=<span class="hljs-keyword">this</span>,n=<span class="hljs-literal">null</span>):(e=<span class="hljs-keyword">this</span>.copyWithText(<span class="hljs-keyword">this</span>.text.getTextAtRange([<span class="hljs-number">0</span>,t])),n=<span class="hljs-keyword">this</span>.copyWithText(<span class="hljs-keyword">this</span>.text.getTextAtRange([t,<span class="hljs-keyword">this</span>.getLength()]))),[e,n]},a.prototype.getBlockBreakPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.text.getLength()<span class="hljs-number">-1</span>},a.prototype.getTextWithoutBlockBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> m(<span class="hljs-keyword">this</span>.text)?<span class="hljs-keyword">this</span>.text.getTextAtRange([<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.getBlockBreakPosition()]):<span class="hljs-keyword">this</span>.text.copy()},a.prototype.canBeGrouped=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attributes[t]},a.prototype.canBeGroupedWith=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,r,s,a;<span class="hljs-keyword">return</span> s=t.getAttributes(),r=s[e],n=<span class="hljs-keyword">this</span>.attributes[e],n===r&amp;&amp;!(o(n).group===!<span class="hljs-number">1</span>&amp;&amp;(a=s[e+<span class="hljs-number">1</span>],c.call(i(),a)&lt;<span class="hljs-number">0</span>))},h=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t=v(t),t=l(t)},v=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a;<span class="hljs-keyword">return</span> r=!<span class="hljs-number">1</span>,a=t.getPieces(),o=<span class="hljs-number">2</span>&lt;=a.length?u.call(a,<span class="hljs-number">0</span>,n=a.length<span class="hljs-number">-1</span>):(n=<span class="hljs-number">0</span>,[]),i=a[n++],<span class="hljs-literal">null</span>==i?t:(o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">for</span>(n=[],t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)s=o[t],s.isBlockBreak()?(r=!<span class="hljs-number">0</span>,n.push(y(s))):n.push(s);<span class="hljs-keyword">return</span> n}(),r?<span class="hljs-keyword">new</span> e.Text(u.call(o).concat([i])):t)},p=e.Text.textForStringWithAttributes(<span class="hljs-string">"\n"</span>,{<span class="hljs-attr">blockBreak</span>:!<span class="hljs-number">0</span>}),l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> m(t)?t:t.appendText(p)},m=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=t.getLength(),<span class="hljs-number">0</span>===n?!<span class="hljs-number">1</span>:(e=t.getTextAtRange([n<span class="hljs-number">-1</span>,n]),e.isBlockBreak())},y=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.copyWithoutAttribute(<span class="hljs-string">"blockBreak"</span>)},d=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=o(t).listAttribute,<span class="hljs-literal">null</span>!=e?[e,t]:[t]},f=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.slice(<span class="hljs-number">-1</span>)[<span class="hljs-number">0</span>]},g=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=t.lastIndexOf(e),<span class="hljs-number">-1</span>===n?t:r(t,n,<span class="hljs-number">1</span>)},a}(e.Object)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a,u,c,l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)h.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},h={}.hasOwnProperty,p=[].slice,d=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};t=e.arraysAreEqual,a=e.normalizeSpaces,r=e.makeElement,u=e.tagName,i=e.getBlockTagNames,c=e.walkTree,o=e.findClosestElementFromNode,n=e.elementContainsNode,s=e.nodeIsAttachmentElement,e.HTMLParser=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">h</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">this</span>.html=t,<span class="hljs-keyword">this</span>.referenceElement=(<span class="hljs-literal">null</span>!=e?e:{}).referenceElement,<span class="hljs-keyword">this</span>.blocks=[],<span class="hljs-keyword">this</span>.blockElements=[],<span class="hljs-keyword">this</span>.processedElements=[]}<span class="hljs-keyword">var</span> g,m,y,v,b,A,C,w,x,E,S,k,R,L,D,O;<span class="hljs-keyword">return</span> l(f,h),g=<span class="hljs-string">"style href src width height class"</span>.split(<span class="hljs-string">" "</span>),f.parse=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(t,e),n.parse(),n},f.prototype.getDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.Document.fromJSON(<span class="hljs-keyword">this</span>.blocks)},f.prototype.parse=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">try</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">this</span>.createHiddenContainer(),t=R(<span class="hljs-keyword">this</span>.html),<span class="hljs-keyword">this</span>.containerElement.innerHTML=t,e=c(<span class="hljs-keyword">this</span>.containerElement,{<span class="hljs-attr">usingFilter</span>:E});e.nextNode();)<span class="hljs-keyword">this</span>.processNode(e.currentNode);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.translateBlockElementMarginsToNewlines()}<span class="hljs-keyword">finally</span>{<span class="hljs-keyword">this</span>.removeHiddenContainer()}},f.prototype.createHiddenContainer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.referenceElement?(<span class="hljs-keyword">this</span>.containerElement=<span class="hljs-keyword">this</span>.referenceElement.cloneNode(!<span class="hljs-number">1</span>),<span class="hljs-keyword">this</span>.containerElement.removeAttribute(<span class="hljs-string">"id"</span>),<span class="hljs-keyword">this</span>.containerElement.setAttribute(<span class="hljs-string">"data-trix-internal"</span>,<span class="hljs-string">""</span>),<span class="hljs-keyword">this</span>.containerElement.style.display=<span class="hljs-string">"none"</span>,<span class="hljs-keyword">this</span>.referenceElement.parentNode.insertBefore(<span class="hljs-keyword">this</span>.containerElement,<span class="hljs-keyword">this</span>.referenceElement.nextSibling)):(<span class="hljs-keyword">this</span>.containerElement=r({<span class="hljs-attr">tagName</span>:<span class="hljs-string">"div"</span>,<span class="hljs-attr">style</span>:{<span class="hljs-attr">display</span>:<span class="hljs-string">"none"</span>}}),<span class="hljs-built_in">document</span>.body.appendChild(<span class="hljs-keyword">this</span>.containerElement))},f.prototype.removeHiddenContainer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.containerElement.parentNode.removeChild(<span class="hljs-keyword">this</span>.containerElement)},R=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s,a,u,l,h,f,m,y,v,A,C;<span class="hljs-keyword">for</span>(t=t.replace(<span class="hljs-regexp">/&lt;\/html[^&gt;]*&gt;[^]*$/i</span>,<span class="hljs-string">"&lt;/html&gt;"</span>),n=<span class="hljs-built_in">document</span>.implementation.createHTMLDocument(<span class="hljs-string">""</span>),n.documentElement.innerHTML=t,e=n.body,o=n.head,y=o.querySelectorAll(<span class="hljs-string">"style"</span>),i=<span class="hljs-number">0</span>,a=y.length;a&gt;i;i++)A=y[i],e.appendChild(A);<span class="hljs-keyword">for</span>(m=[],C=c(e);C.nextNode();)<span class="hljs-keyword">switch</span>(f=C.currentNode,f.nodeType){<span class="hljs-keyword">case</span> Node.ELEMENT_NODE:<span class="hljs-keyword">if</span>(b(f))m.push(f);<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(v=p.call(f.attributes),r=<span class="hljs-number">0</span>,u=v.length;u&gt;r;r++)h=v[r].name,d.call(g,h)&gt;=<span class="hljs-number">0</span>||<span class="hljs-number">0</span>===h.indexOf(<span class="hljs-string">"data-trix"</span>)||f.removeAttribute(h);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> Node.COMMENT_NODE:m.push(f)}<span class="hljs-keyword">for</span>(s=<span class="hljs-number">0</span>,l=m.length;l&gt;s;s++)f=m[s],f.parentNode.removeChild(f);<span class="hljs-keyword">return</span> e.innerHTML},b=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=t?t.nodeType:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)!==Node.ELEMENT_NODE||s(t)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-string">"script"</span>===u(t)||<span class="hljs-string">"false"</span>===t.getAttribute(<span class="hljs-string">"data-trix-serialize"</span>)},E=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"style"</span>===u(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},f.prototype.processNode=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">switch</span>(t.nodeType){<span class="hljs-keyword">case</span> Node.TEXT_NODE:<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.processTextNode(t);<span class="hljs-keyword">case</span> Node.ELEMENT_NODE:<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appendBlockForElement(t),<span class="hljs-keyword">this</span>.processElement(t)}},f.prototype.appendBlockForElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> o,i,r,s;<span class="hljs-keyword">if</span>(r=<span class="hljs-keyword">this</span>.isBlockElement(e),i=n(<span class="hljs-keyword">this</span>.currentBlockElement,e),r&amp;&amp;!<span class="hljs-keyword">this</span>.isBlockElement(e.firstChild)){<span class="hljs-keyword">if</span>(!(<span class="hljs-keyword">this</span>.isInsignificantTextNode(e.firstChild)&amp;&amp;<span class="hljs-keyword">this</span>.isBlockElement(e.firstElementChild)||(o=<span class="hljs-keyword">this</span>.getBlockAttributes(e),i&amp;&amp;t(o,<span class="hljs-keyword">this</span>.currentBlock.attributes))))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentBlock=<span class="hljs-keyword">this</span>.appendBlockForAttributesWithElement(o,e),<span class="hljs-keyword">this</span>.currentBlockElement=e}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.currentBlockElement&amp;&amp;!i&amp;&amp;!r)<span class="hljs-keyword">return</span>(s=<span class="hljs-keyword">this</span>.findParentBlockElement(e))?<span class="hljs-keyword">this</span>.appendBlockForElement(s):(<span class="hljs-keyword">this</span>.currentBlock=<span class="hljs-keyword">this</span>.appendEmptyBlock(),<span class="hljs-keyword">this</span>.currentBlockElement=<span class="hljs-literal">null</span>)},f.prototype.findParentBlockElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">for</span>(e=t.parentElement;e&amp;&amp;e!==<span class="hljs-keyword">this</span>.containerElement;){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.isBlockElement(e)&amp;&amp;d.call(<span class="hljs-keyword">this</span>.blockElements,e)&gt;=<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> e;e=e.parentElement}<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>},f.prototype.processTextNode=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isInsignificantTextNode(t)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(n=t.data,v(t.parentNode)||(n=L(n),D(<span class="hljs-literal">null</span>!=(e=t.previousSibling)?e.textContent:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(n=x(n))),<span class="hljs-keyword">this</span>.appendStringWithAttributes(n,<span class="hljs-keyword">this</span>.getTextAttributes(t.parentNode)))},f.prototype.processElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">if</span>(s(t))<span class="hljs-keyword">return</span> e=A(t),<span class="hljs-built_in">Object</span>.keys(e).length&amp;&amp;(i=<span class="hljs-keyword">this</span>.getTextAttributes(t),<span class="hljs-keyword">this</span>.appendAttachmentWithAttributes(e,i),t.innerHTML=<span class="hljs-string">""</span>),<span class="hljs-keyword">this</span>.processedElements.push(t);<span class="hljs-keyword">switch</span>(u(t)){<span class="hljs-keyword">case</span><span class="hljs-string">"br"</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isExtraBR(t)||<span class="hljs-keyword">this</span>.isBlockElement(t.nextSibling)||<span class="hljs-keyword">this</span>.appendStringWithAttributes(<span class="hljs-string">"\n"</span>,<span class="hljs-keyword">this</span>.getTextAttributes(t)),<span class="hljs-keyword">this</span>.processedElements.push(t);<span class="hljs-keyword">case</span><span class="hljs-string">"img"</span>:e={<span class="hljs-attr">url</span>:t.getAttribute(<span class="hljs-string">"src"</span>),<span class="hljs-attr">contentType</span>:<span class="hljs-string">"image"</span>},o=w(t);<span class="hljs-keyword">for</span>(n <span class="hljs-keyword">in</span> o)r=o[n],e[n]=r;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appendAttachmentWithAttributes(e,<span class="hljs-keyword">this</span>.getTextAttributes(t)),<span class="hljs-keyword">this</span>.processedElements.push(t);<span class="hljs-keyword">case</span><span class="hljs-string">"tr"</span>:<span class="hljs-keyword">if</span>(t.parentNode.firstChild!==t)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appendStringWithAttributes(<span class="hljs-string">"\n"</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"td"</span>:<span class="hljs-keyword">if</span>(t.parentNode.firstChild!==t)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appendStringWithAttributes(<span class="hljs-string">" | "</span>)}},f.prototype.appendBlockForAttributesWithElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockElements.push(e),n=m(t),<span class="hljs-keyword">this</span>.blocks.push(n),n},f.prototype.appendEmptyBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appendBlockForAttributesWithElement([],<span class="hljs-literal">null</span>)},f.prototype.appendStringWithAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appendPiece(k(t,e))},f.prototype.appendAttachmentWithAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.appendPiece(S(t,e))},f.prototype.appendPiece=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.blocks.length&amp;&amp;<span class="hljs-keyword">this</span>.appendEmptyBlock(),<span class="hljs-keyword">this</span>.blocks[<span class="hljs-keyword">this</span>.blocks.length<span class="hljs-number">-1</span>].text.push(t)},f.prototype.appendStringToTextAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.blocks[e].text,n=o[o.length<span class="hljs-number">-1</span>],<span class="hljs-string">"string"</span>===(<span class="hljs-literal">null</span>!=n?n.type:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?n.string+=t:o.push(k(t))},f.prototype.prependStringToTextAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.blocks[e].text,n=o[<span class="hljs-number">0</span>],<span class="hljs-string">"string"</span>===(<span class="hljs-literal">null</span>!=n?n.type:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?n.string=t+n.string:o.unshift(k(t))},k=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==e&amp;&amp;(e={}),n=<span class="hljs-string">"string"</span>,t=a(t),{<span class="hljs-attr">string</span>:t,<span class="hljs-attr">attributes</span>:e,<span class="hljs-attr">type</span>:n}},S=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==e&amp;&amp;(e={}),n=<span class="hljs-string">"attachment"</span>,{<span class="hljs-attr">attachment</span>:t,<span class="hljs-attr">attributes</span>:e,<span class="hljs-attr">type</span>:n}},m=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t={}),e=[],{<span class="hljs-attr">text</span>:e,<span class="hljs-attr">attributes</span>:t}},f.prototype.getTextAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,i,r,a,u,c,l,h,p,d,f,g,m;r={},d=e.config.textAttributes;<span class="hljs-keyword">for</span>(n <span class="hljs-keyword">in</span> d)<span class="hljs-keyword">if</span>(u=d[n],u.tagName&amp;&amp;o(t,{<span class="hljs-attr">matchingSelector</span>:u.tagName,<span class="hljs-attr">untilNode</span>:<span class="hljs-keyword">this</span>.containerElement}))r[n]=!<span class="hljs-number">0</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(u.parser&amp;&amp;(m=u.parser(t))){<span class="hljs-keyword">for</span>(i=!<span class="hljs-number">1</span>,f=<span class="hljs-keyword">this</span>.findBlockElementAncestors(t),c=<span class="hljs-number">0</span>,p=f.length;p&gt;c;c++)<span class="hljs-keyword">if</span>(a=f[c],u.parser(a)===m){i=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>}i||(r[n]=m)}<span class="hljs-keyword">if</span>(s(t)&amp;&amp;(l=t.getAttribute(<span class="hljs-string">"data-trix-attributes"</span>))){g=<span class="hljs-built_in">JSON</span>.parse(l);<span class="hljs-keyword">for</span>(h <span class="hljs-keyword">in</span> g)m=g[h],r[h]=m}<span class="hljs-keyword">return</span> r},f.prototype.getBlockAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">for</span>(o=[];t&amp;&amp;t!==<span class="hljs-keyword">this</span>.containerElement;){r=e.config.blockAttributes;<span class="hljs-keyword">for</span>(n <span class="hljs-keyword">in</span> r)i=r[n],i.parse!==!<span class="hljs-number">1</span>&amp;&amp;u(t)===i.tagName&amp;&amp;((<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> i.test?i.test(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)||!i.test)&amp;&amp;(o.push(n),i.listAttribute&amp;&amp;o.push(i.listAttribute));t=t.parentNode}<span class="hljs-keyword">return</span> o.reverse()},f.prototype.findBlockElementAncestors=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">for</span>(e=[];t&amp;&amp;t!==<span class="hljs-keyword">this</span>.containerElement;)n=u(t),d.call(i(),n)&gt;=<span class="hljs-number">0</span>&amp;&amp;e.push(t),t=t.parentNode;<span class="hljs-keyword">return</span> e},A=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(t.getAttribute(<span class="hljs-string">"data-trix-attachment"</span>))},w=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=t.getAttribute(<span class="hljs-string">"width"</span>),n=t.getAttribute(<span class="hljs-string">"height"</span>),e={},o&amp;&amp;(e.width=<span class="hljs-built_in">parseInt</span>(o,<span class="hljs-number">10</span>)),n&amp;&amp;(e.height=<span class="hljs-built_in">parseInt</span>(n,<span class="hljs-number">10</span>)),e},f.prototype.isBlockElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">if</span>((<span class="hljs-literal">null</span>!=t?t.nodeType:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===Node.ELEMENT_NODE&amp;&amp;!o(t,{<span class="hljs-attr">matchingSelector</span>:<span class="hljs-string">"td"</span>,<span class="hljs-attr">untilNode</span>:<span class="hljs-keyword">this</span>.containerElement}))<span class="hljs-keyword">return</span> e=u(t),d.call(i(),e)&gt;=<span class="hljs-number">0</span>||<span class="hljs-string">"block"</span>===<span class="hljs-built_in">window</span>.getComputedStyle(t).display},f.prototype.isInsignificantTextNode=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=t?t.nodeType:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===Node.TEXT_NODE&amp;&amp;O(t.data)&amp;&amp;!v(t.parentNode)?!t.previousSibling||<span class="hljs-keyword">this</span>.isBlockElement(t.previousSibling)||!t.nextSibling||<span class="hljs-keyword">this</span>.isBlockElement(t.nextSibling):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},f.prototype.isExtraBR=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"br"</span>===u(t)&amp;&amp;<span class="hljs-keyword">this</span>.isBlockElement(t.parentNode)&amp;&amp;t.parentNode.lastChild===t},v=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-built_in">window</span>.getComputedStyle(t).whiteSpace,<span class="hljs-string">"pre"</span>===e||<span class="hljs-string">"pre-wrap"</span>===e||<span class="hljs-string">"pre-line"</span>===e},f.prototype.translateBlockElementMarginsToNewlines=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r,s,a;<span class="hljs-keyword">for</span>(e=<span class="hljs-keyword">this</span>.getMarginOfDefaultBlockElement(),s=<span class="hljs-keyword">this</span>.blocks,a=[],o=n=<span class="hljs-number">0</span>,i=s.length;i&gt;n;o=++n)t=s[o],(r=<span class="hljs-keyword">this</span>.getMarginOfBlockElementAtIndex(o))&amp;&amp;(r.top&gt;<span class="hljs-number">2</span>*e.top&amp;&amp;<span class="hljs-keyword">this</span>.prependStringToTextAtIndex(<span class="hljs-string">"\n"</span>,o),a.push(r.bottom&gt;<span class="hljs-number">2</span>*e.bottom?<span class="hljs-keyword">this</span>.appendStringToTextAtIndex(<span class="hljs-string">"\n"</span>,o):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>));<span class="hljs-keyword">return</span> a},f.prototype.getMarginOfBlockElementAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span>!(e=<span class="hljs-keyword">this</span>.blockElements[t])||(n=u(e),d.call(i(),n)&gt;=<span class="hljs-number">0</span>||d.call(<span class="hljs-keyword">this</span>.processedElements,e)&gt;=<span class="hljs-number">0</span>)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:C(e)},f.prototype.getMarginOfDefaultBlockElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=r(e.config.blockAttributes[<span class="hljs-string">"default"</span>].tagName),<span class="hljs-keyword">this</span>.containerElement.appendChild(t),C(t)},C=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-built_in">window</span>.getComputedStyle(t),<span class="hljs-string">"block"</span>===e.display?{<span class="hljs-attr">top</span>:<span class="hljs-built_in">parseInt</span>(e.marginTop),<span class="hljs-attr">bottom</span>:<span class="hljs-built_in">parseInt</span>(e.marginBottom)}:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},y=<span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"[^\\S"</span>+e.NON_BREAKING_SPACE+<span class="hljs-string">"]"</span>),L=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.replace(<span class="hljs-built_in">RegExp</span>(<span class="hljs-string">""</span>+y.source,<span class="hljs-string">"g"</span>),<span class="hljs-string">" "</span>).replace(<span class="hljs-regexp">/\ {2,}/g</span>,<span class="hljs-string">" "</span>)},x=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.replace(<span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"^"</span>+y.source+<span class="hljs-string">"+"</span>),<span class="hljs-string">""</span>)},O=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"^"</span>+y.source+<span class="hljs-string">"*$"</span>).test(t)},D=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-regexp">/\s$/</span>.test(t)},f}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)s.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].slice,u=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};t=e.arraysAreEqual,o=e.normalizeRange,i=e.rangeIsCollapsed,n=e.getBlockConfig,e.Document=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),c.__super__.constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>),<span class="hljs-number">0</span>===t.length&amp;&amp;(t=[<span class="hljs-keyword">new</span> e.Block]),<span class="hljs-keyword">this</span>.blockList=e.SplittableList.box(t)}<span class="hljs-keyword">var</span> l;<span class="hljs-keyword">return</span> r(c,s),c.fromJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o,i,r;<span class="hljs-keyword">for</span>(r=[],o=<span class="hljs-number">0</span>,i=t.length;i&gt;o;o++)n=t[o],r.push(e.Block.fromJSON(n));<span class="hljs-keyword">return</span> r}(),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>(o)},c.fromHTML=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">return</span> e.HTMLParser.parse(t,n).getDocument()},c.fromString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o=e.Text.textForStringWithAttributes(t,n),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>([<span class="hljs-keyword">new</span> e.Block(o)])},c.prototype.isEmpty=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>===<span class="hljs-keyword">this</span>.blockList.length&amp;&amp;(t=<span class="hljs-keyword">this</span>.getBlockAtIndex(<span class="hljs-number">0</span>),t.isEmpty()&amp;&amp;!t.hasAttributes())},c.prototype.copy=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t={}),e=t.consolidateBlocks?<span class="hljs-keyword">this</span>.blockList.consolidate().toArray():<span class="hljs-keyword">this</span>.blockList.toArray(),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(e)},c.prototype.copyUsingObjectsFromDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">new</span> e.ObjectMap(t.getObjects()),<span class="hljs-keyword">this</span>.copyUsingObjectMap(n)},c.prototype.copyUsingObjectMap=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,i,r,s;<span class="hljs-keyword">for</span>(r=<span class="hljs-keyword">this</span>.getBlocks(),s=[],n=<span class="hljs-number">0</span>,i=r.length;i&gt;n;n++)e=r[n],s.push((o=t.find(e))?o:e.copyUsingObjectMap(t));<span class="hljs-keyword">return</span> s}.call(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n)},c.prototype.copyWithBaseBlockAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> o,i,r,s;<span class="hljs-keyword">for</span>(r=<span class="hljs-keyword">this</span>.getBlocks(),s=[],o=<span class="hljs-number">0</span>,i=r.length;i&gt;o;o++)n=r[o],e=t.concat(n.getAttributes()),s.push(n.copyWithAttributes(e));<span class="hljs-keyword">return</span> s}.call(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(o)},c.prototype.replaceBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.blockList.indexOf(t),<span class="hljs-number">-1</span>===n?<span class="hljs-keyword">this</span>:<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.blockList.replaceObjectAtIndex(e,n))},c.prototype.insertDocumentAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,r,s,a,u,c,l;<span class="hljs-keyword">return</span> r=t.blockList,u=(e=o(e))[<span class="hljs-number">0</span>],c=<span class="hljs-keyword">this</span>.locationFromPosition(u),s=c.index,a=c.offset,l=<span class="hljs-keyword">this</span>,n=<span class="hljs-keyword">this</span>.getBlockAtPosition(u),i(e)&amp;&amp;n.isEmpty()&amp;&amp;!n.hasAttributes()?l=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(l.blockList.removeObjectAtIndex(s)):n.getBlockBreakPosition()===a&amp;&amp;u++,l=l.removeTextAtRange(e),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(l.blockList.insertSplittableListAtPosition(r,u))},c.prototype.mergeDocumentAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">var</span> i,r,s,a,u,c,l,h,p,d,f,g;<span class="hljs-keyword">return</span> f=(n=o(n))[<span class="hljs-number">0</span>],d=<span class="hljs-keyword">this</span>.locationFromPosition(f),r=<span class="hljs-keyword">this</span>.getBlockAtIndex(d.index).getAttributes(),i=e.getBaseBlockAttributes(),g=r.slice(-i.length),t(i,g)?(l=r.slice(<span class="hljs-number">0</span>,-i.length),c=e.copyWithBaseBlockAttributes(l)):c=e.copy({<span class="hljs-attr">consolidateBlocks</span>:!<span class="hljs-number">0</span>}).copyWithBaseBlockAttributes(r),s=c.getBlockCount(),a=c.getBlockAtIndex(<span class="hljs-number">0</span>),t(r,a.getAttributes())?(u=a.getTextWithoutBlockBreak(),p=<span class="hljs-keyword">this</span>.insertTextAtRange(u,n),s&gt;<span class="hljs-number">1</span>&amp;&amp;(c=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(c.getBlocks().slice(<span class="hljs-number">1</span>)),h=f+u.getLength(),p=p.insertDocumentAtRange(c,h))):p=<span class="hljs-keyword">this</span>.insertDocumentAtRange(c,n),p
},c.prototype.insertTextAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,i,r,s,a;<span class="hljs-keyword">return</span> a=(e=o(e))[<span class="hljs-number">0</span>],s=<span class="hljs-keyword">this</span>.locationFromPosition(a),i=s.index,r=s.offset,n=<span class="hljs-keyword">this</span>.removeTextAtRange(e),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n.blockList.editObjectAtIndex(i,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> e.copyWithText(e.text.insertTextAtPosition(t,r))}))},c.prototype.removeTextAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,r,s,a,u,c,l,h,p,d,f,g,m,y,v,b,A,C,w,x;<span class="hljs-keyword">return</span> p=t=o(t),l=p[<span class="hljs-number">0</span>],A=p[<span class="hljs-number">1</span>],i(t)?<span class="hljs-keyword">this</span>:(d=<span class="hljs-keyword">this</span>.locationRangeFromRange(t),u=d[<span class="hljs-number">0</span>],v=d[<span class="hljs-number">1</span>],a=u.index,c=u.offset,s=<span class="hljs-keyword">this</span>.getBlockAtIndex(a),y=v.index,b=v.offset,m=<span class="hljs-keyword">this</span>.getBlockAtIndex(y),f=A-l===<span class="hljs-number">1</span>&amp;&amp;s.getBlockBreakPosition()===c&amp;&amp;m.getBlockBreakPosition()!==b&amp;&amp;<span class="hljs-string">"\n"</span>===m.text.getStringAtPosition(b),f?r=<span class="hljs-keyword">this</span>.blockList.editObjectAtIndex(y,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.copyWithText(t.text.removeTextAtRange([b,b+<span class="hljs-number">1</span>]))}):(h=s.text.getTextAtRange([<span class="hljs-number">0</span>,c]),C=m.text.getTextAtRange([b,m.getLength()]),w=h.appendText(C),g=a!==y&amp;&amp;<span class="hljs-number">0</span>===c,x=g&amp;&amp;s.getAttributeLevel()&gt;=m.getAttributeLevel(),n=x?m.copyWithText(w):s.copyWithText(w),e=y+<span class="hljs-number">1</span>-a,r=<span class="hljs-keyword">this</span>.blockList.splice(a,e,n)),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(r))},c.prototype.moveTextFromRangeToPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,i,r,s,u,c,l,h,p,d;<span class="hljs-keyword">if</span>(c=t=o(t),p=c[<span class="hljs-number">0</span>],r=c[<span class="hljs-number">1</span>],e&gt;=p&amp;&amp;r&gt;=e)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">if</span>(i=<span class="hljs-keyword">this</span>.getDocumentAtRange(t),h=<span class="hljs-keyword">this</span>.removeTextAtRange(t),u=e&gt;p,u&amp;&amp;(e-=i.getLength()),!h.firstBlockInRangeIsEntirelySelected(t)){<span class="hljs-keyword">if</span>(l=i.getBlocks(),s=l[<span class="hljs-number">0</span>],n=<span class="hljs-number">2</span>&lt;=l.length?a.call(l,<span class="hljs-number">1</span>):[],<span class="hljs-number">0</span>===n.length?(d=s.getTextWithoutBlockBreak(),u&amp;&amp;(e+=<span class="hljs-number">1</span>)):d=s.text,h=h.insertTextAtRange(d,e),<span class="hljs-number">0</span>===n.length)<span class="hljs-keyword">return</span> h;i=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n),e+=d.getLength()}<span class="hljs-keyword">return</span> h.insertDocumentAtRange(i,e)},c.prototype.addAttributeAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e,o</span>)</span>{<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">return</span> i=<span class="hljs-keyword">this</span>.blockList,<span class="hljs-keyword">this</span>.eachBlockAtRange(o,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o,r,s</span>)</span>{<span class="hljs-keyword">return</span> i=i.editObjectAtIndex(s,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> n(t)?o.addAttribute(t,e):r[<span class="hljs-number">0</span>]===r[<span class="hljs-number">1</span>]?o:o.copyWithText(o.text.addAttributeAtRange(t,e,r))})}),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(i)},c.prototype.addAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.blockList,<span class="hljs-keyword">this</span>.eachBlock(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o,i</span>)</span>{<span class="hljs-keyword">return</span> n=n.editObjectAtIndex(i,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> o.addAttribute(t,e)})}),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(n)},c.prototype.removeAttributeAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.blockList,<span class="hljs-keyword">this</span>.eachBlockAtRange(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,i,r</span>)</span>{<span class="hljs-keyword">return</span> n(t)?o=o.editObjectAtIndex(r,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.removeAttribute(t)}):i[<span class="hljs-number">0</span>]!==i[<span class="hljs-number">1</span>]?o=o.editObjectAtIndex(r,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.copyWithText(e.text.removeAttributeAtRange(t,i))}):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(o)},c.prototype.updateAttributesForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">return</span> i=(o=<span class="hljs-keyword">this</span>.getRangeOfAttachment(e))[<span class="hljs-number">0</span>],n=<span class="hljs-keyword">this</span>.locationFromPosition(i).index,r=<span class="hljs-keyword">this</span>.getTextAtIndex(n),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.blockList.editObjectAtIndex(n,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">return</span> n.copyWithText(r.updateAttributesForAttachment(t,e))}))},c.prototype.removeAttributeForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.getRangeOfAttachment(e),<span class="hljs-keyword">this</span>.removeAttributeAtRange(t,n)},c.prototype.insertBlockBreakAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,i,r,s;<span class="hljs-keyword">return</span> s=(t=o(t))[<span class="hljs-number">0</span>],r=<span class="hljs-keyword">this</span>.locationFromPosition(s).offset,i=<span class="hljs-keyword">this</span>.removeTextAtRange(t),<span class="hljs-number">0</span>===r&amp;&amp;(n=[<span class="hljs-keyword">new</span> e.Block]),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(i.blockList.insertSplittableListAtPosition(<span class="hljs-keyword">new</span> e.SplittableList(n),s))},c.prototype.applyBlockAttributeAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e,o</span>)</span>{<span class="hljs-keyword">var</span> i,r,s,a;<span class="hljs-keyword">return</span> s=<span class="hljs-keyword">this</span>.expandRangeToLineBreaksAndSplitBlocks(o),r=s.document,o=s.range,i=n(t),i.listAttribute?(r=r.removeLastListAttributeAtRange(o,{<span class="hljs-attr">exceptAttributeName</span>:t}),a=r.convertLineBreaksToBlockBreaksInRange(o),r=a.document,o=a.range):r=i.terminal?r.removeLastTerminalAttributeAtRange(o):r.consolidateBlocksAtRange(o),r.addAttributeAtRange(t,e,o)},c.prototype.removeLastListAttributeAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==e&amp;&amp;(e={}),o=<span class="hljs-keyword">this</span>.blockList,<span class="hljs-keyword">this</span>.eachBlockAtRange(t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,i,r</span>)</span>{<span class="hljs-keyword">var</span> s;<span class="hljs-keyword">if</span>((s=t.getLastAttribute())&amp;&amp;n(s).listAttribute&amp;&amp;s!==e.exceptAttributeName)<span class="hljs-keyword">return</span> o=o.editObjectAtIndex(r,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.removeAttribute(s)})}),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(o)},c.prototype.removeLastTerminalAttributeAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.blockList,<span class="hljs-keyword">this</span>.eachBlockAtRange(t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,o,i</span>)</span>{<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">if</span>((r=t.getLastAttribute())&amp;&amp;n(r).terminal)<span class="hljs-keyword">return</span> e=e.editObjectAtIndex(i,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.removeAttribute(r)})}),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(e)},c.prototype.firstBlockInRangeIsEntirelySelected=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r,s,a;<span class="hljs-keyword">return</span> r=t=o(t),a=r[<span class="hljs-number">0</span>],e=r[<span class="hljs-number">1</span>],n=<span class="hljs-keyword">this</span>.locationFromPosition(a),s=<span class="hljs-keyword">this</span>.locationFromPosition(e),<span class="hljs-number">0</span>===n.offset&amp;&amp;n.index&lt;s.index?!<span class="hljs-number">0</span>:n.index===s.index?(i=<span class="hljs-keyword">this</span>.getBlockAtIndex(n.index).getLength(),<span class="hljs-number">0</span>===n.offset&amp;&amp;s.offset===i):!<span class="hljs-number">1</span>},c.prototype.expandRangeToLineBreaksAndSplitBlocks=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r,s,a,u,c,l;<span class="hljs-keyword">return</span> a=t=o(t),l=a[<span class="hljs-number">0</span>],r=a[<span class="hljs-number">1</span>],c=<span class="hljs-keyword">this</span>.locationFromPosition(l),i=<span class="hljs-keyword">this</span>.locationFromPosition(r),e=<span class="hljs-keyword">this</span>,u=e.getBlockAtIndex(c.index),<span class="hljs-literal">null</span>!=(c.offset=u.findLineBreakInDirectionFromPosition(<span class="hljs-string">"backward"</span>,c.offset))&amp;&amp;(s=e.positionFromLocation(c),e=e.insertBlockBreakAtRange([s,s+<span class="hljs-number">1</span>]),i.index+=<span class="hljs-number">1</span>,i.offset-=e.getBlockAtIndex(c.index).getLength(),c.index+=<span class="hljs-number">1</span>),c.offset=<span class="hljs-number">0</span>,<span class="hljs-number">0</span>===i.offset&amp;&amp;i.index&gt;c.index?(i.index-=<span class="hljs-number">1</span>,i.offset=e.getBlockAtIndex(i.index).getBlockBreakPosition()):(n=e.getBlockAtIndex(i.index),<span class="hljs-string">"\n"</span>===n.text.getStringAtRange([i.offset<span class="hljs-number">-1</span>,i.offset])?i.offset-=<span class="hljs-number">1</span>:i.offset=n.findLineBreakInDirectionFromPosition(<span class="hljs-string">"forward"</span>,i.offset),i.offset!==n.getBlockBreakPosition()&amp;&amp;(s=e.positionFromLocation(i),e=e.insertBlockBreakAtRange([s,s+<span class="hljs-number">1</span>]))),l=e.positionFromLocation(c),r=e.positionFromLocation(i),t=o([l,r]),{<span class="hljs-attr">document</span>:e,<span class="hljs-attr">range</span>:t}},c.prototype.convertLineBreaksToBlockBreaksInRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i;<span class="hljs-keyword">return</span> n=(t=o(t))[<span class="hljs-number">0</span>],i=<span class="hljs-keyword">this</span>.getStringAtRange(t).slice(<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>),e=<span class="hljs-keyword">this</span>,i.replace(<span class="hljs-regexp">/.*?\n/g</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> n+=t.length,e=e.insertBlockBreakAtRange([n<span class="hljs-number">-1</span>,n])}),{<span class="hljs-attr">document</span>:e,<span class="hljs-attr">range</span>:t}},c.prototype.consolidateBlocksAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r,s;<span class="hljs-keyword">return</span> i=t=o(t),s=i[<span class="hljs-number">0</span>],n=i[<span class="hljs-number">1</span>],r=<span class="hljs-keyword">this</span>.locationFromPosition(s).index,e=<span class="hljs-keyword">this</span>.locationFromPosition(n).index,<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.blockList.consolidateFromIndexToIndex(r,e))},c.prototype.getDocumentAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> t=o(t),e=<span class="hljs-keyword">this</span>.blockList.getSplittableListInRange(t).toArray(),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(e)},c.prototype.getStringAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getDocumentAtRange(t).toString()},c.prototype.getBlockAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.getObjectAtIndex(t)},c.prototype.getBlockAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.locationFromPosition(t).index,<span class="hljs-keyword">this</span>.getBlockAtIndex(e)},c.prototype.getTextAtIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.getBlockAtIndex(t))?e.text:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},c.prototype.getTextAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.locationFromPosition(t).index,<span class="hljs-keyword">this</span>.getTextAtIndex(e)},c.prototype.getPieceAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.locationFromPosition(t),e=o.index,n=o.offset,<span class="hljs-keyword">this</span>.getTextAtIndex(e).getPieceAtPosition(n)},c.prototype.getCharacterAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.locationFromPosition(t),e=o.index,n=o.offset,<span class="hljs-keyword">this</span>.getTextAtIndex(e).getStringAtRange([n,n+<span class="hljs-number">1</span>])},c.prototype.getLength=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.getEndPosition()},c.prototype.getBlocks=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.toArray()},c.prototype.getBlockCount=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.length},c.prototype.getEditCount=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editCount},c.prototype.eachBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.eachObject(t)},c.prototype.eachBlockAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,i,r,s,a,u,c,l,h,p,d,f;<span class="hljs-keyword">if</span>(u=t=o(t),d=u[<span class="hljs-number">0</span>],r=u[<span class="hljs-number">1</span>],p=<span class="hljs-keyword">this</span>.locationFromPosition(d),i=<span class="hljs-keyword">this</span>.locationFromPosition(r),p.index===i.index)<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.getBlockAtIndex(p.index),f=[p.offset,i.offset],e(n,f,p.index);<span class="hljs-keyword">for</span>(h=[],a=s=c=p.index,l=i.index;l&gt;=c?l&gt;=s:s&gt;=l;a=l&gt;=c?++s:--s)(n=<span class="hljs-keyword">this</span>.getBlockAtIndex(a))?(f=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">switch</span>(a){<span class="hljs-keyword">case</span> p.index:<span class="hljs-keyword">return</span>[p.offset,n.text.getLength()];<span class="hljs-keyword">case</span> i.index:<span class="hljs-keyword">return</span>[<span class="hljs-number">0</span>,i.offset];<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span>[<span class="hljs-number">0</span>,n.text.getLength()]}}(),h.push(e(n,f,a))):h.push(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> h},c.prototype.getCommonAttributesAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,r,s;<span class="hljs-keyword">return</span> r=(t=o(t))[<span class="hljs-number">0</span>],i(t)?<span class="hljs-keyword">this</span>.getCommonAttributesAtPosition(r):(s=[],n=[],<span class="hljs-keyword">this</span>.eachBlockAtRange(t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> e[<span class="hljs-number">0</span>]!==e[<span class="hljs-number">1</span>]?(s.push(t.text.getCommonAttributesAtRange(e)),n.push(l(t))):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}),e.Hash.fromCommonAttributesOfObjects(s).merge(e.Hash.fromCommonAttributesOfObjects(n)).toObject())},c.prototype.getCommonAttributesAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s,a,c,h,p,d;<span class="hljs-keyword">if</span>(p=<span class="hljs-keyword">this</span>.locationFromPosition(t),s=p.index,h=p.offset,i=<span class="hljs-keyword">this</span>.getBlockAtIndex(s),!i)<span class="hljs-keyword">return</span>{};r=l(i),n=i.text.getAttributesAtPosition(h),o=i.text.getAttributesAtPosition(h<span class="hljs-number">-1</span>),a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;t=e.config.textAttributes,n=[];<span class="hljs-keyword">for</span>(c <span class="hljs-keyword">in</span> t)d=t[c],d.inheritable&amp;&amp;n.push(c);<span class="hljs-keyword">return</span> n}();<span class="hljs-keyword">for</span>(c <span class="hljs-keyword">in</span> o)d=o[c],(d===n[c]||u.call(a,c)&gt;=<span class="hljs-number">0</span>)&amp;&amp;(r[c]=d);<span class="hljs-keyword">return</span> r},c.prototype.getRangeOfCommonAttributeAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,i,r,s,a,u,c,l,h;<span class="hljs-keyword">return</span> a=<span class="hljs-keyword">this</span>.locationFromPosition(e),r=a.index,s=a.offset,h=<span class="hljs-keyword">this</span>.getTextAtIndex(r),u=h.getExpandedRangeForAttributeAtOffset(t,s),l=u[<span class="hljs-number">0</span>],i=u[<span class="hljs-number">1</span>],c=<span class="hljs-keyword">this</span>.positionFromLocation({<span class="hljs-attr">index</span>:r,<span class="hljs-attr">offset</span>:l}),n=<span class="hljs-keyword">this</span>.positionFromLocation({<span class="hljs-attr">index</span>:r,<span class="hljs-attr">offset</span>:i}),o([c,n])},c.prototype.getBaseBlockAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r,s;<span class="hljs-keyword">for</span>(t=<span class="hljs-keyword">this</span>.getBlockAtIndex(<span class="hljs-number">0</span>).getAttributes(),n=o=<span class="hljs-number">1</span>,s=<span class="hljs-keyword">this</span>.getBlockCount();s&gt;=<span class="hljs-number">1</span>?s&gt;o:o&gt;s;n=s&gt;=<span class="hljs-number">1</span>?++o:--o)e=<span class="hljs-keyword">this</span>.getBlockAtIndex(n).getAttributes(),r=<span class="hljs-built_in">Math</span>.min(t.length,e.length),t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,o,s;<span class="hljs-keyword">for</span>(s=[],i=n=<span class="hljs-number">0</span>,o=r;(o&gt;=<span class="hljs-number">0</span>?o&gt;n:n&gt;o)&amp;&amp;e[i]===t[i];i=o&gt;=<span class="hljs-number">0</span>?++n:--n)s.push(e[i]);<span class="hljs-keyword">return</span> s}();<span class="hljs-keyword">return</span> t},l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n={},(e=t.getLastAttribute())&amp;&amp;(n[e]=!<span class="hljs-number">0</span>),n},c.prototype.getAttachmentById=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.getAttachments(),n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)<span class="hljs-keyword">if</span>(e=i[n],e.id===t)<span class="hljs-keyword">return</span> e},c.prototype.getAttachmentPieces=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=[],<span class="hljs-keyword">this</span>.blockList.eachObject(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=e.text,t=t.concat(n.getAttachmentPieces())}),t},c.prototype.getAttachments=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.getAttachmentPieces(),i=[],t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)n=o[t],i.push(n.attachment);<span class="hljs-keyword">return</span> i},c.prototype.getRangeOfAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r,s,a,u;<span class="hljs-keyword">for</span>(r=<span class="hljs-number">0</span>,s=<span class="hljs-keyword">this</span>.blockList.toArray(),n=e=<span class="hljs-number">0</span>,i=s.length;i&gt;e;n=++e){<span class="hljs-keyword">if</span>(a=s[n].text,u=a.getRangeOfAttachment(t))<span class="hljs-keyword">return</span> o([r+u[<span class="hljs-number">0</span>],r+u[<span class="hljs-number">1</span>]]);r+=a.getLength()}},c.prototype.getLocationRangeOfAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getRangeOfAttachment(t),<span class="hljs-keyword">this</span>.locationRangeFromRange(e)},c.prototype.getAttachmentPieceForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.getAttachmentPieces(),e=<span class="hljs-number">0</span>,n=i.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(o=i[e],o.attachment===t)<span class="hljs-keyword">return</span> o},c.prototype.locationFromPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.blockList.findIndexAndOffsetAtPosition(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>,t)),<span class="hljs-literal">null</span>!=n.index?n:(e=<span class="hljs-keyword">this</span>.getBlocks(),{<span class="hljs-attr">index</span>:e.length<span class="hljs-number">-1</span>,<span class="hljs-attr">offset</span>:e[e.length<span class="hljs-number">-1</span>].getLength()})},c.prototype.positionFromLocation=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},c.prototype.locationRangeFromPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> o(<span class="hljs-keyword">this</span>.locationFromPosition(t))},c.prototype.locationRangeFromRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r;<span class="hljs-keyword">if</span>(t=o(t))<span class="hljs-keyword">return</span> r=t[<span class="hljs-number">0</span>],n=t[<span class="hljs-number">1</span>],i=<span class="hljs-keyword">this</span>.locationFromPosition(r),e=<span class="hljs-keyword">this</span>.locationFromPosition(n),o([i,e])},c.prototype.rangeFromLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> t=o(t),e=<span class="hljs-keyword">this</span>.positionFromLocation(t[<span class="hljs-number">0</span>]),i(t)||(n=<span class="hljs-keyword">this</span>.positionFromLocation(t[<span class="hljs-number">1</span>])),o([e,n])},c.prototype.isEqualTo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.isEqualTo(<span class="hljs-literal">null</span>!=t?t.blockList:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},c.prototype.getTexts=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.getBlocks(),i=[],e=<span class="hljs-number">0</span>,n=o.length;n&gt;e;e++)t=o[e],i.push(t.text);<span class="hljs-keyword">return</span> i},c.prototype.getPieces=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(n=[],o=<span class="hljs-keyword">this</span>.getTexts(),t=<span class="hljs-number">0</span>,e=o.length;e&gt;t;t++)i=o[t],n.push.apply(n,i.getPieces());<span class="hljs-keyword">return</span> n},c.prototype.getObjects=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getBlocks().concat(<span class="hljs-keyword">this</span>.getTexts()).concat(<span class="hljs-keyword">this</span>.getPieces())},c.prototype.toSerializableDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=[],<span class="hljs-keyword">this</span>.blockList.eachObject(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> t.push(e.copyWithText(e.text.toSerializableText()))}),<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(t)},c.prototype.toString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.toString()},c.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.blockList.toJSON()},c.prototype.toConsole=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">for</span>(o=<span class="hljs-keyword">this</span>.blockList.toArray(),i=[],e=<span class="hljs-number">0</span>,n=o.length;n&gt;e;e++)t=o[e],i.push(<span class="hljs-built_in">JSON</span>.parse(t.text.toConsole()));<span class="hljs-keyword">return</span> i}.call(<span class="hljs-keyword">this</span>))},c}(e.Object)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.LineBreakInsertion=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">t</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">this</span>.composition=t,<span class="hljs-keyword">this</span>.document=<span class="hljs-keyword">this</span>.composition.document,e=<span class="hljs-keyword">this</span>.composition.getSelectedRange(),<span class="hljs-keyword">this</span>.startPosition=e[<span class="hljs-number">0</span>],<span class="hljs-keyword">this</span>.endPosition=e[<span class="hljs-number">1</span>],<span class="hljs-keyword">this</span>.startLocation=<span class="hljs-keyword">this</span>.document.locationFromPosition(<span class="hljs-keyword">this</span>.startPosition),<span class="hljs-keyword">this</span>.endLocation=<span class="hljs-keyword">this</span>.document.locationFromPosition(<span class="hljs-keyword">this</span>.endPosition),<span class="hljs-keyword">this</span>.block=<span class="hljs-keyword">this</span>.document.getBlockAtIndex(<span class="hljs-keyword">this</span>.endLocation.index),<span class="hljs-keyword">this</span>.breaksOnReturn=<span class="hljs-keyword">this</span>.block.breaksOnReturn(),<span class="hljs-keyword">this</span>.previousCharacter=<span class="hljs-keyword">this</span>.block.text.getStringAtPosition(<span class="hljs-keyword">this</span>.endLocation.offset<span class="hljs-number">-1</span>),<span class="hljs-keyword">this</span>.nextCharacter=<span class="hljs-keyword">this</span>.block.text.getStringAtPosition(<span class="hljs-keyword">this</span>.endLocation.offset)}<span class="hljs-keyword">return</span> t.prototype.shouldInsertBlockBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.block.hasAttributes()&amp;&amp;<span class="hljs-keyword">this</span>.block.isListItem()&amp;&amp;!<span class="hljs-keyword">this</span>.block.isEmpty()?<span class="hljs-number">0</span>!==<span class="hljs-keyword">this</span>.startLocation.offset:<span class="hljs-keyword">this</span>.breaksOnReturn&amp;&amp;<span class="hljs-string">"\n"</span>!==<span class="hljs-keyword">this</span>.nextCharacter},t.prototype.shouldBreakFormattedBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.block.hasAttributes()&amp;&amp;!<span class="hljs-keyword">this</span>.block.isListItem()&amp;&amp;(<span class="hljs-keyword">this</span>.breaksOnReturn&amp;&amp;<span class="hljs-string">"\n"</span>===<span class="hljs-keyword">this</span>.nextCharacter||<span class="hljs-string">"\n"</span>===<span class="hljs-keyword">this</span>.previousCharacter)},t.prototype.shouldDecreaseListLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.block.hasAttributes()&amp;&amp;<span class="hljs-keyword">this</span>.block.isListItem()&amp;&amp;<span class="hljs-keyword">this</span>.block.isEmpty()},t.prototype.shouldPrependListItem=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.block.isListItem()&amp;&amp;<span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.startLocation.offset&amp;&amp;!<span class="hljs-keyword">this</span>.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.block.hasAttributes()&amp;&amp;!<span class="hljs-keyword">this</span>.block.isListItem()&amp;&amp;<span class="hljs-keyword">this</span>.block.isEmpty()},t}()}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a,u,c,l,h=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)p.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=e.normalizeRange,c=e.rangesAreEqual,u=e.rangeIsCollapsed,a=e.objectsAreEqual,t=e.arrayStartsWith,l=e.summarizeArrayChange,o=e.getAllAttributeNames,i=e.getBlockConfig,r=e.getTextConfig,n=e.extend,e.Composition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">d</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.document=<span class="hljs-keyword">new</span> e.Document,<span class="hljs-keyword">this</span>.attachments=[],<span class="hljs-keyword">this</span>.currentAttributes={},<span class="hljs-keyword">this</span>.revision=<span class="hljs-number">0</span>}<span class="hljs-keyword">var</span> f;<span class="hljs-keyword">return</span> h(d,p),d.prototype.setDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> t.isEqualTo(<span class="hljs-keyword">this</span>.document)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.document=t,<span class="hljs-keyword">this</span>.refreshAttachments(),<span class="hljs-keyword">this</span>.revision++,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},d.prototype.getSnapshot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">document</span>:<span class="hljs-keyword">this</span>.document,<span class="hljs-attr">selectedRange</span>:<span class="hljs-keyword">this</span>.getSelectedRange()}},d.prototype.loadSnapshot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">return</span> n=t.document,r=t.selectedRange,<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> o.compositionWillLoadSnapshot&amp;&amp;o.compositionWillLoadSnapshot(),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-literal">null</span>!=n?n:<span class="hljs-keyword">new</span> e.Document),<span class="hljs-keyword">this</span>.setSelection(<span class="hljs-literal">null</span>!=r?r:[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]),<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> i.compositionDidLoadSnapshot?i.compositionDidLoadSnapshot():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.insertText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">return</span> r=(<span class="hljs-literal">null</span>!=e?e:{<span class="hljs-attr">updatePosition</span>:!<span class="hljs-number">0</span>}).updatePosition,o=<span class="hljs-keyword">this</span>.getSelectedRange(),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.insertTextAtRange(t,o)),i=o[<span class="hljs-number">0</span>],n=i+t.getLength(),r&amp;&amp;<span class="hljs-keyword">this</span>.setSelection(n),<span class="hljs-keyword">this</span>.notifyDelegateOfInsertionAtRange([i,n])},d.prototype.insertBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-keyword">new</span> e.Block),n=<span class="hljs-keyword">new</span> e.Document([t]),<span class="hljs-keyword">this</span>.insertDocument(n)},d.prototype.insertDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-keyword">new</span> e.Document),o=<span class="hljs-keyword">this</span>.getSelectedRange(),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.insertDocumentAtRange(t,o)),i=o[<span class="hljs-number">0</span>],n=i+t.getLength(),<span class="hljs-keyword">this</span>.setSelection(n),<span class="hljs-keyword">this</span>.notifyDelegateOfInsertionAtRange([i,n])},d.prototype.insertString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o,i;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.getCurrentTextAttributes(),i=e.Text.textForStringWithAttributes(t,o),<span class="hljs-keyword">this</span>.insertText(i,n)},d.prototype.insertBlockBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getSelectedRange(),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.insertBlockBreakAtRange(e)),n=e[<span class="hljs-number">0</span>],t=n+<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.setSelection(t),<span class="hljs-keyword">this</span>.notifyDelegateOfInsertionAtRange([n,t])},d.prototype.insertLineBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">new</span> e.LineBreakInsertion(<span class="hljs-keyword">this</span>),n.shouldDecreaseListLevel()?(<span class="hljs-keyword">this</span>.decreaseListLevel(),<span class="hljs-keyword">this</span>.setSelection(n.startPosition)):n.shouldPrependListItem()?(t=<span class="hljs-keyword">new</span> e.Document([n.block.copyWithoutText()]),<span class="hljs-keyword">this</span>.insertDocument(t)):n.shouldInsertBlockBreak()?<span class="hljs-keyword">this</span>.insertBlockBreak():n.shouldRemoveLastBlockAttribute()?<span class="hljs-keyword">this</span>.removeLastBlockAttribute():n.shouldBreakFormattedBlock()?<span class="hljs-keyword">this</span>.breakFormattedBlock(n):<span class="hljs-keyword">this</span>.insertString(<span class="hljs-string">"\n"</span>)},d.prototype.insertHTML=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s;<span class="hljs-keyword">return</span> s=<span class="hljs-keyword">this</span>.getPosition(),r=<span class="hljs-keyword">this</span>.document.getLength(),n=e.Document.fromHTML(t),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.mergeDocumentAtRange(n,<span class="hljs-keyword">this</span>.getSelectedRange())),o=<span class="hljs-keyword">this</span>.document.getLength(),i=s+(o-r),<span class="hljs-keyword">this</span>.setSelection(i),<span class="hljs-keyword">this</span>.notifyDelegateOfInsertionAtRange([i,i])},d.prototype.replaceHTML=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> n=e.Document.fromHTML(t).copyUsingObjectsFromDocument(<span class="hljs-keyword">this</span>.document),o=<span class="hljs-keyword">this</span>.getLocationRange({<span class="hljs-attr">strict</span>:!<span class="hljs-number">1</span>}),i=<span class="hljs-keyword">this</span>.document.rangeFromLocationRange(o),<span class="hljs-keyword">this</span>.setDocument(n),<span class="hljs-keyword">this</span>.setSelection(i)},d.prototype.insertFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.delegate)?o.compositionShouldAcceptFile(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?(n=e.Attachment.attachmentForFile(t),<span class="hljs-keyword">this</span>.insertAttachment(n)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.insertAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=e.Text.textForAttachmentWithAttributes(t,<span class="hljs-keyword">this</span>.currentAttributes),<span class="hljs-keyword">this</span>.insertText(n)},d.prototype.deleteInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r,s;<span class="hljs-keyword">return</span> r=<span class="hljs-keyword">this</span>.getSelectedRange(),s=u(r),n=<span class="hljs-keyword">this</span>.getBlock(),s&amp;&amp;<span class="hljs-string">"backward"</span>===t&amp;&amp;(i=<span class="hljs-keyword">this</span>.document.locationFromPosition(r[<span class="hljs-number">0</span>]).offset,o=<span class="hljs-number">0</span>===i),o&amp;&amp;<span class="hljs-keyword">this</span>.canDecreaseBlockAttributeLevel()&amp;&amp;(n.isListItem()?<span class="hljs-keyword">this</span>.decreaseListLevel():<span class="hljs-keyword">this</span>.decreaseBlockAttributeLevel(),<span class="hljs-keyword">this</span>.setSelection(r[<span class="hljs-number">0</span>]),n.isEmpty())?!<span class="hljs-number">1</span>:(s&amp;&amp;(r=<span class="hljs-keyword">this</span>.getExpandedRangeInDirection(t),<span class="hljs-string">"backward"</span>===t&amp;&amp;(e=<span class="hljs-keyword">this</span>.getAttachmentAtRange(r))),e?(<span class="hljs-keyword">this</span>.editAttachment(e),!<span class="hljs-number">1</span>):(<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.removeTextAtRange(r)),<span class="hljs-keyword">this</span>.setSelection(r[<span class="hljs-number">0</span>]),o?!<span class="hljs-number">1</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>))},d.prototype.moveTextFromRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getSelectedRange()[<span class="hljs-number">0</span>],<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.moveTextFromRangeToPosition(t,e)),<span class="hljs-keyword">this</span>.setSelection(e)},d.prototype.removeAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.document.getRangeOfAttachment(t))?(<span class="hljs-keyword">this</span>.stopEditingAttachment(),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.removeTextAtRange(e)),<span class="hljs-keyword">this</span>.setSelection(e[<span class="hljs-number">0</span>])):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.removeLastBlockAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.getSelectedRange(),o=n[<span class="hljs-number">0</span>],e=n[<span class="hljs-number">1</span>],t=<span class="hljs-keyword">this</span>.document.getBlockAtPosition(e),<span class="hljs-keyword">this</span>.removeCurrentAttribute(t.getLastAttribute()),<span class="hljs-keyword">this</span>.setSelection(o)},f=<span class="hljs-string">" "</span>,d.prototype.insertPlaceholder=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.placeholderPosition=<span class="hljs-keyword">this</span>.getPosition(),<span class="hljs-keyword">this</span>.insertString(f)},d.prototype.selectPlaceholder=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.placeholderPosition?(<span class="hljs-keyword">this</span>.setSelectedRange([<span class="hljs-keyword">this</span>.placeholderPosition,<span class="hljs-keyword">this</span>.placeholderPosition+f.length]),<span class="hljs-keyword">this</span>.getSelectedRange()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.forgetPlaceholder=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.placeholderPosition=<span class="hljs-literal">null</span>},d.prototype.hasCurrentAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.currentAttributes[t]},d.prototype.toggleCurrentAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=!<span class="hljs-keyword">this</span>.currentAttributes[t])?<span class="hljs-keyword">this</span>.setCurrentAttribute(t,e):<span class="hljs-keyword">this</span>.removeCurrentAttribute(t)},d.prototype.canSetCurrentAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> i(t)?<span class="hljs-keyword">this</span>.canSetCurrentBlockAttribute(t):<span class="hljs-keyword">this</span>.canSetCurrentTextAttribute(t)},d.prototype.canSetCurrentTextAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">switch</span>(t){<span class="hljs-keyword">case</span><span class="hljs-string">"href"</span>:<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.selectionContainsAttachmentWithAttribute(t);<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}},d.prototype.canSetCurrentBlockAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">if</span>(t=<span class="hljs-keyword">this</span>.getBlock())<span class="hljs-keyword">return</span>!t.isTerminalBlock()},d.prototype.setCurrentAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> i(t)?<span class="hljs-keyword">this</span>.setBlockAttribute(t,e):(<span class="hljs-keyword">this</span>.setTextAttribute(t,e),<span class="hljs-keyword">this</span>.currentAttributes[t]=e,<span class="hljs-keyword">this</span>.notifyDelegateOfCurrentAttributesChange())},d.prototype.setTextAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o,i,r,s;<span class="hljs-keyword">if</span>(i=<span class="hljs-keyword">this</span>.getSelectedRange())<span class="hljs-keyword">return</span> r=i[<span class="hljs-number">0</span>],o=i[<span class="hljs-number">1</span>],r!==o?<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.addAttributeAtRange(t,n,i)):<span class="hljs-string">"href"</span>===t?(s=e.Text.textForStringWithAttributes(n,{<span class="hljs-attr">href</span>:n}),<span class="hljs-keyword">this</span>.insertText(s)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.setBlockAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">if</span>(o=<span class="hljs-keyword">this</span>.getSelectedRange())<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canSetCurrentAttribute(t)?(n=<span class="hljs-keyword">this</span>.getBlock(),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.applyBlockAttributeAtRange(t,e,o)),<span class="hljs-keyword">this</span>.setSelection(o)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.removeCurrentAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> i(t)?(<span class="hljs-keyword">this</span>.removeBlockAttribute(t),<span class="hljs-keyword">this</span>.updateCurrentAttributes()):(<span class="hljs-keyword">this</span>.removeTextAttribute(t),<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.currentAttributes[t],<span class="hljs-keyword">this</span>.notifyDelegateOfCurrentAttributesChange())},d.prototype.removeTextAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">if</span>(e=<span class="hljs-keyword">this</span>.getSelectedRange())<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.removeAttributeAtRange(t,e))},d.prototype.removeBlockAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">if</span>(e=<span class="hljs-keyword">this</span>.getSelectedRange())<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.removeAttributeAtRange(t,e))},d.prototype.canDecreaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.getBlock())?t.getNestingLevel():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&gt;<span class="hljs-number">0</span>},d.prototype.canIncreaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">if</span>(e=<span class="hljs-keyword">this</span>.getBlock())<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(o=i(e.getLastNestableAttribute()))?o.listAttribute:<span class="hljs-number">0</span>)?(n=<span class="hljs-keyword">this</span>.getPreviousBlock())?t(n.getListItemAttributes(),e.getListItemAttributes()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:e.getNestingLevel()&gt;<span class="hljs-number">0</span>},d.prototype.decreaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">if</span>(t=<span class="hljs-keyword">this</span>.getBlock())<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.replaceBlock(t,t.decreaseNestingLevel()))},d.prototype.increaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">if</span>(t=<span class="hljs-keyword">this</span>.getBlock())<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.replaceBlock(t,t.increaseNestingLevel()))},d.prototype.canDecreaseBlockAttributeLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.getBlock())?t.getAttributeLevel():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&gt;<span class="hljs-number">0</span>},d.prototype.decreaseBlockAttributeLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span>(t=<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.getBlock())?e.getLastAttribute():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?<span class="hljs-keyword">this</span>.removeCurrentAttribute(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.decreaseListLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r;<span class="hljs-keyword">for</span>(r=<span class="hljs-keyword">this</span>.getSelectedRange()[<span class="hljs-number">0</span>],i=<span class="hljs-keyword">this</span>.document.locationFromPosition(r).index,n=i,t=<span class="hljs-keyword">this</span>.getBlock().getAttributeLevel();(e=<span class="hljs-keyword">this</span>.document.getBlockAtIndex(n+<span class="hljs-number">1</span>))&amp;&amp;e.isListItem()&amp;&amp;e.getAttributeLevel()&gt;t;)n++;<span class="hljs-keyword">return</span> r=<span class="hljs-keyword">this</span>.document.positionFromLocation({<span class="hljs-attr">index</span>:i,<span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>}),o=<span class="hljs-keyword">this</span>.document.positionFromLocation({<span class="hljs-attr">index</span>:n,<span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>}),<span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.removeLastListAttributeAtRange([r,o]))},d.prototype.updateCurrentAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,i,r,s;<span class="hljs-keyword">if</span>(s=<span class="hljs-keyword">this</span>.getSelectedRange({<span class="hljs-attr">ignoreLock</span>:!<span class="hljs-number">0</span>})){<span class="hljs-keyword">for</span>(e=<span class="hljs-keyword">this</span>.document.getCommonAttributesAtRange(s),r=o(),n=<span class="hljs-number">0</span>,i=r.length;i&gt;n;n++)t=r[n],e[t]||<span class="hljs-keyword">this</span>.canSetCurrentAttribute(t)||(e[t]=!<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(!a(e,<span class="hljs-keyword">this</span>.currentAttributes))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentAttributes=e,<span class="hljs-keyword">this</span>.notifyDelegateOfCurrentAttributesChange()}},d.prototype.getCurrentAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> n.call({},<span class="hljs-keyword">this</span>.currentAttributes)},d.prototype.getCurrentTextAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o;t={},n=<span class="hljs-keyword">this</span>.currentAttributes;<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> n)o=n[e],r(e)&amp;&amp;(t[e]=o);<span class="hljs-keyword">return</span> t},d.prototype.freezeSelection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setCurrentAttribute(<span class="hljs-string">"frozen"</span>,!<span class="hljs-number">0</span>)},d.prototype.thawSelection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.removeCurrentAttribute(<span class="hljs-string">"frozen"</span>)},d.prototype.hasFrozenSelection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasCurrentAttribute(<span class="hljs-string">"frozen"</span>)},d.proxyMethod(<span class="hljs-string">"getSelectionManager().getPointRange"</span>),d.proxyMethod(<span class="hljs-string">"getSelectionManager().setLocationRangeFromPointRange"</span>),d.proxyMethod(<span class="hljs-string">"getSelectionManager().locationIsCursorTarget"</span>),d.proxyMethod(<span class="hljs-string">"getSelectionManager().selectionIsExpanded"</span>),d.proxyMethod(<span class="hljs-string">"delegate?.getSelectionManager"</span>),d.prototype.setSelection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.document.locationRangeFromRange(t),<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.getSelectedRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.getLocationRange())?<span class="hljs-keyword">this</span>.document.rangeFromLocationRange(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.setSelectedRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.document.locationRangeFromRange(t),<span class="hljs-keyword">this</span>.getSelectionManager().setLocationRange(e)},d.prototype.getPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.getLocationRange())?<span class="hljs-keyword">this</span>.document.positionFromLocation(t[<span class="hljs-number">0</span>]):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.getLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.getSelectionManager().getLocationRange(t))?e:s({<span class="hljs-attr">index</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>})},d.prototype.getExpandedRangeInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.getSelectedRange(),o=n[<span class="hljs-number">0</span>],e=n[<span class="hljs-number">1</span>],<span class="hljs-string">"backward"</span>===t?o=<span class="hljs-keyword">this</span>.translateUTF16PositionFromOffset(o,<span class="hljs-number">-1</span>):e=<span class="hljs-keyword">this</span>.translateUTF16PositionFromOffset(e,<span class="hljs-number">1</span>),s([o,e])},d.prototype.moveCursorInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editingAttachment?o=<span class="hljs-keyword">this</span>.document.getRangeOfAttachment(<span class="hljs-keyword">this</span>.editingAttachment):(i=<span class="hljs-keyword">this</span>.getSelectedRange(),o=<span class="hljs-keyword">this</span>.getExpandedRangeInDirection(t),n=!c(i,o)),<span class="hljs-keyword">this</span>.setSelectedRange(<span class="hljs-string">"backward"</span>===t?o[<span class="hljs-number">0</span>]:o[<span class="hljs-number">1</span>]),n&amp;&amp;(e=<span class="hljs-keyword">this</span>.getAttachmentAtRange(o))?<span class="hljs-keyword">this</span>.editAttachment(e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.expandSelectionInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getExpandedRangeInDirection(t),<span class="hljs-keyword">this</span>.setSelectedRange(e)},d.prototype.expandSelectionForEditing=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasCurrentAttribute(<span class="hljs-string">"href"</span>)?<span class="hljs-keyword">this</span>.expandSelectionAroundCommonAttribute(<span class="hljs-string">"href"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.expandSelectionAroundCommonAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getPosition(),n=<span class="hljs-keyword">this</span>.document.getRangeOfCommonAttributeAtPosition(t,e),<span class="hljs-keyword">this</span>.setSelectedRange(n)},d.prototype.selectionContainsAttachmentWithAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i,r;<span class="hljs-keyword">if</span>(r=<span class="hljs-keyword">this</span>.getSelectedRange()){<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.document.getDocumentAtRange(r).getAttachments(),n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)<span class="hljs-keyword">if</span>(e=i[n],e.hasAttribute(t))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}},d.prototype.selectionIsInCursorTarget=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editingAttachment||<span class="hljs-keyword">this</span>.positionIsCursorTarget(<span class="hljs-keyword">this</span>.getPosition())},d.prototype.positionIsCursorTarget=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.document.locationFromPosition(t))?<span class="hljs-keyword">this</span>.locationIsCursorTarget(e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.positionIsBlockBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.document.getPieceAtPosition(t))?e.isBlockBreak():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.getSelectedDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.getSelectedRange())?<span class="hljs-keyword">this</span>.document.getDocumentAtRange(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.getAttachments=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachments.slice(<span class="hljs-number">0</span>)},d.prototype.refreshAttachments=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i,r,s,a,u,c,h;<span class="hljs-keyword">for</span>(n=<span class="hljs-keyword">this</span>.document.getAttachments(),a=l(<span class="hljs-keyword">this</span>.attachments,n),t=a.added,h=a.removed,o=<span class="hljs-number">0</span>,r=h.length;r&gt;o;o++)e=h[o],e.delegate=<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>!=(u=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> u.compositionDidRemoveAttachment&amp;&amp;u.compositionDidRemoveAttachment(e);<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,s=t.length;s&gt;i;i++)e=t[i],e.delegate=<span class="hljs-keyword">this</span>,<span class="hljs-literal">null</span>!=(c=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> c.compositionDidAddAttachment&amp;&amp;c.compositionDidAddAttachment(e);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachments=n},d.prototype.attachmentDidChangeAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.revision++,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.attachmentDidChangePreviewURL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.revision++,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.editAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">if</span>(t!==<span class="hljs-keyword">this</span>.editingAttachment)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.stopEditingAttachment(),<span class="hljs-keyword">this</span>.editingAttachment=t,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionDidStartEditingAttachment?e.compositionDidStartEditingAttachment(<span class="hljs-keyword">this</span>.editingAttachment):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.stopEditingAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.editingAttachment)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.compositionDidStopEditingAttachment&amp;&amp;t.compositionDidStopEditingAttachment(<span class="hljs-keyword">this</span>.editingAttachment),<span class="hljs-keyword">this</span>.editingAttachment=<span class="hljs-literal">null</span>},d.prototype.canEditAttachmentCaption=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.editingAttachment)?t.isPreviewable():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.updateAttributesForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.updateAttributesForAttachment(t,e))},d.prototype.removeAttributeForAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setDocument(<span class="hljs-keyword">this</span>.document.removeAttributeForAttachment(t,e))},d.prototype.breakFormattedBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r,s;<span class="hljs-keyword">return</span> o=t.document,n=t.block,r=t.startPosition,s=[r<span class="hljs-number">-1</span>,r],n.getBlockBreakPosition()===t.startLocation.offset?(n.breaksOnReturn()&amp;&amp;<span class="hljs-string">"\n"</span>===t.nextCharacter?r+=<span class="hljs-number">1</span>:o=o.removeTextAtRange(s),s=[r,r]):<span class="hljs-string">"\n"</span>===t.nextCharacter?<span class="hljs-string">"\n"</span>===t.previousCharacter?s=[r<span class="hljs-number">-1</span>,r+<span class="hljs-number">1</span>]:(s=[r,r+<span class="hljs-number">1</span>],r+=<span class="hljs-number">1</span>):t.startLocation.offset<span class="hljs-number">-1</span>!==<span class="hljs-number">0</span>&amp;&amp;(r+=<span class="hljs-number">1</span>),i=<span class="hljs-keyword">new</span> e.Document([n.removeLastAttribute().copyWithoutText()]),<span class="hljs-keyword">this</span>.setDocument(o.insertDocumentAtRange(i,s)),<span class="hljs-keyword">this</span>.setSelection(r)},d.prototype.getPreviousBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.getLocationRange())&amp;&amp;(t=e[<span class="hljs-number">0</span>].index,t&gt;<span class="hljs-number">0</span>)?<span class="hljs-keyword">this</span>.document.getBlockAtIndex(t<span class="hljs-number">-1</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.getBlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.getLocationRange())?<span class="hljs-keyword">this</span>.document.getBlockAtIndex(t[<span class="hljs-number">0</span>].index):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.getAttachmentAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">return</span> n=<span class="hljs-keyword">this</span>.document.getDocumentAtRange(t),n.toString()===e.OBJECT_REPLACEMENT_CHARACTER+<span class="hljs-string">"\n"</span>?n.getAttachments()[<span class="hljs-number">0</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.notifyDelegateOfCurrentAttributesChange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(<span class="hljs-keyword">this</span>.currentAttributes):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.notifyDelegateOfInsertionAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d.prototype.translateUTF16PositionFromOffset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.document.toUTF16String(),n=o.offsetFromUCS2Offset(t),o.offsetToUCS2Offset(n+e)},d}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.UndoManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.composition=t,<span class="hljs-keyword">this</span>.undoEntries=[],<span class="hljs-keyword">this</span>.redoEntries=[]}<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> t(n,e),n.prototype.recordUndoEntry=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,i,r,s,a;<span class="hljs-keyword">return</span> s=<span class="hljs-literal">null</span>!=e?e:{},i=s.context,n=s.consolidatable,r=<span class="hljs-keyword">this</span>.undoEntries.slice(<span class="hljs-number">-1</span>)[<span class="hljs-number">0</span>],n&amp;&amp;o(r,t,i)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(a=<span class="hljs-keyword">this</span>.createEntry({<span class="hljs-attr">description</span>:t,<span class="hljs-attr">context</span>:i}),<span class="hljs-keyword">this</span>.undoEntries.push(a),<span class="hljs-keyword">this</span>.redoEntries=[])},n.prototype.undo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.undoEntries.pop())?(t=<span class="hljs-keyword">this</span>.createEntry(e),<span class="hljs-keyword">this</span>.redoEntries.push(t),<span class="hljs-keyword">this</span>.composition.loadSnapshot(e.snapshot)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},n.prototype.redo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">return</span>(t=<span class="hljs-keyword">this</span>.redoEntries.pop())?(e=<span class="hljs-keyword">this</span>.createEntry(t),<span class="hljs-keyword">this</span>.undoEntries.push(e),<span class="hljs-keyword">this</span>.composition.loadSnapshot(t.snapshot)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},n.prototype.canUndo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.undoEntries.length&gt;<span class="hljs-number">0</span>},n.prototype.canRedo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.redoEntries.length&gt;<span class="hljs-number">0</span>},n.prototype.createEntry=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-literal">null</span>!=t?t:{},n=o.description,e=o.context,{<span class="hljs-attr">description</span>:<span class="hljs-literal">null</span>!=n?n.toString():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-attr">context</span>:<span class="hljs-built_in">JSON</span>.stringify(e),<span class="hljs-attr">snapshot</span>:<span class="hljs-keyword">this</span>.composition.getSnapshot()}},o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=t?t.description:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===(<span class="hljs-literal">null</span>!=e?e.toString():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(<span class="hljs-literal">null</span>!=t?t.context:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===<span class="hljs-built_in">JSON</span>.stringify(n)},n}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.Editor=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">t</span>(<span class="hljs-params">t,n,o</span>)</span>{<span class="hljs-keyword">this</span>.composition=t,<span class="hljs-keyword">this</span>.selectionManager=n,<span class="hljs-keyword">this</span>.element=o,<span class="hljs-keyword">this</span>.undoManager=<span class="hljs-keyword">new</span> e.UndoManager(<span class="hljs-keyword">this</span>.composition)}<span class="hljs-keyword">return</span> t.prototype.loadDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.loadSnapshot({<span class="hljs-attr">document</span>:t,<span class="hljs-attr">selectedRange</span>:[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]})},t.prototype.loadHTML=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t=<span class="hljs-string">""</span>),<span class="hljs-keyword">this</span>.loadDocument(e.Document.fromHTML(t,{<span class="hljs-attr">referenceElement</span>:<span class="hljs-keyword">this</span>.element}))},t.prototype.loadJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> n=t.document,o=t.selectedRange,n=e.Document.fromJSON(n),<span class="hljs-keyword">this</span>.loadSnapshot({<span class="hljs-attr">document</span>:n,<span class="hljs-attr">selectedRange</span>:o})},t.prototype.loadSnapshot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.undoManager=<span class="hljs-keyword">new</span> e.UndoManager(<span class="hljs-keyword">this</span>.composition),<span class="hljs-keyword">this</span>.composition.loadSnapshot(t)},t.prototype.getDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.document},t.prototype.getSelectedDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.getSelectedDocument()},t.prototype.getSnapshot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.getSnapshot()},t.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getSnapshot()},t.prototype.deleteInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.deleteInDirection(t)},t.prototype.insertAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.insertAttachment(t)},t.prototype.insertDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.insertDocument(t)},t.prototype.insertFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.insertFile(t)},t.prototype.insertHTML=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.insertHTML(t)},t.prototype.insertString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.insertString(t)},t.prototype.insertText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.insertText(t)},t.prototype.insertLineBreak=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.insertLineBreak()},t.prototype.getSelectedRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.getSelectedRange()},t.prototype.getPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.getPosition()},t.prototype.getClientRectAtPosition=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getDocument().locationRangeFromRange([t,t+<span class="hljs-number">1</span>]),<span class="hljs-keyword">this</span>.selectionManager.getClientRectAtLocationRange(e)},t.prototype.expandSelectionInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.expandSelectionInDirection(t)},t.prototype.moveCursorInDirection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.moveCursorInDirection(t)},t.prototype.setSelectedRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.setSelectedRange(t)},t.prototype.activateAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==e&amp;&amp;(e=!<span class="hljs-number">0</span>),<span class="hljs-keyword">this</span>.composition.setCurrentAttribute(t,e)},t.prototype.attributeIsActive=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.hasCurrentAttribute(t)
},t.prototype.canActivateAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.canSetCurrentAttribute(t)},t.prototype.deactivateAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.removeCurrentAttribute(t)},t.prototype.canDecreaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.canDecreaseNestingLevel()},t.prototype.canIncreaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.canIncreaseNestingLevel()},t.prototype.decreaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canDecreaseNestingLevel()?<span class="hljs-keyword">this</span>.composition.decreaseNestingLevel():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},t.prototype.increaseNestingLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canIncreaseNestingLevel()?<span class="hljs-keyword">this</span>.composition.increaseNestingLevel():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},t.prototype.canDecreaseIndentationLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canDecreaseNestingLevel()},t.prototype.canIncreaseIndentationLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canIncreaseNestingLevel()},t.prototype.decreaseIndentationLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.decreaseNestingLevel()},t.prototype.increaseIndentationLevel=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.increaseNestingLevel()},t.prototype.canRedo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.undoManager.canRedo()},t.prototype.canUndo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.undoManager.canUndo()},t.prototype.recordUndoEntry=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o,i;<span class="hljs-keyword">return</span> i=<span class="hljs-literal">null</span>!=e?e:{},o=i.context,n=i.consolidatable,<span class="hljs-keyword">this</span>.undoManager.recordUndoEntry(t,{<span class="hljs-attr">context</span>:o,<span class="hljs-attr">consolidatable</span>:n})},t.prototype.redo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canRedo()?<span class="hljs-keyword">this</span>.undoManager.redo():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},t.prototype.undo=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canUndo()?<span class="hljs-keyword">this</span>.undoManager.undo():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},t}()}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.ManagedAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">this</span>.attachmentManager=t,<span class="hljs-keyword">this</span>.attachment=e,n=<span class="hljs-keyword">this</span>.attachment,<span class="hljs-keyword">this</span>.id=n.id,<span class="hljs-keyword">this</span>.file=n.file}<span class="hljs-keyword">return</span> t(n,e),n.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachmentManager.requestRemovalOfAttachment(<span class="hljs-keyword">this</span>.attachment)},n.proxyMethod(<span class="hljs-string">"attachment.getAttribute"</span>),n.proxyMethod(<span class="hljs-string">"attachment.hasAttribute"</span>),n.proxyMethod(<span class="hljs-string">"attachment.setAttribute"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getAttributes"</span>),n.proxyMethod(<span class="hljs-string">"attachment.setAttributes"</span>),n.proxyMethod(<span class="hljs-string">"attachment.isPending"</span>),n.proxyMethod(<span class="hljs-string">"attachment.isPreviewable"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getURL"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getHref"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getFilename"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getFilesize"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getFormattedFilesize"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getExtension"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getContentType"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getFile"</span>),n.proxyMethod(<span class="hljs-string">"attachment.setFile"</span>),n.proxyMethod(<span class="hljs-string">"attachment.releaseFile"</span>),n.proxyMethod(<span class="hljs-string">"attachment.getUploadProgress"</span>),n.proxyMethod(<span class="hljs-string">"attachment.setUploadProgress"</span>),n}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)n.call(e,i)&amp;&amp;(t[i]=e[i]);<span class="hljs-keyword">return</span> o.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> o,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.AttachmentManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">for</span>(<span class="hljs-literal">null</span>==t&amp;&amp;(t=[]),<span class="hljs-keyword">this</span>.managedAttachments={},n=<span class="hljs-number">0</span>,o=t.length;o&gt;n;n++)e=t[n],<span class="hljs-keyword">this</span>.manageAttachment(e)}<span class="hljs-keyword">return</span> t(o,n),o.prototype.getAttachments=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o;n=<span class="hljs-keyword">this</span>.managedAttachments,o=[];<span class="hljs-keyword">for</span>(e <span class="hljs-keyword">in</span> n)t=n[e],o.push(t);<span class="hljs-keyword">return</span> o},o.prototype.manageAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.managedAttachments)[o=t.id]?n[o]:n[o]=<span class="hljs-keyword">new</span> e.ManagedAttachment(<span class="hljs-keyword">this</span>,t)},o.prototype.attachmentIsManaged=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.id <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.managedAttachments},o.prototype.requestRemovalOfAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachmentIsManaged(t)&amp;&amp;<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},o.prototype.unmanageAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.managedAttachments[t.id],<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.managedAttachments[t.id],e},o}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a,u,c,l,h,p,d;t=e.elementContainsNode,n=e.findChildIndexOfNode,o=e.findClosestElementFromNode,i=e.findNodeFromContainerAndOffset,a=e.nodeIsBlockStart,u=e.nodeIsBlockStartComment,s=e.nodeIsBlockContainer,c=e.nodeIsCursorTarget,l=e.nodeIsEmptyTextNode,h=e.nodeIsTextNode,r=e.nodeIsAttachmentElement,p=e.tagName,d=e.walkTree,e.LocationMapper=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.element=t}<span class="hljs-keyword">var</span> o,i,f,g;<span class="hljs-keyword">return</span> e.prototype.findLocationFromContainerAndOffset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,r</span>)</span>{<span class="hljs-keyword">var</span> s,u,l,p,g,m,y;<span class="hljs-keyword">for</span>(m=(<span class="hljs-literal">null</span>!=r?r:{<span class="hljs-attr">strict</span>:!<span class="hljs-number">0</span>}).strict,u=<span class="hljs-number">0</span>,l=!<span class="hljs-number">1</span>,p={<span class="hljs-attr">index</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>},(s=<span class="hljs-keyword">this</span>.findAttachmentElementParentForNode(e))&amp;&amp;(e=s.parentNode,o=n(s)),y=d(<span class="hljs-keyword">this</span>.element,{<span class="hljs-attr">usingFilter</span>:f});y.nextNode();){<span class="hljs-keyword">if</span>(g=y.currentNode,g===e&amp;&amp;h(e)){c(g)||(p.offset+=o);<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(g.parentNode===e){<span class="hljs-keyword">if</span>(u++===o)<span class="hljs-keyword">break</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!t(e,g)&amp;&amp;u&gt;<span class="hljs-number">0</span>)<span class="hljs-keyword">break</span>;a(g,{<span class="hljs-attr">strict</span>:m})?(l&amp;&amp;p.index++,p.offset=<span class="hljs-number">0</span>,l=!<span class="hljs-number">0</span>):p.offset+=i(g)}<span class="hljs-keyword">return</span> p},e.prototype.findContainerAndOffsetFromLocation=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,o,i,r,u,c;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===t.index&amp;&amp;<span class="hljs-number">0</span>===t.offset){<span class="hljs-keyword">for</span>(e=<span class="hljs-keyword">this</span>.element,r=<span class="hljs-number">0</span>;e.firstChild;)<span class="hljs-keyword">if</span>(e=e.firstChild,s(e)){r=<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">return</span>[e,r]}<span class="hljs-keyword">if</span>(u=<span class="hljs-keyword">this</span>.findNodeAndOffsetFromLocation(t),o=u[<span class="hljs-number">0</span>],i=u[<span class="hljs-number">1</span>],o){<span class="hljs-keyword">if</span>(h(o))e=o,c=o.textContent,r=t.offset-i;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(e=o.parentNode,!a(o.previousSibling)&amp;&amp;!s(e))<span class="hljs-keyword">for</span>(;o===e.lastChild&amp;&amp;(o=e,e=e.parentNode,!s(e)););r=n(o),<span class="hljs-number">0</span>!==t.offset&amp;&amp;r++}<span class="hljs-keyword">return</span>[e,r]}},e.prototype.findNodeAndOffsetFromLocation=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,r,s,a,u,l;<span class="hljs-keyword">for</span>(u=<span class="hljs-number">0</span>,l=<span class="hljs-keyword">this</span>.getSignificantNodesForIndex(t.index),n=<span class="hljs-number">0</span>,o=l.length;o&gt;n;n++){<span class="hljs-keyword">if</span>(e=l[n],r=i(e),t.offset&lt;=u+r)<span class="hljs-keyword">if</span>(h(e)){<span class="hljs-keyword">if</span>(s=e,a=u,t.offset===a&amp;&amp;c(s))<span class="hljs-keyword">break</span>}<span class="hljs-keyword">else</span> s||(s=e,a=u);<span class="hljs-keyword">if</span>(u+=r,u&gt;t.offset)<span class="hljs-keyword">break</span>}<span class="hljs-keyword">return</span>[s,a]},e.prototype.findAttachmentElementParentForNode=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(;t&amp;&amp;t!==<span class="hljs-keyword">this</span>.element;){<span class="hljs-keyword">if</span>(r(t))<span class="hljs-keyword">return</span> t;t=t.parentNode}},e.prototype.getSignificantNodesForIndex=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i,r,s;<span class="hljs-keyword">for</span>(i=[],s=d(<span class="hljs-keyword">this</span>.element,{<span class="hljs-attr">usingFilter</span>:o}),r=!<span class="hljs-number">1</span>;s.nextNode();)<span class="hljs-keyword">if</span>(n=s.currentNode,u(n)){<span class="hljs-keyword">if</span>(<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> e&amp;&amp;<span class="hljs-literal">null</span>!==e?e++:e=<span class="hljs-number">0</span>,e===t)r=!<span class="hljs-number">0</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r)<span class="hljs-keyword">break</span>}<span class="hljs-keyword">else</span> r&amp;&amp;i.push(n);<span class="hljs-keyword">return</span> i},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> t.nodeType===Node.TEXT_NODE?c(t)?<span class="hljs-number">0</span>:(e=t.textContent,e.length):<span class="hljs-string">"br"</span>===p(t)||r(t)?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>},o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> g(t)===NodeFilter.FILTER_ACCEPT?f(t):NodeFilter.FILTER_REJECT},g=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> l(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},f=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> r(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},e}()}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o=[].slice;t=e.getDOMRange,n=e.setDOMRange,e.PointMapper=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params"></span>)</span>{}<span class="hljs-keyword">return</span> e.prototype.createDOMRangeFromPoint=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> o,i,r,s,a,u,c,l;<span class="hljs-keyword">if</span>(c=e.x,l=e.y,<span class="hljs-built_in">document</span>.caretPositionFromPoint)<span class="hljs-keyword">return</span> a=<span class="hljs-built_in">document</span>.caretPositionFromPoint(c,l),r=a.offsetNode,i=a.offset,o=<span class="hljs-built_in">document</span>.createRange(),o.setStart(r,i),o;<span class="hljs-keyword">if</span>(<span class="hljs-built_in">document</span>.caretRangeFromPoint)<span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.caretRangeFromPoint(c,l);<span class="hljs-keyword">if</span>(<span class="hljs-built_in">document</span>.body.createTextRange){s=t();<span class="hljs-keyword">try</span>{u=<span class="hljs-built_in">document</span>.body.createTextRange(),u.moveToPoint(c,l),u.select()}<span class="hljs-keyword">catch</span>(h){}<span class="hljs-keyword">return</span> o=t(),n(s),o}},e.prototype.getClientRectsForDOMRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i;<span class="hljs-keyword">return</span> n=o.call(t.getClientRects()),i=n[<span class="hljs-number">0</span>],e=n[n.length<span class="hljs-number">-1</span>],[i,e]},e}()}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.apply(e,<span class="hljs-built_in">arguments</span>)}},o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)i.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},i={}.hasOwnProperty,r=[].indexOf||<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.length;n&gt;e;e++)<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>&amp;&amp;<span class="hljs-keyword">this</span>[e]===t)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>};t=e.getDOMRange,e.SelectionChangeObserver=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.run=n(<span class="hljs-keyword">this</span>.run,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.update=n(<span class="hljs-keyword">this</span>.update,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.selectionManagers=[]}<span class="hljs-keyword">var</span> s;<span class="hljs-keyword">return</span> o(i,e),i.prototype.start=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.started?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.started=!<span class="hljs-number">0</span>,<span class="hljs-string">"onselectionchange"</span><span class="hljs-keyword">in</span> <span class="hljs-built_in">document</span>?<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"selectionchange"</span>,<span class="hljs-keyword">this</span>.update,!<span class="hljs-number">0</span>):<span class="hljs-keyword">this</span>.run())},i.prototype.stop=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.started?(<span class="hljs-keyword">this</span>.started=!<span class="hljs-number">1</span>,<span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">"selectionchange"</span>,<span class="hljs-keyword">this</span>.update,!<span class="hljs-number">0</span>)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.registerSelectionManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> r.call(<span class="hljs-keyword">this</span>.selectionManagers,t)&lt;<span class="hljs-number">0</span>?(<span class="hljs-keyword">this</span>.selectionManagers.push(t),<span class="hljs-keyword">this</span>.start()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.unregisterSelectionManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionManagers=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,o,i,r;<span class="hljs-keyword">for</span>(i=<span class="hljs-keyword">this</span>.selectionManagers,r=[],n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)e=i[n],e!==t&amp;&amp;r.push(e);<span class="hljs-keyword">return</span> r}.call(<span class="hljs-keyword">this</span>),<span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.selectionManagers.length?<span class="hljs-keyword">this</span>.stop():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},i.prototype.notifySelectionManagersOfSelectionChange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n,o,i;<span class="hljs-keyword">for</span>(n=<span class="hljs-keyword">this</span>.selectionManagers,o=[],t=<span class="hljs-number">0</span>,e=n.length;e&gt;t;t++)i=n[t],o.push(i.selectionDidChange());<span class="hljs-keyword">return</span> o},i.prototype.update=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=t(),s(e,<span class="hljs-keyword">this</span>.domRange)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.domRange=e,<span class="hljs-keyword">this</span>.notifySelectionManagersOfSelectionChange())},i.prototype.reset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.domRange=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.update()},i.prototype.run=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.started?(<span class="hljs-keyword">this</span>.update(),requestAnimationFrame(<span class="hljs-keyword">this</span>.run)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=t?t.startContainer:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===(<span class="hljs-literal">null</span>!=e?e.startContainer:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(<span class="hljs-literal">null</span>!=t?t.startOffset:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===(<span class="hljs-literal">null</span>!=e?e.startOffset:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(<span class="hljs-literal">null</span>!=t?t.endContainer:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===(<span class="hljs-literal">null</span>!=e?e.endContainer:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(<span class="hljs-literal">null</span>!=t?t.endOffset:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===(<span class="hljs-literal">null</span>!=e?e.endOffset:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},i}(e.BasicObject),<span class="hljs-literal">null</span>==e.selectionChangeObserver&amp;&amp;(e.selectionChangeObserver=<span class="hljs-keyword">new</span> e.SelectionChangeObserver)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a,u,c,l,h,p,d=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.apply(e,<span class="hljs-built_in">arguments</span>)}},f=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)g.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},g={}.hasOwnProperty;i=e.getDOMSelection,o=e.getDOMRange,p=e.setDOMRange,t=e.defer,n=e.elementContainsNode,u=e.nodeIsCursorTarget,a=e.innerElementIsActive,r=e.handleEvent,s=e.handleEventOnce,c=e.normalizeRange,l=e.rangeIsCollapsed,h=e.rangesAreEqual,e.SelectionManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.element=t,<span class="hljs-keyword">this</span>.selectionDidChange=d(<span class="hljs-keyword">this</span>.selectionDidChange,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.didMouseDown=d(<span class="hljs-keyword">this</span>.didMouseDown,<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.locationMapper=<span class="hljs-keyword">new</span> e.LocationMapper(<span class="hljs-keyword">this</span>.element),<span class="hljs-keyword">this</span>.pointMapper=<span class="hljs-keyword">new</span> e.PointMapper,<span class="hljs-keyword">this</span>.lockCount=<span class="hljs-number">0</span>,r(<span class="hljs-string">"mousedown"</span>,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>.element,<span class="hljs-attr">withCallback</span>:<span class="hljs-keyword">this</span>.didMouseDown})}<span class="hljs-keyword">return</span> f(s,t),s.prototype.getLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>==t&amp;&amp;(t={}),e=t.strict===!<span class="hljs-number">1</span>?<span class="hljs-keyword">this</span>.createLocationRangeFromDOMRange(o(),{<span class="hljs-attr">strict</span>:!<span class="hljs-number">1</span>}):t.ignoreLock?<span class="hljs-keyword">this</span>.currentLocationRange:<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.lockedLocationRange)?n:<span class="hljs-keyword">this</span>.currentLocationRange},s.prototype.setLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.lockedLocationRange)<span class="hljs-keyword">return</span> t=c(t),(e=<span class="hljs-keyword">this</span>.createDOMRangeFromLocationRange(t))?(p(e),<span class="hljs-keyword">this</span>.updateCurrentLocationRange(t)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.setLocationRangeFromPointRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> t=c(t),n=<span class="hljs-keyword">this</span>.getLocationAtPoint(t[<span class="hljs-number">0</span>]),e=<span class="hljs-keyword">this</span>.getLocationAtPoint(t[<span class="hljs-number">1</span>]),<span class="hljs-keyword">this</span>.setLocationRange([n,e])},s.prototype.getClientRectAtLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.createDOMRangeFromLocationRange(t))?<span class="hljs-keyword">this</span>.getClientRectsForDOMRange(e)[<span class="hljs-number">1</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.locationIsCursorTarget=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.findNodeAndOffsetFromLocation(t),e=o[<span class="hljs-number">0</span>],n=o[<span class="hljs-number">1</span>],u(e)},s.prototype.lock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.lockCount++?(<span class="hljs-keyword">this</span>.updateCurrentLocationRange(),<span class="hljs-keyword">this</span>.lockedLocationRange=<span class="hljs-keyword">this</span>.getLocationRange()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.unlock=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===--<span class="hljs-keyword">this</span>.lockCount&amp;&amp;(t=<span class="hljs-keyword">this</span>.lockedLocationRange,<span class="hljs-keyword">this</span>.lockedLocationRange=<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>!=t)?<span class="hljs-keyword">this</span>.setLocationRange(t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.clearSelection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=i())?t.removeAllRanges():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.selectionIsCollapsed=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=(t=o())?t.collapsed:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)===!<span class="hljs-number">0</span>},s.prototype.selectionIsExpanded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.selectionIsCollapsed()},s.proxyMethod(<span class="hljs-string">"locationMapper.findLocationFromContainerAndOffset"</span>),s.proxyMethod(<span class="hljs-string">"locationMapper.findContainerAndOffsetFromLocation"</span>),s.proxyMethod(<span class="hljs-string">"locationMapper.findNodeAndOffsetFromLocation"</span>),s.proxyMethod(<span class="hljs-string">"pointMapper.createDOMRangeFromPoint"</span>),s.proxyMethod(<span class="hljs-string">"pointMapper.getClientRectsForDOMRange"</span>),s.prototype.didMouseDown=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pauseTemporarily()},s.prototype.pauseTemporarily=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,o,i;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.paused=!<span class="hljs-number">0</span>,e=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e,r,s;<span class="hljs-keyword">for</span>(t.paused=!<span class="hljs-number">1</span>,clearTimeout(i),r=<span class="hljs-number">0</span>,s=o.length;s&gt;r;r++)e=o[r],e.destroy();<span class="hljs-keyword">return</span> n(<span class="hljs-built_in">document</span>,t.element)?t.selectionDidChange():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}}(<span class="hljs-keyword">this</span>),i=setTimeout(e,<span class="hljs-number">200</span>),o=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,o,i,s;<span class="hljs-keyword">for</span>(i=[<span class="hljs-string">"mousemove"</span>,<span class="hljs-string">"keydown"</span>],s=[],n=<span class="hljs-number">0</span>,o=i.length;o&gt;n;n++)t=i[n],s.push(r(t,{<span class="hljs-attr">onElement</span>:<span class="hljs-built_in">document</span>,<span class="hljs-attr">withCallback</span>:e}));<span class="hljs-keyword">return</span> s}()},s.prototype.selectionDidChange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.paused||a(<span class="hljs-keyword">this</span>.element)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.updateCurrentLocationRange()},s.prototype.updateCurrentLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span>(<span class="hljs-literal">null</span>!=t?t:t=<span class="hljs-keyword">this</span>.createLocationRangeFromDOMRange(o()))&amp;&amp;!h(t,<span class="hljs-keyword">this</span>.currentLocationRange)?(<span class="hljs-keyword">this</span>.currentLocationRange=t,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.delegate)&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> e.locationRangeDidChange?e.locationRangeDidChange(<span class="hljs-keyword">this</span>.currentLocationRange.slice(<span class="hljs-number">0</span>)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.createDOMRangeFromLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,o,i;<span class="hljs-keyword">return</span> o=<span class="hljs-keyword">this</span>.findContainerAndOffsetFromLocation(t[<span class="hljs-number">0</span>]),n=l(t)?o:<span class="hljs-literal">null</span>!=(i=<span class="hljs-keyword">this</span>.findContainerAndOffsetFromLocation(t[<span class="hljs-number">1</span>]))?i:o,<span class="hljs-literal">null</span>!=o&amp;&amp;<span class="hljs-literal">null</span>!=n?(e=<span class="hljs-built_in">document</span>.createRange(),e.setStart.apply(e,o),e.setEnd.apply(e,n),e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.createLocationRangeFromDOMRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!=t&amp;&amp;<span class="hljs-keyword">this</span>.domRangeWithinElement(t)&amp;&amp;(o=<span class="hljs-keyword">this</span>.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))<span class="hljs-keyword">return</span> t.collapsed||(n=<span class="hljs-keyword">this</span>.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),c([o,n])},s.prototype.getLocationAtPoint=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span>(e=<span class="hljs-keyword">this</span>.createDOMRangeFromPoint(t))&amp;&amp;<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.createLocationRangeFromDOMRange(e))?n[<span class="hljs-number">0</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},s.prototype.domRangeWithinElement=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.collapsed?n(<span class="hljs-keyword">this</span>.element,t.startContainer):n(<span class="hljs-keyword">this</span>.element,t.startContainer)&amp;&amp;n(<span class="hljs-keyword">this</span>.element,t.endContainer)},s}(e.BasicObject)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">n</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.constructor=t}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)r.call(e,o)&amp;&amp;(t[o]=e[o]);<span class="hljs-keyword">return</span> n.prototype=e.prototype,t.prototype=<span class="hljs-keyword">new</span> n,t.__super__=e.prototype,t},r={}.hasOwnProperty,s=[].slice;n=e.rangeIsCollapsed,o=e.rangesAreEqual,t=e.objectsAreEqual,e.EditorController=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n,o;<span class="hljs-keyword">this</span>.editorElement=t.editorElement,n=t.document,o=t.html,<span class="hljs-keyword">this</span>.selectionManager=<span class="hljs-keyword">new</span> e.SelectionManager(<span class="hljs-keyword">this</span>.editorElement),<span class="hljs-keyword">this</span>.selectionManager.delegate=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.composition=<span class="hljs-keyword">new</span> e.Composition,<span class="hljs-keyword">this</span>.composition.delegate=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.attachmentManager=<span class="hljs-keyword">new</span> e.AttachmentManager(<span class="hljs-keyword">this</span>.composition.getAttachments()),<span class="hljs-keyword">this</span>.attachmentManager.delegate=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.inputController=<span class="hljs-keyword">new</span> e.InputController(<span class="hljs-keyword">this</span>.editorElement),<span class="hljs-keyword">this</span>.inputController.delegate=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.inputController.responder=<span class="hljs-keyword">this</span>.composition,<span class="hljs-keyword">this</span>.compositionController=<span class="hljs-keyword">new</span> e.CompositionController(<span class="hljs-keyword">this</span>.editorElement,<span class="hljs-keyword">this</span>.composition),<span class="hljs-keyword">this</span>.compositionController.delegate=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.toolbarController=<span class="hljs-keyword">new</span> e.ToolbarController(<span class="hljs-keyword">this</span>.editorElement.toolbarElement),<span class="hljs-keyword">this</span>.toolbarController.delegate=<span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.editor=<span class="hljs-keyword">new</span> e.Editor(<span class="hljs-keyword">this</span>.composition,<span class="hljs-keyword">this</span>.selectionManager,<span class="hljs-keyword">this</span>.editorElement),<span class="hljs-literal">null</span>!=n?<span class="hljs-keyword">this</span>.editor.loadDocument(n):<span class="hljs-keyword">this</span>.editor.loadHTML(o)}<span class="hljs-keyword">return</span> i(a,r),a.prototype.registerSelectionManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.selectionChangeObserver.registerSelectionManager(<span class="hljs-keyword">this</span>.selectionManager)},a.prototype.unregisterSelectionManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.selectionChangeObserver.unregisterSelectionManager(<span class="hljs-keyword">this</span>.selectionManager)},a.prototype.compositionDidChangeDocument=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"document-change"</span>),<span class="hljs-keyword">this</span>.handlingInput?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.render()},a.prototype.compositionDidChangeCurrentAttributes=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentAttributes=t,<span class="hljs-keyword">this</span>.toolbarController.updateAttributes(<span class="hljs-keyword">this</span>.currentAttributes),<span class="hljs-keyword">this</span>.updateCurrentActions(),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"attributes-change"</span>,{<span class="hljs-attr">attributes</span>:<span class="hljs-keyword">this</span>.currentAttributes})},a.prototype.compositionDidPerformInsertionAtRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pasting?<span class="hljs-keyword">this</span>.pastedRange=t:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.compositionShouldAcceptFile=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"file-accept"</span>,{<span class="hljs-attr">file</span>:t})},a.prototype.compositionDidAddAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.attachmentManager.manageAttachment(t),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"attachment-add"</span>,{<span class="hljs-attr">attachment</span>:e})},a.prototype.compositionDidEditAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compositionController.rerenderViewForObject(t),e=<span class="hljs-keyword">this</span>.attachmentManager.manageAttachment(t),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"attachment-edit"</span>,{<span class="hljs-attr">attachment</span>:e}),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"change"</span>)},a.prototype.compositionDidChangeAttachmentPreviewURL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compositionController.invalidateViewForObject(t),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"change"</span>)},a.prototype.compositionDidRemoveAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.attachmentManager.unmanageAttachment(t),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"attachment-remove"</span>,{<span class="hljs-attr">attachment</span>:e})},a.prototype.compositionDidStartEditingAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.attachmentLocationRange=<span class="hljs-keyword">this</span>.composition.document.getLocationRangeOfAttachment(t),<span class="hljs-keyword">this</span>.compositionController.installAttachmentEditorForAttachment(t),<span class="hljs-keyword">this</span>.selectionManager.setLocationRange(<span class="hljs-keyword">this</span>.attachmentLocationRange)},a.prototype.compositionDidStopEditingAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compositionController.uninstallAttachmentEditor(),<span class="hljs-keyword">this</span>.attachmentLocationRange=<span class="hljs-literal">null</span>},a.prototype.compositionDidRequestChangingSelectionToLocationRange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.loadingSnapshot||<span class="hljs-keyword">this</span>.isFocused()?(<span class="hljs-keyword">this</span>.requestedLocationRange=t,<span class="hljs-keyword">this</span>.compositionRevisionWhenLocationRangeRequested=<span class="hljs-keyword">this</span>.composition.revision,<span class="hljs-keyword">this</span>.handlingInput?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.render()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.compositionWillLoadSnapshot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.loadingSnapshot=!<span class="hljs-number">0</span>},a.prototype.compositionDidLoadSnapshot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compositionController.refreshViewCache(),<span class="hljs-keyword">this</span>.render(),<span class="hljs-keyword">this</span>.loadingSnapshot=!<span class="hljs-number">1</span>},a.prototype.getSelectionManager=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionManager},a.proxyMethod(<span class="hljs-string">"getSelectionManager().setLocationRange"</span>),a.proxyMethod(<span class="hljs-string">"getSelectionManager().getLocationRange"</span>),a.prototype.attachmentManagerDidRequestRemovalOfAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.removeAttachment(t)},a.prototype.compositionControllerWillSyncDocumentView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.inputController.editorWillSyncDocumentView(),<span class="hljs-keyword">this</span>.selectionManager.lock(),<span class="hljs-keyword">this</span>.selectionManager.clearSelection()},a.prototype.compositionControllerDidSyncDocumentView=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.inputController.editorDidSyncDocumentView(),<span class="hljs-keyword">this</span>.selectionManager.unlock(),<span class="hljs-keyword">this</span>.updateCurrentActions(),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"sync"</span>)},a.prototype.compositionControllerDidRender=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.requestedLocationRange&amp;&amp;(<span class="hljs-keyword">this</span>.compositionRevisionWhenLocationRangeRequested===<span class="hljs-keyword">this</span>.composition.revision&amp;&amp;<span class="hljs-keyword">this</span>.selectionManager.setLocationRange(<span class="hljs-keyword">this</span>.requestedLocationRange),<span class="hljs-keyword">this</span>.requestedLocationRange=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.compositionRevisionWhenLocationRangeRequested=<span class="hljs-literal">null</span>),<span class="hljs-keyword">this</span>.renderedCompositionRevision!==<span class="hljs-keyword">this</span>.composition.revision&amp;&amp;(<span class="hljs-keyword">this</span>.composition.updateCurrentAttributes(),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"render"</span>)),<span class="hljs-keyword">this</span>.renderedCompositionRevision=<span class="hljs-keyword">this</span>.composition.revision},a.prototype.compositionControllerDidFocus=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.toolbarController.hideDialog(),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"focus"</span>)},a.prototype.compositionControllerDidBlur=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"blur"</span>)},a.prototype.compositionControllerDidSelectAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.editAttachment(t)},a.prototype.compositionControllerDidRequestDeselectingAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> e=<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.attachmentLocationRange)?n:<span class="hljs-keyword">this</span>.composition.document.getLocationRangeOfAttachment(t),<span class="hljs-keyword">this</span>.selectionManager.setLocationRange(e[<span class="hljs-number">1</span>])},a.prototype.compositionControllerWillUpdateAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Edit Attachment"</span>,{<span class="hljs-attr">context</span>:t.id,<span class="hljs-attr">consolidatable</span>:!<span class="hljs-number">0</span>})},a.prototype.compositionControllerDidRequestRemovalOfAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.removeAttachment(t)},a.prototype.inputControllerWillHandleInput=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handlingInput=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.requestedRender=!<span class="hljs-number">1</span>},a.prototype.inputControllerDidRequestRender=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.requestedRender=!<span class="hljs-number">0</span>},a.prototype.inputControllerDidHandleInput=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handlingInput=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.requestedRender?(<span class="hljs-keyword">this</span>.requestedRender=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.render()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.inputControllerDidAllowUnhandledInput=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"change"</span>)},a.prototype.inputControllerDidRequestReparse=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.reparse()},a.prototype.inputControllerWillPerformTyping=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.recordTypingUndoEntry()},a.prototype.inputControllerWillCutText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Cut"</span>)},a.prototype.inputControllerWillPasteText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Paste"</span>),<span class="hljs-keyword">this</span>.pasting=!<span class="hljs-number">0</span>},a.prototype.inputControllerDidPaste=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.pastedRange,<span class="hljs-keyword">this</span>.pastedRange=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.pasting=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"paste"</span>,{<span class="hljs-attr">pasteData</span>:t,<span class="hljs-attr">range</span>:e})},a.prototype.inputControllerWillMoveText=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Move"</span>)},a.prototype.inputControllerWillAttachFiles=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Drop Files"</span>)},a.prototype.inputControllerDidReceiveKeyboardCommand=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.toolbarController.applyKeyboardCommand(t)},a.prototype.inputControllerDidStartDrag=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.locationRangeBeforeDrag=<span class="hljs-keyword">this</span>.selectionManager.getLocationRange()},a.prototype.inputControllerDidReceiveDragOverPoint=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionManager.setLocationRangeFromPointRange(t)},a.prototype.inputControllerDidCancelDrag=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionManager.setLocationRange(<span class="hljs-keyword">this</span>.locationRangeBeforeDrag),<span class="hljs-keyword">this</span>.locationRangeBeforeDrag=<span class="hljs-literal">null</span>},a.prototype.locationRangeDidChange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.updateCurrentAttributes(),<span class="hljs-keyword">this</span>.updateCurrentActions(),<span class="hljs-keyword">this</span>.attachmentLocationRange&amp;&amp;!o(<span class="hljs-keyword">this</span>.attachmentLocationRange,t)&amp;&amp;<span class="hljs-keyword">this</span>.composition.stopEditingAttachment(),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"selection-change"</span>)},a.prototype.toolbarDidClickButton=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getLocationRange()?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.setLocationRange({<span class="hljs-attr">index</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>})},a.prototype.toolbarDidInvokeAction=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.invokeAction(t)},a.prototype.toolbarDidToggleAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.recordFormattingUndoEntry(),<span class="hljs-keyword">this</span>.composition.toggleCurrentAttribute(t),<span class="hljs-keyword">this</span>.render(),<span class="hljs-keyword">this</span>.selectionFrozen?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.editorElement.focus()},a.prototype.toolbarDidUpdateAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.recordFormattingUndoEntry(),<span class="hljs-keyword">this</span>.composition.setCurrentAttribute(t,e),<span class="hljs-keyword">this</span>.render(),<span class="hljs-keyword">this</span>.selectionFrozen?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.editorElement.focus()},a.prototype.toolbarDidRemoveAttribute=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.recordFormattingUndoEntry(),<span class="hljs-keyword">this</span>.composition.removeCurrentAttribute(t),<span class="hljs-keyword">this</span>.render(),<span class="hljs-keyword">this</span>.selectionFrozen?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.editorElement.focus()},a.prototype.toolbarWillShowDialog=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.expandSelectionForEditing(),<span class="hljs-keyword">this</span>.freezeSelection()},a.prototype.toolbarDidShowDialog=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"toolbar-dialog-show"</span>,{<span class="hljs-attr">dialogName</span>:t})},a.prototype.toolbarDidHideDialog=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.thawSelection(),<span class="hljs-keyword">this</span>.editorElement.focus(),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"toolbar-dialog-hide"</span>,{<span class="hljs-attr">dialogName</span>:t})},a.prototype.freezeSelection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionFrozen?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.selectionManager.lock(),<span class="hljs-keyword">this</span>.composition.freezeSelection(),<span class="hljs-keyword">this</span>.selectionFrozen=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.render())},a.prototype.thawSelection=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionFrozen?(<span class="hljs-keyword">this</span>.composition.thawSelection(),<span class="hljs-keyword">this</span>.selectionManager.unlock(),<span class="hljs-keyword">this</span>.selectionFrozen=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.render()):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.actions={<span class="hljs-attr">undo</span>:{<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.canUndo()},<span class="hljs-attr">perform</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.undo()}},<span class="hljs-attr">redo</span>:{<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.canRedo()},<span class="hljs-attr">perform</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.redo()}},<span class="hljs-attr">link</span>:{<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.canActivateAttribute(<span class="hljs-string">"href"</span>)}},<span class="hljs-attr">increaseNestingLevel</span>:{<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.canIncreaseNestingLevel()},<span class="hljs-attr">perform</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.increaseNestingLevel()&amp;&amp;<span class="hljs-keyword">this</span>.render()}},<span class="hljs-attr">decreaseNestingLevel</span>:{<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.canDecreaseNestingLevel()},<span class="hljs-attr">perform</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.decreaseNestingLevel()&amp;&amp;<span class="hljs-keyword">this</span>.render()}},<span class="hljs-attr">increaseBlockLevel</span>:{<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.canIncreaseNestingLevel()},<span class="hljs-attr">perform</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.increaseNestingLevel()&amp;&amp;<span class="hljs-keyword">this</span>.render()}},<span class="hljs-attr">decreaseBlockLevel</span>:{<span class="hljs-attr">test</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.canDecreaseNestingLevel()},<span class="hljs-attr">perform</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.decreaseNestingLevel()&amp;&amp;<span class="hljs-keyword">this</span>.render()}}},a.prototype.canInvokeAction=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.actionIsExternal(t)?!<span class="hljs-number">0</span>:!!(<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.actions[t])&amp;&amp;<span class="hljs-literal">null</span>!=(n=e.test)?n.call(<span class="hljs-keyword">this</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},a.prototype.invokeAction=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.actionIsExternal(t)?<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"action-invoke"</span>,{<span class="hljs-attr">actionName</span>:t}):<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.actions[t])&amp;&amp;<span class="hljs-literal">null</span>!=(n=e.perform)?n.call(<span class="hljs-keyword">this</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},a.prototype.actionIsExternal=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-regexp">/^x-./</span>.test(t)},a.prototype.getCurrentActions=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;e={};<span class="hljs-keyword">for</span>(t <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.actions)e[t]=<span class="hljs-keyword">this</span>.canInvokeAction(t);<span class="hljs-keyword">return</span> e},a.prototype.updateCurrentActions=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> e=<span class="hljs-keyword">this</span>.getCurrentActions(),t(e,<span class="hljs-keyword">this</span>.currentActions)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-keyword">this</span>.currentActions=e,<span class="hljs-keyword">this</span>.toolbarController.updateActions(<span class="hljs-keyword">this</span>.currentActions),<span class="hljs-keyword">this</span>.editorElement.notify(<span class="hljs-string">"actions-change"</span>,{<span class="hljs-attr">actions</span>:<span class="hljs-keyword">this</span>.currentActions}))},a.prototype.reparse=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.composition.replaceHTML(<span class="hljs-keyword">this</span>.editorElement.innerHTML)},a.prototype.render=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compositionController.render()},a.prototype.removeAttachment=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Delete Attachment"</span>),<span class="hljs-keyword">this</span>.composition.removeAttachment(t),<span class="hljs-keyword">this</span>.render()},a.prototype.recordFormattingUndoEntry=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=<span class="hljs-keyword">this</span>.selectionManager.getLocationRange(),n(t)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Formatting"</span>,{<span class="hljs-attr">context</span>:<span class="hljs-keyword">this</span>.getUndoContext(),<span class="hljs-attr">consolidatable</span>:!<span class="hljs-number">0</span>})},a.prototype.recordTypingUndoEntry=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editor.recordUndoEntry(<span class="hljs-string">"Typing"</span>,{<span class="hljs-attr">context</span>:<span class="hljs-keyword">this</span>.getUndoContext(<span class="hljs-keyword">this</span>.currentAttributes),<span class="hljs-attr">consolidatable</span>:!<span class="hljs-number">0</span>})},a.prototype.getUndoContext=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=<span class="hljs-number">1</span>&lt;=<span class="hljs-built_in">arguments</span>.length?s.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">0</span>):[],[<span class="hljs-keyword">this</span>.getLocationContext(),<span class="hljs-keyword">this</span>.getTimeContext()].concat(s.call(t))},a.prototype.getLocationContext=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> t=<span class="hljs-keyword">this</span>.selectionManager.getLocationRange(),n(t)?t[<span class="hljs-number">0</span>].index:t},a.prototype.getTimeContext=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> e.config.undoInterval&gt;<span class="hljs-number">0</span>?<span class="hljs-built_in">Math</span>.floor((<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>).getTime()/e.config.undoInterval):<span class="hljs-number">0</span>},a.prototype.isFocused=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editorElement===(<span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.editorElement.ownerDocument)?t.activeElement:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},a}(e.Controller)}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,n,o,i,r,s,a;r=e.makeElement,s=e.selectionElements,a=e.triggerEvent,o=e.handleEvent,i=e.handleEventOnce,n=e.defer,t=e.AttachmentView.attachmentSelector,e.registerElement(<span class="hljs-string">"trix-editor"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> n,u,c,l,h,p;<span class="hljs-keyword">return</span> l=<span class="hljs-number">0</span>,n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>!<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">":focus"</span>)&amp;&amp;t.hasAttribute(<span class="hljs-string">"autofocus"</span>)&amp;&amp;<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"[autofocus]"</span>)===t?t.focus():<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},h=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.hasAttribute(<span class="hljs-string">"contenteditable"</span>)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(t.setAttribute(<span class="hljs-string">"contenteditable"</span>,<span class="hljs-string">""</span>),i(<span class="hljs-string">"focus"</span>,{<span class="hljs-attr">onElement</span>:t,<span class="hljs-attr">withCallback</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> u(t)}}))},u=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> c(t),p(t)},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span>.queryCommandSupported?<span class="hljs-built_in">document</span>.queryCommandSupported(<span class="hljs-string">"enableObjectResizing"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)?(<span class="hljs-built_in">document</span>.execCommand(<span class="hljs-string">"enableObjectResizing"</span>,!<span class="hljs-number">1</span>,!<span class="hljs-number">1</span>),o(<span class="hljs-string">"mscontrolselect"</span>,{<span class="hljs-attr">onElement</span>:t,<span class="hljs-attr">preventDefault</span>:!<span class="hljs-number">0</span>})):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},p=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span>(<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span>.queryCommandSupported?<span class="hljs-built_in">document</span>.queryCommandSupported(<span class="hljs-string">"DefaultParagraphSeparator"</span>):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)&amp;&amp;(t=e.config.blockAttributes[<span class="hljs-string">"default"</span>].tagName,<span class="hljs-string">"div"</span>===t||<span class="hljs-string">"p"</span>===t)?<span class="hljs-built_in">document</span>.execCommand(<span class="hljs-string">"DefaultParagraphSeparator"</span>,!<span class="hljs-number">1</span>,t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},{<span class="hljs-attr">defaultCSS</span>:<span class="hljs-string">"%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "</span>+t+<span class="hljs-string">" figcaption textarea {\n  resize: none;\n}\n\n%t "</span>+t+<span class="hljs-string">" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "</span>+t+<span class="hljs-string">'[data-trix-mutable] figcaption:empty::before {\n  content: "'</span>+e.config.lang.captionPrompt+<span class="hljs-string">'";\n  color: graytext;\n}\n\n%t '</span>+s.selector+<span class="hljs-string">" { "</span>+s.cssText+<span class="hljs-string">" }"</span>,<span class="hljs-attr">trixId</span>:{<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasAttribute(<span class="hljs-string">"trix-id"</span>)?<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"trix-id"</span>):(<span class="hljs-keyword">this</span>.setAttribute(<span class="hljs-string">"trix-id"</span>,++l),<span class="hljs-keyword">this</span>.trixId)}},<span class="hljs-attr">toolbarElement</span>:{<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasAttribute(<span class="hljs-string">"toolbar"</span>)?<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.ownerDocument)?e.getElementById(<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"toolbar"</span>)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.parentElement?(n=<span class="hljs-string">"trix-toolbar-"</span>+<span class="hljs-keyword">this</span>.trixId,<span class="hljs-keyword">this</span>.setAttribute(<span class="hljs-string">"toolbar"</span>,n),t=r(<span class="hljs-string">"trix-toolbar"</span>,{<span class="hljs-attr">id</span>:n}),<span class="hljs-keyword">this</span>.parentElement.insertBefore(t,<span class="hljs-keyword">this</span>),t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">inputElement</span>:{<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e,n;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasAttribute(<span class="hljs-string">"input"</span>)?<span class="hljs-literal">null</span>!=(n=<span class="hljs-keyword">this</span>.ownerDocument)?n.getElementById(<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"input"</span>)):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.parentElement?(e=<span class="hljs-string">"trix-input-"</span>+<span class="hljs-keyword">this</span>.trixId,<span class="hljs-keyword">this</span>.setAttribute(<span class="hljs-string">"input"</span>,e),t=r(<span class="hljs-string">"input"</span>,{<span class="hljs-attr">type</span>:<span class="hljs-string">"hidden"</span>,<span class="hljs-attr">id</span>:e}),<span class="hljs-keyword">this</span>.parentElement.insertBefore(t,<span class="hljs-keyword">this</span>.nextElementSibling),t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">editor</span>:{<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.editorController)?t.editor:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">name</span>:{<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.inputElement)?t.name:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">value</span>:{<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.inputElement)?t.value:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">set</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.defaultValue=t,<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.editor)?e.loadHTML(<span class="hljs-keyword">this</span>.defaultValue):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},<span class="hljs-attr">notify</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,n</span>)</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">switch</span>(t){<span class="hljs-keyword">case</span><span class="hljs-string">"document-change"</span>:<span class="hljs-keyword">this</span>.documentChangedSinceLastRender=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"render"</span>:<span class="hljs-keyword">this</span>.documentChangedSinceLastRender&amp;&amp;(<span class="hljs-keyword">this</span>.documentChangedSinceLastRender=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.notify(<span class="hljs-string">"change"</span>));<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"change"</span>:<span class="hljs-keyword">case</span><span class="hljs-string">"attachment-add"</span>:<span class="hljs-keyword">case</span><span class="hljs-string">"attachment-edit"</span>:<span class="hljs-keyword">case</span><span class="hljs-string">"attachment-remove"</span>:<span class="hljs-literal">null</span>!=(o=<span class="hljs-keyword">this</span>.inputElement)&amp;&amp;(o.value=e.serializeToContentType(<span class="hljs-keyword">this</span>,<span class="hljs-string">"text/html"</span>))}<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.editorController?a(<span class="hljs-string">"trix-"</span>+t,{<span class="hljs-attr">onElement</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">attributes</span>:n}):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">createdCallback</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> h(<span class="hljs-keyword">this</span>)},<span class="hljs-attr">attachedCallback</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasAttribute(<span class="hljs-string">"data-trix-internal"</span>)?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:(<span class="hljs-literal">null</span>==<span class="hljs-keyword">this</span>.editorController&amp;&amp;(<span class="hljs-keyword">this</span>.editorController=<span class="hljs-keyword">new</span> e.EditorController({<span class="hljs-attr">editorElement</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">html</span>:<span class="hljs-keyword">this</span>.defaultValue=<span class="hljs-keyword">this</span>.value})),<span class="hljs-keyword">this</span>.editorController.registerSelectionManager(),<span class="hljs-keyword">this</span>.registerResetListener(),n(<span class="hljs-keyword">this</span>),requestAnimationFrame(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.notify(<span class="hljs-string">"initialize"</span>)}}(<span class="hljs-keyword">this</span>)))},<span class="hljs-attr">detachedCallback</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=(t=<span class="hljs-keyword">this</span>.editorController)&amp;&amp;t.unregisterSelectionManager(),<span class="hljs-keyword">this</span>.unregisterResetListener()},<span class="hljs-attr">registerResetListener</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.resetListener=<span class="hljs-keyword">this</span>.resetBubbled.bind(<span class="hljs-keyword">this</span>),<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"reset"</span>,<span class="hljs-keyword">this</span>.resetListener,!<span class="hljs-number">1</span>)},<span class="hljs-attr">unregisterResetListener</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">"reset"</span>,<span class="hljs-keyword">this</span>.resetListener,!<span class="hljs-number">1</span>)},<span class="hljs-attr">resetBubbled</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> t.target!==(<span class="hljs-literal">null</span>!=(e=<span class="hljs-keyword">this</span>.inputElement)?e.form:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)||t.defaultPrevented?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.reset()},<span class="hljs-attr">reset</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value=<span class="hljs-keyword">this</span>.defaultValue}}}())}.call(<span class="hljs-keyword">this</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}.call(<span class="hljs-keyword">this</span>)}).call(<span class="hljs-keyword">this</span>),<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span>&amp;&amp;<span class="hljs-built_in">module</span>.exports?<span class="hljs-built_in">module</span>.exports=e:<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> define&amp;&amp;define.amd&amp;&amp;define(e)}.call(<span class="hljs-keyword">this</span>);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
