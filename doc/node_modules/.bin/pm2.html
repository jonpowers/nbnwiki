<!DOCTYPE html>
<html>
<head>
  <title>pm2</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/pm2";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>pm2</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-meta">
'use strict'</span>;

process.env.PM2_USAGE = <span class="hljs-string">'CLI'</span>;

<span class="hljs-keyword">var</span> cst       = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../constants.js'</span>);

<span class="hljs-keyword">var</span> commander = <span class="hljs-built_in">require</span>(<span class="hljs-string">'commander'</span>);
<span class="hljs-keyword">var</span> fs        = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">var</span> chalk     = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chalk'</span>);
<span class="hljs-keyword">var</span> <span class="hljs-keyword">async</span>     = <span class="hljs-built_in">require</span>(<span class="hljs-string">'async'</span>);

<span class="hljs-keyword">var</span> debug     = <span class="hljs-built_in">require</span>(<span class="hljs-string">'debug'</span>)(<span class="hljs-string">'pm2:cli'</span>);
<span class="hljs-keyword">var</span> PM2       = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lib/API.js'</span>);
<span class="hljs-keyword">var</span> pkg       = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../package.json'</span>);
<span class="hljs-keyword">var</span> tabtab    = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lib/completion.js'</span>);

<span class="hljs-keyword">var</span> pm2 = <span class="hljs-keyword">new</span> PM2();

commander.version(pkg.version)
  .option(<span class="hljs-string">'-v --version'</span>, <span class="hljs-string">'get version'</span>)
  .option(<span class="hljs-string">'-s --silent'</span>, <span class="hljs-string">'hide all messages'</span>, <span class="hljs-literal">false</span>)
  .option(<span class="hljs-string">'-m --mini-list'</span>, <span class="hljs-string">'display a compacted list without formatting'</span>)
  .option(<span class="hljs-string">'-f --force'</span>, <span class="hljs-string">'force actions'</span>)
  .option(<span class="hljs-string">'-n --name &lt;name&gt;'</span>, <span class="hljs-string">'set a &lt;name&gt; for script'</span>)
  .option(<span class="hljs-string">'-i --instances &lt;number&gt;'</span>, <span class="hljs-string">'launch [number] instances (for networked app)(load balanced)'</span>)
  .option(<span class="hljs-string">'-l --log [path]'</span>, <span class="hljs-string">'specify entire log file (error and out are both included)'</span>)
  .option(<span class="hljs-string">'-o --output &lt;path&gt;'</span>, <span class="hljs-string">'specify out log file'</span>)
  .option(<span class="hljs-string">'-e --error &lt;path&gt;'</span>, <span class="hljs-string">'specify error log file'</span>)
  .option(<span class="hljs-string">'-p --pid &lt;pid&gt;'</span>, <span class="hljs-string">'specify pid file'</span>)
  .option(<span class="hljs-string">'-k --kill-timeout &lt;delay&gt;'</span>, <span class="hljs-string">'delay before sending final SIGKILL signal to process'</span>)
  .option(<span class="hljs-string">'--listen-timeout &lt;delay&gt;'</span>, <span class="hljs-string">'listen timeout on application reload'</span>)
  .option(<span class="hljs-string">'--max-memory-restart &lt;memory&gt;'</span>, <span class="hljs-string">'specify max memory amount used to autorestart (in octet or use syntax like 100M)'</span>)
  .option(<span class="hljs-string">'--restart-delay &lt;delay&gt;'</span>, <span class="hljs-string">'specify a delay between restarts (in milliseconds)'</span>)
  .option(<span class="hljs-string">'--env &lt;environment_name&gt;'</span>, <span class="hljs-string">'specify environment to get specific env variables (for JSON declaration)'</span>)
  .option(<span class="hljs-string">'--log-type &lt;type&gt;'</span>, <span class="hljs-string">'specify log output style (raw by default, json optional)'</span>)
  .option(<span class="hljs-string">'-x --execute-command'</span>, <span class="hljs-string">'execute a program using fork system'</span>)
  .option(<span class="hljs-string">'--max-restarts [count]'</span>, <span class="hljs-string">'only restart the script COUNT times'</span>)
  .option(<span class="hljs-string">'-u --user &lt;username&gt;'</span>, <span class="hljs-string">'define user when generating startup script'</span>)
  .option(<span class="hljs-string">'--hp &lt;home path&gt;'</span>, <span class="hljs-string">'define home path when generating startup script'</span>)
  .option(<span class="hljs-string">'-c --cron &lt;cron_pattern&gt;'</span>, <span class="hljs-string">'restart a running process based on a cron pattern'</span>)
  .option(<span class="hljs-string">'-w --write'</span>, <span class="hljs-string">'write configuration in local folder'</span>)
  .option(<span class="hljs-string">'--interpreter &lt;interpreter&gt;'</span>, <span class="hljs-string">'the interpreter pm2 should use for executing app (bash, python...)'</span>)
  .option(<span class="hljs-string">'--interpreter-args &lt;arguments&gt;'</span>, <span class="hljs-string">'interpret options (alias of --node-args)'</span>)
  .option(<span class="hljs-string">'--log-date-format &lt;momentjs format&gt;'</span>, <span class="hljs-string">'add custom prefix timestamp to logs'</span>)
  .option(<span class="hljs-string">'--no-daemon'</span>, <span class="hljs-string">'run pm2 daemon in the foreground if it doesn\'t exist already'</span>)
  .option(<span class="hljs-string">'-a --update-env'</span>, <span class="hljs-string">'update environmnent on restart/reload (-a &lt;=&gt; apply)'</span>)
  .option(<span class="hljs-string">'--source-map-support'</span>, <span class="hljs-string">'force source map support'</span>)
  .option(<span class="hljs-string">'--only &lt;application-name&gt;'</span>, <span class="hljs-string">'with json declaration, allow to only act on one application'</span>)
  .option(<span class="hljs-string">'--disable-source-map-support'</span>, <span class="hljs-string">'force source map support'</span>)
  .option(<span class="hljs-string">'--wait-ready'</span>, <span class="hljs-string">'ask pm2 to wait for ready event from your app'</span>)
  .option(<span class="hljs-string">'--merge-logs'</span>, <span class="hljs-string">'merge logs from different instances but keep error and out separated'</span>)
  .option(<span class="hljs-string">'--watch [paths]'</span>, <span class="hljs-string">'watch application folder for changes'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v, m</span>) </span>{ m.push(v); <span class="hljs-keyword">return</span> m;}, [])
  .option(<span class="hljs-string">'--ignore-watch &lt;folders|files&gt;'</span>, <span class="hljs-string">'folder/files to be ignored watching, chould be a specific name or regex - e.g. --ignore-watch="test node_modules \"some scripts\""'</span>)
  .option(<span class="hljs-string">'--node-args &lt;node_args&gt;'</span>, <span class="hljs-string">'space delimited arguments to pass to node in cluster mode - e.g. --node-args="--debug=7001 --trace-deprecation"'</span>)
  .option(<span class="hljs-string">'--no-color'</span>, <span class="hljs-string">'skip colors'</span>)
  .option(<span class="hljs-string">'--no-vizion'</span>, <span class="hljs-string">'start an app without vizion feature (versioning control)'</span>)
  .option(<span class="hljs-string">'--no-autorestart'</span>, <span class="hljs-string">'start an app without automatic restart'</span>)
  .option(<span class="hljs-string">'--no-treekill'</span>, <span class="hljs-string">'Only kill the main process, not detached children'</span>)
  .option(<span class="hljs-string">'--no-pmx'</span>, <span class="hljs-string">'start an app without pmx'</span>)
  .option(<span class="hljs-string">'--no-automation'</span>, <span class="hljs-string">'start an app without pmx'</span>)
  .option(<span class="hljs-string">'--trace'</span>, <span class="hljs-string">'enable transaction tracing with km'</span>)
  .option(<span class="hljs-string">'--disable-trace'</span>, <span class="hljs-string">'disable transaction tracing with km'</span>)
  .option(<span class="hljs-string">'--attach'</span>, <span class="hljs-string">'attach logging after your start/restart/stop/reload'</span>)
  .usage(<span class="hljs-string">'[cmd] app'</span>);

commander.on(<span class="hljs-string">'--help'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'  Basic Examples:'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    Start an app using all CPUs available + set a name :'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ pm2 start app.js -i 0 --name "api"'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    Restart the previous app launched, by name :'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ pm2 restart api'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    Stop the app :'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ pm2 stop api'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    Restart the app that is stopped :'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ pm2 restart api'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    Remove the app from the process list :'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ pm2 delete api'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    Kill daemon pm2 :'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ pm2 kill'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    Update pm2 :'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ npm install pm2@latest -g ; pm2 update'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    More examples in https://github.com/Unitech/pm2#usagefeatures'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'  Deployment help:'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'    $ pm2 deploy help'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
});

<span class="hljs-keyword">if</span> (process.argv.indexOf(<span class="hljs-string">'-s'</span>) &gt; <span class="hljs-number">-1</span>) {
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> <span class="hljs-built_in">console</span>){
    <span class="hljs-keyword">var</span> code = key.charCodeAt(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span>(code &gt;= <span class="hljs-number">97</span> &amp;&amp; code &lt;= <span class="hljs-number">122</span>){
      <span class="hljs-built_in">console</span>[key] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{};
    }
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beginCommandProcessing</span>(<span class="hljs-params"></span>) </span>{
  pm2.getVersion(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, remote_version</span>) </span>{
    <span class="hljs-keyword">if</span> (!err &amp;&amp; (pkg.version != remote_version)) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
      <span class="hljs-built_in">console</span>.log(chalk.red.bold(<span class="hljs-string">'&gt;&gt;&gt;&gt; In-memory PM2 is out-of-date, do:\n&gt;&gt;&gt;&gt; $ pm2 update'</span>));
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'In memory PM2 version:'</span>, chalk.blue.bold(remote_version));
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Local PM2 version:'</span>, chalk.blue.bold(pkg.version));
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
    }
  });
  commander.parse(process.argv);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkCompletion</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">return</span> tabtab.complete(<span class="hljs-string">'pm2'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
    <span class="hljs-keyword">if</span>(err || !data) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/^--\w?/</span>.test(data.last)) <span class="hljs-keyword">return</span> tabtab.log(commander.options.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
      <span class="hljs-keyword">return</span> data.long;
    }), data);
    <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/^-\w?/</span>.test(data.last)) <span class="hljs-keyword">return</span> tabtab.log(commander.options.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
      <span class="hljs-keyword">return</span> data.short;
    }), data);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>array containing commands after which process name should be listed</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> cmdProcess = [<span class="hljs-string">'stop'</span>, <span class="hljs-string">'restart'</span>, <span class="hljs-string">'scale'</span>, <span class="hljs-string">'reload'</span>, <span class="hljs-string">'gracefulReload'</span>, <span class="hljs-string">'delete'</span>, <span class="hljs-string">'reset'</span>, <span class="hljs-string">'pull'</span>, <span class="hljs-string">'forward'</span>, <span class="hljs-string">'backward'</span>, <span class="hljs-string">'logs'</span>, <span class="hljs-string">'describe'</span>, <span class="hljs-string">'desc'</span>, <span class="hljs-string">'show'</span>];

    <span class="hljs-keyword">if</span> (cmdProcess.indexOf(data.prev) &gt; <span class="hljs-number">-1</span>) {
      pm2.list(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, list</span>)</span>{
        tabtab.log(list.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>)</span>{ <span class="hljs-keyword">return</span> el.name }), data);
        pm2.disconnect();
      });
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.prev == <span class="hljs-string">'pm2'</span>) {
      tabtab.log(commander.commands.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
        <span class="hljs-keyword">return</span> data._name;
      }), data);
      pm2.disconnect();
    }
    <span class="hljs-keyword">else</span>
      pm2.disconnect();
  });
};

<span class="hljs-keyword">var</span> _arr = process.argv.indexOf(<span class="hljs-string">'--'</span>) &gt; <span class="hljs-number">-1</span> ? process.argv.slice(<span class="hljs-number">0</span>, process.argv.indexOf(<span class="hljs-string">'--'</span>)) : process.argv;

<span class="hljs-keyword">if</span> (_arr.indexOf(<span class="hljs-string">'log'</span>) &gt; <span class="hljs-number">-1</span>) {
  process.argv[_arr.indexOf(<span class="hljs-string">'log'</span>)] = <span class="hljs-string">'logs'</span>;
}

<span class="hljs-keyword">if</span> (_arr.indexOf(<span class="hljs-string">'--no-daemon'</span>) &gt; <span class="hljs-number">-1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>Start daemon if it does not exist</p>
<p>Function checks if --no-daemon option is present,
and starts daemon in the same process if it does not exists</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'pm2 launched in no-daemon mode (you can add DEBUG="*" env variable to get more messages)'</span>);

  <span class="hljs-keyword">var</span> pm2NoDaeamon = <span class="hljs-keyword">new</span> PM2({
    <span class="hljs-attr">daemon_mode</span> : <span class="hljs-literal">false</span>
  });

  pm2NoDaeamon.connect(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2 = pm2NoDaeamon;
    beginCommandProcessing();
  });

}
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_arr.indexOf(<span class="hljs-string">'startup'</span>) &gt; <span class="hljs-number">-1</span> || _arr.indexOf(<span class="hljs-string">'unstartup'</span>) &gt; <span class="hljs-number">-1</span>) {
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    commander.parse(process.argv);
  }, <span class="hljs-number">100</span>);
}
<span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>HERE we instanciate the Client object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  pm2.connect(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    debug(<span class="hljs-string">'Now connected to daemon'</span>);
    <span class="hljs-keyword">if</span> (process.argv.slice(<span class="hljs-number">2</span>)[<span class="hljs-number">0</span>] === <span class="hljs-string">'completion'</span>) {
      checkCompletion();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Close client if completion related installation</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> third = process.argv.slice(<span class="hljs-number">3</span>)[<span class="hljs-number">0</span>];
      <span class="hljs-keyword">if</span> ( third == <span class="hljs-literal">null</span> || third === <span class="hljs-string">'install'</span> || third === <span class="hljs-string">'uninstall'</span>)
        pm2.disconnect();
    }
    <span class="hljs-keyword">else</span> {
      beginCommandProcessing();
    }
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>Helper function to fail when unknown command arguments are passed</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">failOnUnknown</span>(<span class="hljs-params">fn</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>) {
      <span class="hljs-built_in">console</span>.log(cst.PREFIX_MSG + <span class="hljs-string">'\nUnknown command argument: '</span> + arg);
      commander.outputHelp();
      process.exit(cst.ERROR_EXIT);
    }
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  };
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">patchCommanderArg</span>(<span class="hljs-params">cmd</span>) </span>{
  <span class="hljs-keyword">var</span> argsIndex;
  <span class="hljs-keyword">if</span> ((argsIndex = commander.rawArgs.indexOf(<span class="hljs-string">'--'</span>)) &gt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">var</span> optargs = commander.rawArgs.slice(argsIndex + <span class="hljs-number">1</span>);
    cmd = cmd.slice(<span class="hljs-number">0</span>, cmd.indexOf(optargs[<span class="hljs-number">0</span>]));
  }
  <span class="hljs-keyword">return</span> cmd;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>Start command</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'start &lt;file|json|stdin|app_name|pm_id...&gt;'</span>)
  .option(<span class="hljs-string">'--watch'</span>, <span class="hljs-string">'Watch folder for changes'</span>)
  .description(<span class="hljs-string">'start and daemonize an app'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cmd</span>) </span>{
    <span class="hljs-keyword">if</span> (cmd == <span class="hljs-string">"-"</span>) {
      process.stdin.resume();
      process.stdin.setEncoding(<span class="hljs-string">'utf8'</span>);
      process.stdin.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cmd</span>) </span>{
        process.stdin.pause();
        pm2._startJson(cmd, commander, <span class="hljs-string">'restartProcessId'</span>, <span class="hljs-string">'pipe'</span>);
      });
    }
    <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>Commander.js patch</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      cmd = patchCommanderArg(cmd);
      <span class="hljs-keyword">async</span>.forEachLimit(cmd, <span class="hljs-number">1</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">script, next</span>) </span>{
        pm2.start(script, commander, next);
      }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
        pm2.speedList(err ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);
      });
    }
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>Docker mode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'docker:gen &lt;file|config&gt;'</span>)
  .description(<span class="hljs-string">'generate Dockerfile in current folder'</span>)
  .option(<span class="hljs-string">'--force'</span>, <span class="hljs-string">'Force regeneration of Dockerfile'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">script, opts</span>) </span>{
    pm2.generateDockerfile(script, commander);
  });

commander.command(<span class="hljs-string">'docker:dev &lt;file|config&gt;'</span>)
  .option(<span class="hljs-string">'--fresh'</span>, <span class="hljs-string">'Rebuild Dockerfile'</span>)
  .option(<span class="hljs-string">'--daemon'</span>, <span class="hljs-string">'Run container in Daemon mode (debug purposes)'</span>)
  .description(<span class="hljs-string">'wrap application into Docker container'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">script, opts</span>) </span>{
    pm2.dockerMode(script, opts, <span class="hljs-string">'development'</span>);
  });

commander.command(<span class="hljs-string">'docker:dist &lt;file|config&gt; &lt;image_name&gt;'</span>)
  .option(<span class="hljs-string">'--fresh'</span>, <span class="hljs-string">'Rebuild Dockerfile'</span>)
  .option(<span class="hljs-string">'--daemon'</span>, <span class="hljs-string">'Run container in Daemon mode (debug purposes)'</span>)
  .description(<span class="hljs-string">'wrap application into Docker container'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">script, image_name, opts</span>) </span>{
    opts.imageName = image_name;
    pm2.dockerMode(script, opts, <span class="hljs-string">'distribution'</span>);
  });

commander.command(<span class="hljs-string">'trigger &lt;proc_name&gt; &lt;action_name&gt; [params]'</span>)
  .description(<span class="hljs-string">'deploy your json'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pm_id, action_name, params</span>) </span>{
    pm2.trigger(pm_id, action_name, params);
  });

commander.command(<span class="hljs-string">'deploy &lt;file|environment&gt;'</span>)
  .description(<span class="hljs-string">'deploy your json'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cmd</span>) </span>{
    pm2.deploy(cmd, commander);
  });

commander.command(<span class="hljs-string">'startOrRestart &lt;json&gt;'</span>)
  .description(<span class="hljs-string">'start or restart JSON file'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
    pm2._startJson(file, commander, <span class="hljs-string">'restartProcessId'</span>);
  });

commander.command(<span class="hljs-string">'startOrReload &lt;json&gt;'</span>)
  .description(<span class="hljs-string">'start or gracefully reload JSON file'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
    pm2._startJson(file, commander, <span class="hljs-string">'reloadProcessId'</span>);
  });

commander.command(<span class="hljs-string">'startOrGracefulReload &lt;json&gt;'</span>)
  .description(<span class="hljs-string">'start or gracefully reload JSON file'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
    pm2._startJson(file, commander, <span class="hljs-string">'softReloadProcessId'</span>);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>Stop specific id</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'stop &lt;id|name|all|json|stdin...&gt;'</span>)
  .option(<span class="hljs-string">'--watch'</span>, <span class="hljs-string">'Stop watching folder for changes'</span>)
  .description(<span class="hljs-string">'stop a process (to start it again, do pm2 restart &lt;app&gt;)'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">param</span>) </span>{
    <span class="hljs-keyword">async</span>.forEachLimit(param, <span class="hljs-number">1</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">script, next</span>) </span>{
      pm2.stop(script, next);
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      pm2.speedList(err ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);
    });
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>Stop All processes</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'restart &lt;id|name|all|json|stdin...&gt;'</span>)
  .option(<span class="hljs-string">'--watch'</span>, <span class="hljs-string">'Toggle watching folder for changes'</span>)
  .description(<span class="hljs-string">'restart a process'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">param</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>Commander.js patch</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    param = patchCommanderArg(param);
    <span class="hljs-keyword">async</span>.forEachLimit(param, <span class="hljs-number">1</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">script, next</span>) </span>{
      pm2.restart(script, commander, next);
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
      pm2.speedList(err ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);
    });
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>Scale up/down a process in cluster mode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'scale &lt;app_name&gt; &lt;number&gt;'</span>)
  .description(<span class="hljs-string">'scale up/down a process in cluster mode depending on total_number param'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">app_name, number</span>) </span>{
    pm2.scale(app_name, number);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>snapshot PM2</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'snapshot'</span>)
  .description(<span class="hljs-string">'snapshot PM2 memory'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.snapshotPM2();
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>snapshot PM2</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'profile &lt;command&gt;'</span>)
  .description(<span class="hljs-string">'profile CPU'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">command</span>) </span>{
    pm2.profilePM2(command);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>Reload process(es)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'reload &lt;name|all&gt;'</span>)
  .description(<span class="hljs-string">'reload processes (note that its for app using HTTP/HTTPS)'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pm2_id</span>) </span>{
    pm2.reload(pm2_id, commander);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Reload process(es)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'gracefulReload &lt;name|all&gt;'</span>)
  .description(<span class="hljs-string">'gracefully reload a process. Send a "shutdown" message to close all connections.'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pm2_id</span>) </span>{
    pm2.gracefulReload(pm2_id, commander);
  });

commander.command(<span class="hljs-string">'id &lt;name&gt;'</span>)
  .description(<span class="hljs-string">'get process id by name'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
    pm2.getProcessIdByName(name);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>Stop and delete a process by name from database</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'delete &lt;name|id|script|all|json|stdin...&gt;'</span>)
  .description(<span class="hljs-string">'stop and delete a process from pm2 process list'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">if</span> (name == <span class="hljs-string">"-"</span>) {
      process.stdin.resume();
      process.stdin.setEncoding(<span class="hljs-string">'utf8'</span>);
      process.stdin.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">param</span>) </span>{
        process.stdin.pause();
        pm2.delete(param, <span class="hljs-string">'pipe'</span>);
      });
    } <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">async</span>.forEachLimit(name, <span class="hljs-number">1</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">script, next</span>) </span>{
        pm2.delete(script,<span class="hljs-string">''</span>, next);
      }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
        pm2.speedList(err ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);
      });
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>Send system signal to process</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'sendSignal &lt;signal&gt; &lt;pm2_id|name&gt;'</span>)
  .description(<span class="hljs-string">'send a system signal to the target process'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">signal, pm2_id</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseInt</span>(pm2_id))) {
      <span class="hljs-built_in">console</span>.log(cst.PREFIX_MSG + <span class="hljs-string">'Sending signal to process name '</span> + pm2_id);
      pm2.sendSignalToProcessName(signal, pm2_id);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.log(cst.PREFIX_MSG + <span class="hljs-string">'Sending signal to process id '</span> + pm2_id);
      pm2.sendSignalToProcessId(signal, pm2_id);
    }
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>Stop and delete a process by name from database</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'ping'</span>)
  .description(<span class="hljs-string">'ping pm2 daemon - if not up it will launch it'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.ping();
  });

commander.command(<span class="hljs-string">'updatePM2'</span>)
  .description(<span class="hljs-string">'update in-memory PM2 with local PM2'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.update();
  });
commander.command(<span class="hljs-string">'update'</span>)
  .description(<span class="hljs-string">'(alias) update in-memory PM2 with local PM2'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.update();
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module specifics</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'install &lt;module|git:// url&gt;'</span>)
  .alias(<span class="hljs-string">'module:install'</span>)
  .description(<span class="hljs-string">'install or update a module and run it forever'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">plugin_name</span>) </span>{
    pm2.install(plugin_name);
  });

commander.command(<span class="hljs-string">'module:update &lt;module|git:// url&gt;'</span>)
  .description(<span class="hljs-string">'update a module and run it forever'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">plugin_name</span>) </span>{
    pm2.install(plugin_name);
  });


commander.command(<span class="hljs-string">'module:generate [app_name]'</span>)
  .description(<span class="hljs-string">'Generate a sample module in current folder'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">app_name</span>) </span>{
    pm2.generateModuleSample(app_name);
  });

commander.command(<span class="hljs-string">'uninstall &lt;module&gt;'</span>)
  .alias(<span class="hljs-string">'module:uninstall'</span>)
  .description(<span class="hljs-string">'stop and uninstall a module'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">plugin_name</span>) </span>{
    pm2.uninstall(plugin_name);
  });


commander.command(<span class="hljs-string">'publish'</span>)
  .alias(<span class="hljs-string">'module:publish'</span>)
  .description(<span class="hljs-string">'Publish the module you are currently on'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.publish();
  });

commander.command(<span class="hljs-string">'set &lt;key&gt; &lt;value&gt;'</span>)
  .description(<span class="hljs-string">'sets the specified config &lt;key&gt; &lt;value&gt;'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
    pm2.set(key, value);
  });

commander.command(<span class="hljs-string">'multiset &lt;value&gt;'</span>)
  .description(<span class="hljs-string">'multiset eg "key1 val1 key2 val2'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">str</span>) </span>{
    pm2.multiset(str);
  });

commander.command(<span class="hljs-string">'get [key]'</span>)
  .description(<span class="hljs-string">'get value for &lt;key&gt;'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
    pm2.get(key);
  });

commander.command(<span class="hljs-string">'conf [key] [value]'</span>)
  .description(<span class="hljs-string">'get / set module config values'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
    pm2.conf(key, value);
  });

commander.command(<span class="hljs-string">'config &lt;key&gt; [value]'</span>)
  .description(<span class="hljs-string">'get / set module config values'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
    pm2.conf(key, value);
  });

commander.command(<span class="hljs-string">'unset &lt;key&gt;'</span>)
  .description(<span class="hljs-string">'clears the specified config &lt;key&gt;'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
    pm2.unset(key);
  });

commander.command(<span class="hljs-string">'link [secret_key|command] [public_key] [machine_name]'</span>)
  .alias(<span class="hljs-string">'interact'</span>)
  .option(<span class="hljs-string">'--info-node [url]'</span>, <span class="hljs-string">'set url info node'</span>)
  .description(<span class="hljs-string">'linking action to keymetrics.io - command can be stop|info|delete|restart'</span>)
  .action(pm2._pre_interact.bind(pm2));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>Web interface</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'web'</span>)
  .description(<span class="hljs-string">'launch a health API on '</span> + cst.WEB_IPADDR + <span class="hljs-string">':'</span> + cst.WEB_PORT)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Launching web interface on '</span> + cst.WEB_IPADDR + <span class="hljs-string">':'</span> + cst.WEB_PORT);
    pm2.web();
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>Save processes to file</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'dump'</span>)
  .alias(<span class="hljs-string">'save'</span>)
  .description(<span class="hljs-string">'dump all processes for resurrecting them later'</span>)
  .action(failOnUnknown(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.dump();
  }));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>Resurrect</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'resurrect'</span>)
  .description(<span class="hljs-string">'resurrect previously dumped processes'</span>)
  .action(failOnUnknown(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(cst.PREFIX_MSG + <span class="hljs-string">'Resurrecting'</span>);
    pm2.resurrect();
  }));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>Set pm2 to startup</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'unstartup [platform]'</span>)
  .description(<span class="hljs-string">'disable and clear auto startup - [platform]=systemd,upstart,launchd,rcd'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">platform</span>) </span>{
    pm2.uninstallStartup(platform, commander);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>Set pm2 to startup</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'startup [platform]'</span>)
  .description(<span class="hljs-string">'setup script for pm2 at boot - [platform]=systemd,upstart,launchd,rcd'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">platform</span>) </span>{
    pm2.startup(platform, commander);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>Logrotate</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'logrotate'</span>)
  .description(<span class="hljs-string">'copy default logrotate configuration'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cmd</span>) </span>{
    pm2.logrotate(commander);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>Sample generate</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
commander.command(<span class="hljs-string">'ecosystem [mode]'</span>)
  .alias(<span class="hljs-string">'generate'</span>)
  .description(<span class="hljs-string">'generate a process conf file. (mode = null or simple)'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">mode</span>) </span>{
    pm2.generateSample(mode);
  });

commander.command(<span class="hljs-string">'reset &lt;name|id|all&gt;'</span>)
  .description(<span class="hljs-string">'reset counters for process'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proc_id</span>) </span>{
    pm2.reset(proc_id);
  });

commander.command(<span class="hljs-string">'describe &lt;id&gt;'</span>)
  .description(<span class="hljs-string">'describe all parameters of a process id'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proc_id</span>) </span>{
    pm2.describe(proc_id);
  });

commander.command(<span class="hljs-string">'desc &lt;id&gt;'</span>)
  .description(<span class="hljs-string">'(alias) describe all parameters of a process id'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proc_id</span>) </span>{
    pm2.describe(proc_id);
  });

commander.command(<span class="hljs-string">'info &lt;id&gt;'</span>)
  .description(<span class="hljs-string">'(alias) describe all parameters of a process id'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proc_id</span>) </span>{
    pm2.describe(proc_id);
  });

commander.command(<span class="hljs-string">'show &lt;id&gt;'</span>)
  .description(<span class="hljs-string">'(alias) describe all parameters of a process id'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proc_id</span>) </span>{
    pm2.describe(proc_id);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>List command</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander
  .command(<span class="hljs-string">'list'</span>)
  .alias(<span class="hljs-string">'ls'</span>)
  .description(<span class="hljs-string">'list all processes'</span>)
  .option(<span class="hljs-string">'--watch'</span>, <span class="hljs-string">'constant refresh of process listing'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.list(commander)
  });

commander.command(<span class="hljs-string">'l'</span>)
  .description(<span class="hljs-string">'(alias) list all processes'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.list()
  });

commander.command(<span class="hljs-string">'status'</span>)
  .description(<span class="hljs-string">'(alias) list all processes'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.list()
  });


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<p>List in raw json</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'jlist'</span>)
  .description(<span class="hljs-string">'list all processes in JSON format'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.jlist()
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>List in prettified Json</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'prettylist'</span>)
  .description(<span class="hljs-string">'print json in a prettified JSON'</span>)
  .action(failOnUnknown(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.jlist(<span class="hljs-literal">true</span>);
  }));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>Dashboard command</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'monit'</span>)
  .alias(<span class="hljs-string">'m'</span>)
  .description(<span class="hljs-string">'launch termcaps monitoring'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.dashboard();
  });

commander.command(<span class="hljs-string">'imonit'</span>)
  .description(<span class="hljs-string">'launch legacy termcaps monitoring'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.monit();
  });

commander.command(<span class="hljs-string">'dashboard'</span>)
  .alias(<span class="hljs-string">'dash'</span>)
  .description(<span class="hljs-string">'launch dashboard with monitoring and logs'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.dashboard();
  });


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>Flushing command</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'flush'</span>)
  .description(<span class="hljs-string">'flush logs'</span>)
  .action(failOnUnknown(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.flush();
  }));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>Reload all logs</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'reloadLogs'</span>)
  .description(<span class="hljs-string">'reload all logs'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.reloadLogs();
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>Log streaming</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'logs [id|name]'</span>)
  .option(<span class="hljs-string">'--json'</span>, <span class="hljs-string">'json log output'</span>)
  .option(<span class="hljs-string">'--format'</span>, <span class="hljs-string">'formated log output'</span>)
  .option(<span class="hljs-string">'--raw'</span>, <span class="hljs-string">'raw output'</span>)
  .option(<span class="hljs-string">'--err'</span>, <span class="hljs-string">'only shows error output'</span>)
  .option(<span class="hljs-string">'--out'</span>, <span class="hljs-string">'only shows standard output'</span>)
  .option(<span class="hljs-string">'--lines &lt;n&gt;'</span>, <span class="hljs-string">'output the last N lines, instead of the last 15 by default'</span>)
  .option(<span class="hljs-string">'--timestamp [format]'</span>, <span class="hljs-string">'add timestamps (default format YYYY-MM-DD-HH:mm:ss)'</span>)
  .option(<span class="hljs-string">'--nostream'</span>, <span class="hljs-string">'print logs without lauching the log stream'</span>)
  .description(<span class="hljs-string">'stream logs file. Default stream all logs'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, cmd</span>) </span>{
    <span class="hljs-keyword">var</span> Logs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lib/API/Log.js'</span>);

    <span class="hljs-keyword">if</span> (!id) id = <span class="hljs-string">'all'</span>;

    <span class="hljs-keyword">var</span> line = <span class="hljs-number">15</span>;
    <span class="hljs-keyword">var</span> raw  = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> exclusive = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">var</span> timestamp = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">isNaN</span>(cmd.lines)){
      line = <span class="hljs-built_in">parseInt</span>(cmd.lines);
    }

    <span class="hljs-keyword">if</span> (cmd.parent.rawArgs.indexOf(<span class="hljs-string">'--raw'</span>) !== <span class="hljs-number">-1</span>)
      raw = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (cmd.timestamp)
      timestamp = <span class="hljs-keyword">typeof</span> cmd.timestamp === <span class="hljs-string">'string'</span> ? cmd.timestamp : <span class="hljs-string">'YYYY-MM-DD-HH:mm:ss'</span>;

    <span class="hljs-keyword">if</span> (cmd.out === <span class="hljs-literal">true</span>)
      exclusive = <span class="hljs-string">'out'</span>;

    <span class="hljs-keyword">if</span> (cmd.err === <span class="hljs-literal">true</span>)
      exclusive = <span class="hljs-string">'err'</span>;

    <span class="hljs-keyword">if</span> (cmd.nostream === <span class="hljs-literal">true</span>)
      pm2.printLogs(id, line, raw, timestamp, exclusive);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd.json === <span class="hljs-literal">true</span>)
      Logs.jsonStream(pm2.Client, id);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd.format === <span class="hljs-literal">true</span>)
      Logs.formatStream(pm2.Client, id, <span class="hljs-literal">false</span>, <span class="hljs-string">'YYYY-MM-DD-HH:mm:ssZZ'</span>);
    <span class="hljs-keyword">else</span>
      pm2.streamLogs(id, line, raw, timestamp, exclusive);
  });


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>Kill</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'kill'</span>)
  .description(<span class="hljs-string">'kill daemon'</span>)
  .action(failOnUnknown(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
    pm2.killDaemon(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      process.exit(cst.SUCCESS_EXIT);
    });
  }));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>Update repository for a given app</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
commander.command(<span class="hljs-string">'pull &lt;name&gt; [commit_id]'</span>)
  .description(<span class="hljs-string">'updates repository for a given app'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pm2_name, commit_id</span>) </span>{

    <span class="hljs-keyword">if</span> (commit_id !== <span class="hljs-literal">undefined</span>) {
      pm2._pullCommitId({
        <span class="hljs-attr">pm2_name</span>: pm2_name,
        <span class="hljs-attr">commit_id</span>: commit_id
      });
    }
    <span class="hljs-keyword">else</span>
      pm2.pullAndRestart(pm2_name);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<p>Update repository to the next commit for a given app</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'forward &lt;name&gt;'</span>)
  .description(<span class="hljs-string">'updates repository to the next commit for a given app'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pm2_name</span>) </span>{
    pm2.forward(pm2_name);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<p>Downgrade repository to the previous commit for a given app</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'backward &lt;name&gt;'</span>)
  .description(<span class="hljs-string">'downgrades repository to the previous commit for a given app'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pm2_name</span>) </span>{
    pm2.backward(pm2_name);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<p>Force PM2 to trigger garbage collection</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'gc'</span>)
  .description(<span class="hljs-string">'force PM2 to trigger garbage collection'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.forceGc();
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<p>Perform a deep update of PM2</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'deepUpdate'</span>)
  .description(<span class="hljs-string">'performs a deep update of PM2'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    pm2.deepUpdate();
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<p>Launch a http server that expose a given path on given port</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'serve [path] [port]'</span>)
  .alias(<span class="hljs-string">'expose'</span>)
  .description(<span class="hljs-string">'serve a directory over http via port'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path, port</span>) </span>{
    pm2.serve(path, port, commander);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<p>Catch all</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">commander.command(<span class="hljs-string">'*'</span>)
  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(cst.PREFIX_MSG + <span class="hljs-string">'\nCommand not found'</span>);
    commander.outputHelp();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<p>Check if it does not forget to close fds from RPC</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    process.exit(cst.ERROR_EXIT);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<p>Display help if 0 arguments passed to pm2</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">if</span> (process.argv.length == <span class="hljs-number">2</span>) {
  commander.parse(process.argv);
  commander.outputHelp();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p>Check if it does not forget to close fds from RPC</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  process.exit(cst.ERROR_EXIT);
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
