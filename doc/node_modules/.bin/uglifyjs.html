<!DOCTYPE html>
<html>
<head>
  <title>uglifyjs</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/uglifyjs";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>uglifyjs</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>-<em>- js -</em>-</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
global.sys = <span class="hljs-built_in">require</span>(<span class="hljs-regexp">/^v0\.[012]/</span>.test(process.version) ? <span class="hljs-string">"sys"</span> : <span class="hljs-string">"util"</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">var</span> uglify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"uglify-js"</span>), <span class="hljs-comment">// symlink ~/.node_libraries/uglify-js.js to ../uglify-js.js</span>
    consolidator = uglify.consolidator,
    jsp = uglify.parser,
    pro = uglify.uglify;

<span class="hljs-keyword">var</span> options = {
        <span class="hljs-attr">ast</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">consolidate</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">mangle</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">mangle_toplevel</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">no_mangle_functions</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">squeeze</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">make_seqs</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">dead_code</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">verbose</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">show_copyright</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">out_same_file</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">max_line_length</span>: <span class="hljs-number">32</span> * <span class="hljs-number">1024</span>,
        <span class="hljs-attr">unsafe</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">reserved_names</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">defines</span>: { },
        <span class="hljs-attr">lift_vars</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">codegen_options</span>: {
                <span class="hljs-attr">ascii_only</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">beautify</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">indent_level</span>: <span class="hljs-number">4</span>,
                <span class="hljs-attr">indent_start</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">quote_keys</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">space_colon</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">inline_script</span>: <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">make</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-literal">true</span>            <span class="hljs-comment">// stdout</span>
};

<span class="hljs-keyword">var</span> args = jsp.slice(process.argv, <span class="hljs-number">2</span>);
<span class="hljs-keyword">var</span> filename;

out: <span class="hljs-keyword">while</span> (args.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> v = args.shift();
        <span class="hljs-keyword">switch</span> (v) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-b"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--beautify"</span>:
                options.codegen_options.beautify = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-c"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--consolidate-primitive-values"</span>:
                options.consolidate = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-i"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--indent"</span>:
                options.codegen_options.indent_level = args.shift();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-q"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--quote-keys"</span>:
                options.codegen_options.quote_keys = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-mt"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--mangle-toplevel"</span>:
                options.mangle_toplevel = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-nmf"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--no-mangle-functions"</span>:
                options.no_mangle_functions = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--no-mangle"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-nm"</span>:
                options.mangle = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--no-squeeze"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-ns"</span>:
                options.squeeze = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--no-seqs"</span>:
                options.make_seqs = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--no-dead-code"</span>:
                options.dead_code = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--no-copyright"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-nc"</span>:
                options.show_copyright = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-o"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--output"</span>:
                options.output = args.shift();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--overwrite"</span>:
                options.out_same_file = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-v"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--verbose"</span>:
                options.verbose = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--ast"</span>:
                options.ast = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--unsafe"</span>:
                options.unsafe = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--max-line-len"</span>:
                options.max_line_length = <span class="hljs-built_in">parseInt</span>(args.shift(), <span class="hljs-number">10</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--reserved-names"</span>:
                options.reserved_names = args.shift().split(<span class="hljs-string">","</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--lift-vars"</span>:
                options.lift_vars = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-d"</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--define"</span>:
                 <span class="hljs-keyword">var</span> defarg = args.shift();
                 <span class="hljs-keyword">try</span> {
                     <span class="hljs-keyword">var</span> defsym = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sym</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>KEYWORDS_ATOM doesn't include NaN or Infinity - should we check
for them too ?? We don't check reserved words and the like as the
define values are only substituted AFTER parsing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                             <span class="hljs-keyword">if</span> (jsp.KEYWORDS_ATOM.hasOwnProperty(sym)) {
                                 <span class="hljs-keyword">throw</span> <span class="hljs-string">"Don't define values for inbuilt constant '"</span>+sym+<span class="hljs-string">"'"</span>;
                             }
                             <span class="hljs-keyword">return</span> sym;
                         },
                         defval = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
                             <span class="hljs-keyword">if</span> (v.match(<span class="hljs-regexp">/^"(.*)"$/</span>) || v.match(<span class="hljs-regexp">/^'(.*)'$/</span>)) {
                                 <span class="hljs-keyword">return</span> [ <span class="hljs-string">"string"</span>, <span class="hljs-built_in">RegExp</span>.$<span class="hljs-number">1</span> ];
                             }
                             <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseFloat</span>(v))) {
                                 <span class="hljs-keyword">return</span> [ <span class="hljs-string">"num"</span>, <span class="hljs-built_in">parseFloat</span>(v) ];
                             }
                             <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v.match(<span class="hljs-regexp">/^[a-z\$_][a-z\$_0-9]*$/i</span>)) {
                                 <span class="hljs-keyword">return</span> [ <span class="hljs-string">"name"</span>, v ];
                             }
                             <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!v.match(<span class="hljs-regexp">/"/</span>)) {
                                 <span class="hljs-keyword">return</span> [ <span class="hljs-string">"string"</span>, v ];
                             }
                             <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!v.match(<span class="hljs-regexp">/'/</span>)) {
                                 <span class="hljs-keyword">return</span> [ <span class="hljs-string">"string"</span>, v ];
                             }
                             <span class="hljs-keyword">throw</span> <span class="hljs-string">"Can't understand the specified value: "</span>+v;
                         };
                     <span class="hljs-keyword">if</span> (defarg.match(<span class="hljs-regexp">/^([a-z_\$][a-z_\$0-9]*)(=(.*))?$/i</span>)) {
                         <span class="hljs-keyword">var</span> sym = defsym(<span class="hljs-built_in">RegExp</span>.$<span class="hljs-number">1</span>),
                             val = <span class="hljs-built_in">RegExp</span>.$<span class="hljs-number">2</span> ? defval(<span class="hljs-built_in">RegExp</span>.$<span class="hljs-number">2.</span>substr(<span class="hljs-number">1</span>)) : [ <span class="hljs-string">'name'</span>, <span class="hljs-string">'true'</span> ];
                         options.defines[sym] = val;
                     }
                     <span class="hljs-keyword">else</span> {
                         <span class="hljs-keyword">throw</span> <span class="hljs-string">"The --define option expects SYMBOL[=value]"</span>;
                     }
                 } <span class="hljs-keyword">catch</span>(ex) {
                     sys.print(<span class="hljs-string">"ERROR: In option --define "</span>+defarg+<span class="hljs-string">"\n"</span>+ex+<span class="hljs-string">"\n"</span>);
                     process.exit(<span class="hljs-number">1</span>);
                 }
                 <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--define-from-module"</span>:
                <span class="hljs-keyword">var</span> defmodarg = args.shift(),
                    defmodule = <span class="hljs-built_in">require</span>(defmodarg),
                    sym,
                    val;
                <span class="hljs-keyword">for</span> (sym <span class="hljs-keyword">in</span> defmodule) {
                    <span class="hljs-keyword">if</span> (defmodule.hasOwnProperty(sym)) {
                        options.defines[sym] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
                            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val == <span class="hljs-string">"string"</span>)
                                <span class="hljs-keyword">return</span> [ <span class="hljs-string">"string"</span>, val ];
                            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val == <span class="hljs-string">"number"</span>)
                                <span class="hljs-keyword">return</span> [ <span class="hljs-string">"num"</span>, val ];
                            <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">true</span>)
                                <span class="hljs-keyword">return</span> [ <span class="hljs-string">'name'</span>, <span class="hljs-string">'true'</span> ];
                            <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">false</span>)
                                <span class="hljs-keyword">return</span> [ <span class="hljs-string">'name'</span>, <span class="hljs-string">'false'</span> ];
                            <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">null</span>)
                                <span class="hljs-keyword">return</span> [ <span class="hljs-string">'name'</span>, <span class="hljs-string">'null'</span> ];
                            <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">undefined</span>)
                                <span class="hljs-keyword">return</span> [ <span class="hljs-string">'name'</span>, <span class="hljs-string">'undefined'</span> ];
                            sys.print(<span class="hljs-string">"ERROR: In option --define-from-module "</span>+defmodarg+<span class="hljs-string">"\n"</span>);
                            sys.print(<span class="hljs-string">"ERROR: Unknown object type for: "</span>+sym+<span class="hljs-string">"="</span>+val+<span class="hljs-string">"\n"</span>);
                            process.exit(<span class="hljs-number">1</span>);
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                        }(defmodule[sym]);
                    }
                }
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--ascii"</span>:
                options.codegen_options.ascii_only = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--make"</span>:
                options.make = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"--inline-script"</span>:
                options.codegen_options.inline_script = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                filename = v;
                <span class="hljs-keyword">break</span> out;
        }
}

<span class="hljs-keyword">if</span> (options.verbose) {
        pro.set_logger(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>)</span>{
                sys.debug(msg);
        });
}

jsp.set_logger(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>)</span>{
        sys.debug(msg);
});

<span class="hljs-keyword">if</span> (options.make) {
        options.out_same_file = <span class="hljs-literal">false</span>; <span class="hljs-comment">// doesn't make sense in this case</span>
        <span class="hljs-keyword">var</span> makefile = <span class="hljs-built_in">JSON</span>.parse(fs.readFileSync(filename || <span class="hljs-string">"Makefile.uglify.js"</span>).toString());
        output(makefile.files.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>)</span>{
                <span class="hljs-keyword">var</span> code = fs.readFileSync(file.name);
                <span class="hljs-keyword">if</span> (file.module) {
                        code = <span class="hljs-string">"!function(exports, global){global = this;\n"</span> + code + <span class="hljs-string">"\n;this."</span> + file.module + <span class="hljs-string">" = exports;}({})"</span>;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (file.hide) {
                        code = <span class="hljs-string">"(function(){"</span> + code + <span class="hljs-string">"}());"</span>;
                }
                <span class="hljs-keyword">return</span> squeeze_it(code);
        }).join(<span class="hljs-string">"\n"</span>));
}
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (filename) {
        fs.readFile(filename, <span class="hljs-string">"utf8"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, text</span>)</span>{
                <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
                output(squeeze_it(text));
        });
}
<span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> stdin = process.openStdin();
        stdin.setEncoding(<span class="hljs-string">"utf8"</span>);
        <span class="hljs-keyword">var</span> text = <span class="hljs-string">""</span>;
        stdin.on(<span class="hljs-string">"data"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>)</span>{
                text += chunk;
        });
        stdin.on(<span class="hljs-string">"end"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                output(squeeze_it(text));
        });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">output</span>(<span class="hljs-params">text</span>) </span>{
        <span class="hljs-keyword">var</span> out;
        <span class="hljs-keyword">if</span> (options.out_same_file &amp;&amp; filename)
                options.output = filename;
        <span class="hljs-keyword">if</span> (options.output === <span class="hljs-literal">true</span>) {
                out = process.stdout;
        } <span class="hljs-keyword">else</span> {
                out = fs.createWriteStream(options.output, {
                        <span class="hljs-attr">flags</span>: <span class="hljs-string">"w"</span>,
                        <span class="hljs-attr">encoding</span>: <span class="hljs-string">"utf8"</span>,
                        <span class="hljs-attr">mode</span>: <span class="hljs-number">0644</span>
                });
        }
        out.write(text.replace(<span class="hljs-regexp">/;*$/</span>, <span class="hljs-string">";"</span>));
        <span class="hljs-keyword">if</span> (options.output !== <span class="hljs-literal">true</span>) {
                out.end();
        }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>--------- main ends here.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show_copyright</span>(<span class="hljs-params">comments</span>) </span>{
        <span class="hljs-keyword">var</span> ret = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; comments.length; ++i) {
                <span class="hljs-keyword">var</span> c = comments[i];
                <span class="hljs-keyword">if</span> (c.type == <span class="hljs-string">"comment1"</span>) {
                        ret += <span class="hljs-string">"//"</span> + c.value + <span class="hljs-string">"\n"</span>;
                } <span class="hljs-keyword">else</span> {
                        ret += <span class="hljs-string">"/*"</span> + c.value + <span class="hljs-string">"*/"</span>;
                }
        }
        <span class="hljs-keyword">return</span> ret;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">squeeze_it</span>(<span class="hljs-params">code</span>) </span>{
        <span class="hljs-keyword">var</span> result = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (options.show_copyright) {
                <span class="hljs-keyword">var</span> tok = jsp.tokenizer(code), c;
                c = tok();
                result += show_copyright(c.comments_before);
        }
        <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">var</span> ast = time_it(<span class="hljs-string">"parse"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> jsp.parse(code); });
                <span class="hljs-keyword">if</span> (options.consolidate) ast = time_it(<span class="hljs-string">"consolidate"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                        <span class="hljs-keyword">return</span> consolidator.ast_consolidate(ast);
                });
                <span class="hljs-keyword">if</span> (options.lift_vars) {
                        ast = time_it(<span class="hljs-string">"lift"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> pro.ast_lift_variables(ast); });
                }
                <span class="hljs-keyword">if</span> (options.mangle) ast = time_it(<span class="hljs-string">"mangle"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                        <span class="hljs-keyword">return</span> pro.ast_mangle(ast, {
                                <span class="hljs-attr">toplevel</span>     : options.mangle_toplevel,
                                <span class="hljs-attr">defines</span>      : options.defines,
                                <span class="hljs-attr">except</span>       : options.reserved_names,
                                <span class="hljs-attr">no_functions</span> : options.no_mangle_functions
                        });
                });
                <span class="hljs-keyword">if</span> (options.squeeze) ast = time_it(<span class="hljs-string">"squeeze"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                        ast = pro.ast_squeeze(ast, {
                                <span class="hljs-attr">make_seqs</span>  : options.make_seqs,
                                <span class="hljs-attr">dead_code</span>  : options.dead_code,
                                <span class="hljs-attr">keep_comps</span> : !options.unsafe
                        });
                        <span class="hljs-keyword">if</span> (options.unsafe)
                                ast = pro.ast_squeeze_more(ast);
                        <span class="hljs-keyword">return</span> ast;
                });
                <span class="hljs-keyword">if</span> (options.ast)
                        <span class="hljs-keyword">return</span> sys.inspect(ast, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
                result += time_it(<span class="hljs-string">"generate"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> pro.gen_code(ast, options.codegen_options) });
                <span class="hljs-keyword">if</span> (!options.codegen_options.beautify &amp;&amp; options.max_line_length) {
                        result = time_it(<span class="hljs-string">"split"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> pro.split_lines(result, options.max_line_length) });
                }
                <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span>(ex) {
                sys.debug(ex.stack);
                sys.debug(sys.inspect(ex));
                sys.debug(<span class="hljs-built_in">JSON</span>.stringify(ex));
                process.exit(<span class="hljs-number">1</span>);
        }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">time_it</span>(<span class="hljs-params">name, cont</span>) </span>{
        <span class="hljs-keyword">if</span> (!options.verbose)
                <span class="hljs-keyword">return</span> cont();
        <span class="hljs-keyword">var</span> t1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
        <span class="hljs-keyword">try</span> { <span class="hljs-keyword">return</span> cont(); }
        <span class="hljs-keyword">finally</span> { sys.debug(<span class="hljs-string">"// "</span> + name + <span class="hljs-string">": "</span> + ((<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime() - t1) / <span class="hljs-number">1000</span>).toFixed(<span class="hljs-number">3</span>) + <span class="hljs-string">" sec."</span>); }
};

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
