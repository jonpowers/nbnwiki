<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/parse5/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h2">
        <a href="#install">Install</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h2">
        <a href="#is-it-fast">Is it fast?</a>
      </div>

      <div class="heading h2">
        <a href="#api-reference">API reference</a>
      </div>

      <div class="heading h3">
        <a href="#enum-treeadapters">Enum: TreeAdapters</a>
      </div>

      <div class="heading h4">
        <a href="#*-treeadapters.default">• TreeAdapters.default</a>
      </div>

      <div class="heading h4">
        <a href="#*-treeadapters.htmlparser2">• TreeAdapters.htmlparser2</a>
      </div>

      <div class="heading h3">
        <a href="#class-parser">Class: Parser</a>
      </div>

      <div class="heading h4">
        <a href="#*-parser.ctor-treeadapter-options">• Parser.ctor([treeAdapter, options])</a>
      </div>

      <div class="heading h5">
        <a href="#options.decodehtmlentities">options.decodeHtmlEntities</a>
      </div>

      <div class="heading h5">
        <a href="#options.locationinfo">options.locationInfo</a>
      </div>

      <div class="heading h4">
        <a href="#*-parser.parse-html">• Parser.parse(html)</a>
      </div>

      <div class="heading h4">
        <a href="#*-parser.parsefragment-htmlfragment-contextelement">• Parser.parseFragment(htmlFragment, [contextElement])</a>
      </div>

      <div class="heading h3">
        <a href="#class-simpleapiparser">Class: SimpleApiParser</a>
      </div>

      <div class="heading h4">
        <a href="#*-simpleapiparser.ctor-handlers-options">• SimpleApiParser.ctor(handlers, [options])</a>
      </div>

      <div class="heading h5">
        <a href="#options.decodehtmlentities-1">options.decodeHtmlEntities</a>
      </div>

      <div class="heading h5">
        <a href="#options.locationinfo-1">options.locationInfo</a>
      </div>

      <div class="heading h4">
        <a href="#*-simpleapiparser.parse-html">• SimpleApiParser.parse(html)</a>
      </div>

      <div class="heading h3">
        <a href="#class-serializer">Class: Serializer</a>
      </div>

      <div class="heading h4">
        <a href="#*-serializer.ctor-treeadapter-options">• Serializer.ctor([treeAdapter, options])</a>
      </div>

      <div class="heading h5">
        <a href="#options.encodehtmlentities">options.encodeHtmlEntities</a>
      </div>

      <div class="heading h4">
        <a href="#*-serializer.serialize-node">• Serializer.serialize(node)</a>
      </div>

      <div class="heading h2">
        <a href="#testing">Testing</a>
      </div>

      <div class="heading h2">
        <a href="#custom-tree-adapter">Custom tree adapter</a>
      </div>

      <div class="heading h2">
        <a href="#questions-or-suggestions">Questions or suggestions?</a>
      </div>

      <div class="heading h2">
        <a href="#author">Author</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><p align="center">
  <img src="https://raw.github.com/inikulin/parse5/master/logo.png" alt="parse5" />
</p>
<p><a href="https://travis-ci.org/inikulin/parse5"><img src="https://api.travis-ci.org/inikulin/parse5.svg" alt="Build Status"></a>
<a href="https://www.npmjs.com/package/parse5"><img src="https://img.shields.io/npm/v/parse5.svg" alt="npm"></a></p>
<p><em>WHATWG HTML5 specification-compliant, fast and ready for production HTML parsing/serialization toolset for Node and io.js.</em></p>
<p>I needed fast and ready for production HTML parser, which will parse HTML as a modern browser's parser.
Existing solutions were either too slow or their output was too inaccurate. So, this is how parse5 was born.</p>
<p><strong>Included tools:</strong></p>
<ul>
<li><a href="#class-parser.html">Parser</a> - HTML to DOM-tree parser.</li>
<li><a href="#class-simpleapiparser.html">SimpleApiParser</a> - <a href="http://en.wikipedia.org/wiki/Simple_API_for_XML">SAX</a>-style parser for HTML.</li>
<li><a href="#class-serializer.html">Serializer</a> - DOM-tree to HTML code serializer.</li>
</ul>
<div class="pilwrap" id="install">
  <h2>
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h2>
</div>
<pre><code>$ npm install parse5
</code></pre>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<pre><code class="js"><span class="hljs-keyword">var</span> Parser = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parse5'</span>).Parser;

<span class="hljs-comment">//Instantiate parser</span>
<span class="hljs-keyword">var</span> parser = <span class="hljs-keyword">new</span> Parser();

<span class="hljs-comment">//Then feed it with an HTML document</span>
<span class="hljs-keyword">var</span> <span class="hljs-built_in">document</span> = parser.parse(<span class="hljs-string">'&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hi there!&lt;/body&gt;&lt;/html&gt;'</span>)

<span class="hljs-comment">//Now let's parse HTML-snippet</span>
<span class="hljs-keyword">var</span> fragment = parser.parseFragment(<span class="hljs-string">'&lt;title&gt;Parse5 is &amp;#102;&amp;#117;&amp;#99;&amp;#107;ing awesome!&lt;/title&gt;&lt;h1&gt;42&lt;/h1&gt;'</span>);

</code></pre>
<div class="pilwrap" id="is-it-fast">
  <h2>
    <a href="#is-it-fast" name="is-it-fast" class="pilcrow"></a>
Is it fast?
  </h2>
</div>
<p>Check out <a href="https://github.com/inikulin/node-html-parser-bench">this benchmark</a>.</p>
<pre><code>Starting benchmark. Fasten your seatbelts...
html5 (https://github.com/aredridel/html5) x 0.18 ops/sec ±5.92% (5 runs sampled)
htmlparser (https://github.com/tautologistics/node-htmlparser/) x 3.83 ops/sec ±42.43% (14 runs sampled)
htmlparser2 (https://github.com/fb55/htmlparser2) x 4.05 ops/sec ±39.27% (15 runs sampled)
parse5 (https://github.com/inikulin/parse5) x 3.04 ops/sec ±51.81% (13 runs sampled)
Fastest is htmlparser2 (https://github.com/fb55/htmlparser2),parse5 (https://github.com/inikulin/parse5)
</code></pre>
<p>So, parse5 is as fast as simple specification incompatible parsers and ~15-times(!) faster than the current specification compatible parser available for the node.</p>
<div class="pilwrap" id="api-reference">
  <h2>
    <a href="#api-reference" name="api-reference" class="pilcrow"></a>
API reference
  </h2>
</div>
<div class="pilwrap" id="enum-treeadapters">
  <h3>
    <a href="#enum-treeadapters" name="enum-treeadapters" class="pilcrow"></a>
Enum: TreeAdapters
  </h3>
</div>
<p>Provides built-in tree adapters which can be passed as an optional argument to the <code>Parser</code> and <code>Serializer</code> constructors.</p>
<div class="pilwrap" id="*-treeadapters.default">
  <h4>
    <a href="#*-treeadapters.default" name="*-treeadapters.default" class="pilcrow"></a>
• TreeAdapters.default
  </h4>
</div>
<p>Default tree format for parse5.</p>
<div class="pilwrap" id="*-treeadapters.htmlparser2">
  <h4>
    <a href="#*-treeadapters.htmlparser2" name="*-treeadapters.htmlparser2" class="pilcrow"></a>
• TreeAdapters.htmlparser2
  </h4>
</div>
<p>Quite popular <a href="https://github.com/fb55/htmlparser2">htmlparser2</a> tree format (e.g. used in <a href="https://github.com/MatthewMueller/cheerio">cheerio</a> and <a href="https://github.com/tmpvar/jsdom">jsdom</a>).</p>
<hr>
<div class="pilwrap" id="class-parser">
  <h3>
    <a href="#class-parser" name="class-parser" class="pilcrow"></a>
Class: Parser
  </h3>
</div>
<p>Provides HTML parsing functionality.</p>
<div class="pilwrap" id="*-parser.ctor-treeadapter-options">
  <h4>
    <a href="#*-parser.ctor-treeadapter-options" name="*-parser.ctor-treeadapter-options" class="pilcrow"></a>
• Parser.ctor([treeAdapter, options])
  </h4>
</div>
<p>Creates new reusable instance of the <code>Parser</code>. Optional <code>treeAdapter</code> argument specifies resulting tree format. If <code>treeAdapter</code> argument is not specified, <code>default</code> tree adapter will be used.</p>
<p><code>options</code> object provides the parsing algorithm modifications:</p>
<div class="pilwrap" id="options.decodehtmlentities">
  <h5>
    <a href="#options.decodehtmlentities" name="options.decodehtmlentities" class="pilcrow"></a>
options.decodeHtmlEntities
  </h5>
</div>
<p>Decode HTML-entities like <code>&amp;amp;</code>, <code>&amp;nbsp;</code>, etc.  Default: <code>true</code>. <strong>Warning:</strong> disabling this option may cause output which is not conform HTML5 specification.</p>
<div class="pilwrap" id="options.locationinfo">
  <h5>
    <a href="#options.locationinfo" name="options.locationinfo" class="pilcrow"></a>
options.locationInfo
  </h5>
</div>
<p>Enables source code location information for the nodes. Default: <code>false</code>. When enabled, each node (except root node) has <code>__location</code> property, which contains <code>start</code> and <code>end</code> indices of the node in the source code. If element was implicitly created by the parser it's <code>__location</code> property will be <code>null</code>. In case the node is not an empty element, <code>__location</code> has two addition properties <code>startTag</code> and <code>endTag</code> which contain location information for individual tags in a fashion similar to <code>__location</code> property.</p>
<p><em>Example:</em></p>
<pre><code class="js"><span class="hljs-keyword">var</span> parse5 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parse5'</span>);

<span class="hljs-comment">//Instantiate new parser with default tree adapter</span>
<span class="hljs-keyword">var</span> parser1 = <span class="hljs-keyword">new</span> parse5.Parser();

<span class="hljs-comment">//Instantiate new parser with htmlparser2 tree adapter</span>
<span class="hljs-keyword">var</span> parser2 = <span class="hljs-keyword">new</span> parse5.Parser(parse5.TreeAdapters.htmlparser2);
</code></pre>
<div class="pilwrap" id="*-parser.parse-html">
  <h4>
    <a href="#*-parser.parse-html" name="*-parser.parse-html" class="pilcrow"></a>
• Parser.parse(html)
  </h4>
</div>
<p>Parses specified <code>html</code> string. Returns <code>document</code> node.</p>
<p><em>Example:</em></p>
<pre><code class="js"><span class="hljs-keyword">var</span> <span class="hljs-built_in">document</span> = parser.parse(<span class="hljs-string">'&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hi there!&lt;/body&gt;&lt;/html&gt;'</span>);
</code></pre>
<div class="pilwrap" id="*-parser.parsefragment-htmlfragment-contextelement">
  <h4>
    <a href="#*-parser.parsefragment-htmlfragment-contextelement" name="*-parser.parsefragment-htmlfragment-contextelement" class="pilcrow"></a>
• Parser.parseFragment(htmlFragment, [contextElement])
  </h4>
</div>
<p>Parses given <code>htmlFragment</code>. Returns <code>documentFragment</code> node. Optional <code>contextElement</code> argument specifies context in which given <code>htmlFragment</code> will be parsed (consider it as setting <code>contextElement.innerHTML</code> property). If <code>contextElement</code> argument is not specified then <code>&lt;template&gt;</code> element will be used as a context and fragment will be parsed in 'forgiving' manner.</p>
<p><em>Example:</em></p>
<pre><code class="js"><span class="hljs-keyword">var</span> documentFragment = parser.parseFragment(<span class="hljs-string">'&lt;table&gt;&lt;/table&gt;'</span>);

<span class="hljs-comment">//Parse html fragment in context of the parsed &lt;table&gt; element</span>
<span class="hljs-keyword">var</span> trFragment = parser.parseFragment(<span class="hljs-string">'&lt;tr&gt;&lt;td&gt;Shake it, baby&lt;/td&gt;&lt;/tr&gt;'</span>, documentFragment.childNodes[<span class="hljs-number">0</span>]);
</code></pre>
<hr>
<div class="pilwrap" id="class-simpleapiparser">
  <h3>
    <a href="#class-simpleapiparser" name="class-simpleapiparser" class="pilcrow"></a>
Class: SimpleApiParser
  </h3>
</div>
<p>Provides <a href="https://en.wikipedia.org/wiki/Simple_API_for_XML">SAX</a>-style HTML parsing functionality.</p>
<div class="pilwrap" id="*-simpleapiparser.ctor-handlers-options">
  <h4>
    <a href="#*-simpleapiparser.ctor-handlers-options" name="*-simpleapiparser.ctor-handlers-options" class="pilcrow"></a>
• SimpleApiParser.ctor(handlers, [options])
  </h4>
</div>
<p>Creates new reusable instance of the <code>SimpleApiParser</code>. <code>handlers</code> argument specifies object that contains parser's event handlers. Possible events and their signatures are shown in the example.</p>
<p><code>options</code> object provides the parsing algorithm modifications:</p>
<div class="pilwrap" id="options.decodehtmlentities-1">
  <h5>
    <a href="#options.decodehtmlentities-1" name="options.decodehtmlentities-1" class="pilcrow"></a>
options.decodeHtmlEntities
  </h5>
</div>
<p>Decode HTML-entities like <code>&amp;amp;</code>, <code>&amp;nbsp;</code>, etc.  Default: <code>true</code>. <strong>Warning:</strong> disabling this option may cause output which is not conform HTML5 specification.</p>
<div class="pilwrap" id="options.locationinfo-1">
  <h5>
    <a href="#options.locationinfo-1" name="options.locationinfo-1" class="pilcrow"></a>
options.locationInfo
  </h5>
</div>
<p>Enables source code location information for the tokens. Default: <code>false</code>. When enabled, each node handler receives <code>location</code> object as it's last argument. <code>location</code> object contains <code>start</code> and <code>end</code> indices of the token in the source code.</p>
<p><em>Example:</em></p>
<pre><code class="js"><span class="hljs-keyword">var</span> parse5 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parse5'</span>);

<span class="hljs-keyword">var</span> parser = <span class="hljs-keyword">new</span> parse5.SimpleApiParser({
    <span class="hljs-attr">doctype</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, publicId, systemId <span class="hljs-regexp">/*, [location] */</span></span>) </span>{
        <span class="hljs-comment">//Handle doctype here</span>
    },

    <span class="hljs-attr">startTag</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tagName, attrs, selfClosing <span class="hljs-regexp">/*, [location] */</span></span>) </span>{
        <span class="hljs-comment">//Handle start tags here</span>
    },

    <span class="hljs-attr">endTag</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tagName <span class="hljs-regexp">/*, [location] */</span></span>) </span>{
        <span class="hljs-comment">//Handle end tags here</span>
    },

    <span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text <span class="hljs-regexp">/*, [location] */</span></span>) </span>{
        <span class="hljs-comment">//Handle texts here</span>
    },

    <span class="hljs-attr">comment</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text <span class="hljs-regexp">/*, [location] */</span></span>) </span>{
        <span class="hljs-comment">//Handle comments here</span>
    }
});
</code></pre>
<div class="pilwrap" id="*-simpleapiparser.parse-html">
  <h4>
    <a href="#*-simpleapiparser.parse-html" name="*-simpleapiparser.parse-html" class="pilcrow"></a>
• SimpleApiParser.parse(html)
  </h4>
</div>
<p>Raises parser events for the given <code>html</code>.</p>
<p><em>Example:</em></p>
<pre><code class="js"><span class="hljs-keyword">var</span> parse5 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parse5'</span>);

<span class="hljs-keyword">var</span> parser = <span class="hljs-keyword">new</span> parse5.SimpleApiParser({
    <span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
        <span class="hljs-built_in">console</span>.log(text);
    }
});

parser.parse(<span class="hljs-string">'&lt;body&gt;Yo!&lt;/body&gt;'</span>);
</code></pre>
<hr>
<div class="pilwrap" id="class-serializer">
  <h3>
    <a href="#class-serializer" name="class-serializer" class="pilcrow"></a>
Class: Serializer
  </h3>
</div>
<p>Provides tree-to-HTML serialization functionality.
<strong>Note:</strong> prior to v1.2.0 this class was called <code>TreeSerializer</code>. However, it's still accessible as <code>parse5.TreeSerializer</code> for backward compatibility.</p>
<div class="pilwrap" id="*-serializer.ctor-treeadapter-options">
  <h4>
    <a href="#*-serializer.ctor-treeadapter-options" name="*-serializer.ctor-treeadapter-options" class="pilcrow"></a>
• Serializer.ctor([treeAdapter, options])
  </h4>
</div>
<p>Creates new reusable instance of the <code>Serializer</code>. Optional <code>treeAdapter</code> argument specifies input tree format. If <code>treeAdapter</code> argument is not specified, <code>default</code> tree adapter will be used.</p>
<p><code>options</code> object provides the serialization algorithm modifications:</p>
<div class="pilwrap" id="options.encodehtmlentities">
  <h5>
    <a href="#options.encodehtmlentities" name="options.encodehtmlentities" class="pilcrow"></a>
options.encodeHtmlEntities
  </h5>
</div>
<p>HTML-encode characters like <code>&lt;</code>, <code>&gt;</code>, <code>&amp;</code>, etc.  Default: <code>true</code>.  <strong>Warning:</strong> disabling this option may cause output which is not conform HTML5 specification.</p>
<p><em>Example:</em></p>
<pre><code class="js"><span class="hljs-keyword">var</span> parse5 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parse5'</span>);

<span class="hljs-comment">//Instantiate new serializer with default tree adapter</span>
<span class="hljs-keyword">var</span> serializer1 = <span class="hljs-keyword">new</span> parse5.Serializer();

<span class="hljs-comment">//Instantiate new serializer with htmlparser2 tree adapter</span>
<span class="hljs-keyword">var</span> serializer2 = <span class="hljs-keyword">new</span> parse5.Serializer(parse5.TreeAdapters.htmlparser2);
</code></pre>
<div class="pilwrap" id="*-serializer.serialize-node">
  <h4>
    <a href="#*-serializer.serialize-node" name="*-serializer.serialize-node" class="pilcrow"></a>
• Serializer.serialize(node)
  </h4>
</div>
<p>Serializes the given <code>node</code>. Returns HTML string.</p>
<p><em>Example:</em></p>
<pre><code class="js"><span class="hljs-keyword">var</span> <span class="hljs-built_in">document</span> = parser.parse(<span class="hljs-string">'&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hi there!&lt;/body&gt;&lt;/html&gt;'</span>);

<span class="hljs-comment">//Serialize document</span>
<span class="hljs-keyword">var</span> html = serializer.serialize(<span class="hljs-built_in">document</span>);

<span class="hljs-comment">//Serialize &lt;body&gt; element content</span>
<span class="hljs-keyword">var</span> bodyInnerHtml = serializer.serialize(<span class="hljs-built_in">document</span>.childNodes[<span class="hljs-number">0</span>].childNodes[<span class="hljs-number">1</span>]);
</code></pre>
<hr>
<div class="pilwrap" id="testing">
  <h2>
    <a href="#testing" name="testing" class="pilcrow"></a>
Testing
  </h2>
</div>
<p>Test data is adopted from <a href="https://github.com/html5lib">html5lib project</a>. Parser is covered by more than 8000 test cases.
To run tests:</p>
<pre><code>$ npm test
</code></pre>
<div class="pilwrap" id="custom-tree-adapter">
  <h2>
    <a href="#custom-tree-adapter" name="custom-tree-adapter" class="pilcrow"></a>
Custom tree adapter
  </h2>
</div>
<p>You can create a custom tree adapter so parse5 can work with your own DOM-tree implementation.
Just pass your adapter implementation to the parser's constructor as an argument:</p>
<pre><code class="js"><span class="hljs-keyword">var</span> Parser = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parse5'</span>).Parser;

<span class="hljs-keyword">var</span> myTreeAdapter = {
   <span class="hljs-comment">//Adapter methods...</span>
};

<span class="hljs-comment">//Instantiate parser</span>
<span class="hljs-keyword">var</span> parser = <span class="hljs-keyword">new</span> Parser(myTreeAdapter);
</code></pre>
<p>Sample implementation can be found <a href="https://github.com/inikulin/parse5/blob/master/lib/tree_adapters/default.js">here</a>.
The custom tree adapter should implement all methods exposed via <code>exports</code> in the sample implementation.</p>
<div class="pilwrap" id="questions-or-suggestions">
  <h2>
    <a href="#questions-or-suggestions" name="questions-or-suggestions" class="pilcrow"></a>
Questions or suggestions?
  </h2>
</div>
<p>If you have any questions, please feel free to create an issue <a href="https://github.com/inikulin/parse5/issues">here on github</a>.</p>
<div class="pilwrap" id="author">
  <h2>
    <a href="#author" name="author" class="pilcrow"></a>
Author
  </h2>
</div>
<p><a href="https://github.com/inikulin">Ivan Nikulin</a> (ifaaan@gmail.com)</p>
</div>
  </div>
</body>
</html>
