<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/pm2/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h2">
        <a href="#install-pm2">Install PM2</a>
      </div>

      <div class="heading h2">
        <a href="#start-an-application">Start an application</a>
      </div>

      <div class="heading h2">
        <a href="#update-pm2">Update PM2</a>
      </div>

      <div class="heading h2">
        <a href="#main-features">Main features</a>
      </div>

      <div class="heading h3">
        <a href="#commands-overview">Commands overview</a>
      </div>

      <div class="heading h3">
        <a href="#process-management">Process management</a>
      </div>

      <div class="heading h3">
        <a href="#load-balancing-and-zero-second-downtime-reload">Load Balancing &amp;amp; Zero second Downtime Reload</a>
      </div>

      <div class="heading h3">
        <a href="#cpu-memory-monitoring">CPU / Memory Monitoring</a>
      </div>

      <div class="heading h3">
        <a href="#log-facilities">Log facilities</a>
      </div>

      <div class="heading h3">
        <a href="#startup-script-generation">Startup script generation</a>
      </div>

      <div class="heading h2">
        <a href="#module-system">Module system</a>
      </div>

      <div class="heading h2">
        <a href="#keymetrics-monitoring">Keymetrics monitoring</a>
      </div>

      <div class="heading h2">
        <a href="#more-about-pm2">More about PM2</a>
      </div>

      <div class="heading h2">
        <a href="#changelog">CHANGELOG</a>
      </div>

      <div class="heading h2">
        <a href="#contributors">Contributors</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div align="center">
  <a href="http://pm2.keymetrics.io">
    <img width=710px src="https://github.com/unitech/pm2/raw/master/pres/pm2.20d3ef.png">
  </a>
<br/>
<b>P</b>(rocess) <b>M</b>(anager) <b>2</b>
<br/><br/>
 <a href="http://slack.pm2.io/">
 <img src="http://slack.pm2.io/badge.svg" alt="Slack">
</a>
 <a href="https://www.bithound.io/github/Unitech/pm2">
 <img src="https://www.bithound.io/github/Unitech/pm2/badges/score.svg" alt="bitHound Score">
</a>
<a href="https://www.npmjs.com/package/pm2">
  <img alt="NPM Downloads" src="https://img.shields.io/npm/dm/pm2.svg?style=flat-square"/>
</a>
<a href="https://travis-ci.org/Unitech/pm2">
  <img src="https://travis-ci.org/Unitech/pm2.svg?branch=master" alt="Build Status"/>
</a>
<br/>
<br/>
</div>
<p>PM2 is a production process manager for Node.js applications with a built-in load balancer. It allows you to keep applications alive forever, to reload them without downtime and to facilitate common system admin tasks.</p>
<p>Starting an application in production mode is as easy as:</p>
<pre><code class="bash">$ pm2 start app.js
</code></pre>
<p>PM2 is constantly assailed by <a href="https://travis-ci.org/Unitech/pm2">more than 1000 tests</a>.</p>
<p>Official website: <a href="http://pm2.keymetrics.io/">http://pm2.keymetrics.io/</a></p>
<p>Works on Linux (stable) &amp; MacOSx (stable) &amp; Windows (stable).</p>
<p><a href="https://nodei.co/npm/pm2/"><img src="https://nodei.co/npm/pm2.png?downloads=true&amp;downloadRank=true" alt="NPM"></a></p>
<div class="pilwrap" id="install-pm2">
  <h2>
    <a href="#install-pm2" name="install-pm2" class="pilcrow"></a>
Install PM2
  </h2>
</div>
<pre><code class="bash">$ npm install pm2 -g
</code></pre>
<p><em>npm is a builtin CLI when you install Node.js - <a href="https://keymetrics.io/2015/02/03/installing-node-js-and-io-js-with-nvm/">Installing Node.js with NVM</a></em></p>
<div class="pilwrap" id="start-an-application">
  <h2>
    <a href="#start-an-application" name="start-an-application" class="pilcrow"></a>
Start an application
  </h2>
</div>
<pre><code class="bash">$ pm2 start app.js
</code></pre>
<p>Your app is now daemonized, monitored and kept alive forever.</p>
<p><a href="http://pm2.keymetrics.io/docs/usage/process-management/">More about Process Management</a></p>
<div class="pilwrap" id="update-pm2">
  <h2>
    <a href="#update-pm2" name="update-pm2" class="pilcrow"></a>
Update PM2
  </h2>
</div>
<pre><code class="bash"><span class="hljs-comment"># Install latest pm2 version</span>
$ npm install pm2 -g
<span class="hljs-comment"># Save process list, exit old PM2 &amp; restore all processes</span>
$ pm2 update
</code></pre>
<p><em>PM2 updates are seamless</em></p>
<div class="pilwrap" id="main-features">
  <h2>
    <a href="#main-features" name="main-features" class="pilcrow"></a>
Main features
  </h2>
</div>
<div class="pilwrap" id="commands-overview">
  <h3>
    <a href="#commands-overview" name="commands-overview" class="pilcrow"></a>
Commands overview
  </h3>
</div>
<pre><code class="bash"><span class="hljs-comment"># General</span>
$ npm install pm2 -g            <span class="hljs-comment"># Install PM2</span>
$ pm2 start app.js              <span class="hljs-comment"># Start, Daemonize and auto-restart application (Node)</span>
$ pm2 start app.py              <span class="hljs-comment"># Start, Daemonize and auto-restart application (Python)</span>
$ pm2 start npm -- start        <span class="hljs-comment"># Start, Daemonize and auto-restart Node application</span>

<span class="hljs-comment"># Cluster Mode (Node.js only)</span>
$ pm2 start app.js -i 4         <span class="hljs-comment"># Start 4 instances of application in cluster mode</span>
                                <span class="hljs-comment"># it will load balance network queries to each app</span>
$ pm2 reload all                <span class="hljs-comment"># Zero Second Downtime Reload</span>
$ pm2 scale [app-name] 10       <span class="hljs-comment"># Scale Cluster app to 10 process</span>

<span class="hljs-comment"># Process Monitoring</span>
$ pm2 list                      <span class="hljs-comment"># List all processes started with PM2</span>
$ pm2 monit                     <span class="hljs-comment"># Display memory and cpu usage of each app</span>
$ pm2 show [app-name]           <span class="hljs-comment"># Show all informations about application</span>

<span class="hljs-comment"># Log management</span>
$ pm2 logs                      <span class="hljs-comment"># Display logs of all apps</span>
$ pm2 logs [app-name]           <span class="hljs-comment"># Display logs for a specific app</span>
$ pm2 logs --json               <span class="hljs-comment"># Logs in JSON format</span>
$ pm2 flush
$ pm2 reloadLogs

<span class="hljs-comment"># Process State Management</span>
$ pm2 start app.js --name=<span class="hljs-string">"api"</span> <span class="hljs-comment"># Start application and name it "api"</span>
$ pm2 start app.js -- <span class="hljs-_">-a</span> 34     <span class="hljs-comment"># Start app and pass option "-a 34" as argument</span>
$ pm2 start app.js --watch      <span class="hljs-comment"># Restart application on file change</span>
$ pm2 start script.sh           <span class="hljs-comment"># Start bash script</span>
$ pm2 start app.json            <span class="hljs-comment"># Start all applications declared in app.json</span>
$ pm2 reset [app-name]          <span class="hljs-comment"># Reset all counters</span>
$ pm2 stop all                  <span class="hljs-comment"># Stop all apps</span>
$ pm2 stop 0                    <span class="hljs-comment"># Stop process with id 0</span>
$ pm2 restart all               <span class="hljs-comment"># Restart all apps</span>
$ pm2 gracefulReload all        <span class="hljs-comment"># Graceful reload all apps in cluster mode</span>
$ pm2 delete all                <span class="hljs-comment"># Kill and delete all apps</span>
$ pm2 delete 0                  <span class="hljs-comment"># Delete app with id 0</span>

<span class="hljs-comment"># Startup/Boot management</span>
$ pm2 startup                   <span class="hljs-comment"># Detect init system, generate and configure pm2 boot on startup</span>
$ pm2 save                      <span class="hljs-comment"># Save current process list</span>
$ pm2 resurrect                 <span class="hljs-comment"># Restore previously save processes</span>
$ pm2 unstartup                 <span class="hljs-comment"># Disable and remove startup system</span>

$ pm2 update                    <span class="hljs-comment"># Save processes, kill PM2 and restore processes</span>
$ pm2 generate                  <span class="hljs-comment"># Generate a sample json configuration file</span>

<span class="hljs-comment"># Deployment</span>
$ pm2 deploy app.json prod setup    <span class="hljs-comment"># Setup "prod" remote server</span>
$ pm2 deploy app.json prod          <span class="hljs-comment"># Update "prod" remote server</span>
$ pm2 deploy app.json prod revert 2 <span class="hljs-comment"># Revert "prod" remote server by 2</span>

<span class="hljs-comment"># Module system</span>
$ pm2 module:generate [name]    <span class="hljs-comment"># Generate sample module with name [name]</span>
$ pm2 install pm2-logrotate     <span class="hljs-comment"># Install module (here a log rotation system)</span>
$ pm2 uninstall pm2-logrotate   <span class="hljs-comment"># Uninstall module</span>
$ pm2 publish                   <span class="hljs-comment"># Increment version, git push and npm publish</span>
</code></pre>
<div class="pilwrap" id="process-management">
  <h3>
    <a href="#process-management" name="process-management" class="pilcrow"></a>
Process management
  </h3>
</div>
<p>Once applications are started you can list and manage them easily:</p>
<p><img src="https://github.com/unitech/pm2/raw/master/pres/pm2-list.png" alt="Process listing"></p>
<p>Listing all running processes:</p>
<pre><code class="bash">$ pm2 list
</code></pre>
<p>Managing your processes is straightforward:</p>
<pre><code class="bash">$ pm2 stop     &lt;app_name|id|<span class="hljs-string">'all'</span>|json_conf&gt;
$ pm2 restart  &lt;app_name|id|<span class="hljs-string">'all'</span>|json_conf&gt;
$ pm2 delete   &lt;app_name|id|<span class="hljs-string">'all'</span>|json_conf&gt;
</code></pre>
<p>To make sure it re-evaluates enviroment variables in your <code>json_conf</code> use</p>
<pre><code class="bash">$ pm2 restart &lt;json_conf&gt;
</code></pre>
<p>To have more details on a specific process:</p>
<pre><code class="bash">$ pm2 describe &lt;id|app_name&gt;
</code></pre>
<p><a href="http://pm2.keymetrics.io/docs/usage/process-management/">More about Process Management</a></p>
<div class="pilwrap" id="load-balancing-and-zero-second-downtime-reload">
  <h3>
    <a href="#load-balancing-and-zero-second-downtime-reload" name="load-balancing-and-zero-second-downtime-reload" class="pilcrow"></a>
Load Balancing &amp; Zero second Downtime Reload
  </h3>
</div>
<p>When an application is started with the -i &lt;instance_number&gt; option, the <strong>Cluster Mode</strong> is enabled.</p>
<p>The Cluster Mode start &lt;instance_number&gt; and automatically load balance HTTP/TCP/UDP between each instance. This allows to increase overall performance depending to the number of CPUs availabe.</p>
<p>Seamlessly supported by all major Node.js frameworks and any Node.js applications without any code change:</p>
<p><img src="https://raw.githubusercontent.com/Unitech/PM2/development/pres/cluster-support.png" alt="Framework supported"></p>
<p>Main commands:</p>
<pre><code class="bash">$ pm2 start app.js -i max  <span class="hljs-comment"># Enable load-balancer and start 'max' instances (cpu nb)</span>

$ pm2 reload all           <span class="hljs-comment"># Zero second dowtime reload</span>

$ pm2 scale &lt;app_name&gt; &lt;instance_number&gt; <span class="hljs-comment"># Increase / Decrease process number</span>
</code></pre>
<p><a href="https://keymetrics.io/2015/03/26/pm2-clustering-made-easy/">More informations about how PM2 make clustering easy</a></p>
<div class="pilwrap" id="cpu-memory-monitoring">
  <h3>
    <a href="#cpu-memory-monitoring" name="cpu-memory-monitoring" class="pilcrow"></a>
CPU / Memory Monitoring
  </h3>
</div>
<p><img src="https://github.com/Unitech/pm2/raw/master/pres/pm2-monit.png" alt="Monit"></p>
<p>Monitoring all processes launched:</p>
<pre><code class="bash">$ pm2 monit
</code></pre>
<div class="pilwrap" id="log-facilities">
  <h3>
    <a href="#log-facilities" name="log-facilities" class="pilcrow"></a>
Log facilities
  </h3>
</div>
<p><img src="https://github.com/unitech/pm2/raw/master/pres/pm2-logs.png" alt="Monit"></p>
<p>Displaying logs of a specified process or all processes, in real time. Standard, Raw, JSON and formated output are available.</p>
<pre><code class="bash">$ pm2 logs [<span class="hljs-string">'all'</span>|app_name|app_id] [--json] [--format] [--raw]`
</code></pre>
<p>Examples:</p>
<pre><code class="bash">$ pm2 logs APP-NAME       <span class="hljs-comment"># Display APP-NAME logs</span>
$ pm2 logs --json         <span class="hljs-comment"># JSON output</span>
$ pm2 logs --format       <span class="hljs-comment"># Formated output</span>

$ pm2 flush               <span class="hljs-comment"># Flush all logs</span>
$ pm2 reloadLogs          <span class="hljs-comment"># Reload all logs</span>
</code></pre>
<p><a href="http://pm2.keymetrics.io/docs/usage/log-management/">More about log management</a></p>
<div class="pilwrap" id="startup-script-generation">
  <h3>
    <a href="#startup-script-generation" name="startup-script-generation" class="pilcrow"></a>
Startup script generation
  </h3>
</div>
<p>PM2 can generate and configure a startup script to keep PM2 and your processes alive at every server restart.</p>
<p>Supports init systems like: <strong>systemd</strong> (Ubuntu 16, CentOS, Arch), <strong>upstart</strong> (Ubuntu 14/12), <strong>launchd</strong> (MacOSx, Darwin), <strong>rc.d</strong> (FreeBSD).</p>
<pre><code class="bash"><span class="hljs-comment"># Auto detect init system + generate and setup PM2 boot at server startup</span>
$ pm2 startup

<span class="hljs-comment"># Manually specify the startup system</span>
<span class="hljs-comment"># Can be: systemd, upstart, launchd, rcd</span>
$ pm2 startup [platform]

<span class="hljs-comment"># Disable and remove PM2 boot at server startup</span>
$ pm2 unstartup
</code></pre>
<p>To save/freeze a process list on reboot:</p>
<pre><code class="bash">$ pm2 save
</code></pre>
<p><a href="http://pm2.keymetrics.io/docs/usage/startup/">More about startup scripts</a></p>
<div class="pilwrap" id="module-system">
  <h2>
    <a href="#module-system" name="module-system" class="pilcrow"></a>
Module system
  </h2>
</div>
<p>PM2 embeds a simple and powerful module system. Installing a module is straightforward:</p>
<pre><code class="bash">$ pm2 install &lt;module_name&gt;
</code></pre>
<p>Here are some PM2 compatible modules (standalone Node.js applications managed by PM2):</p>
<p><a href="https://github.com/pm2-hive/pm2-logrotate"><strong>pm2-logrotate</strong></a> auto rotate logs of PM2 and applications managed<br/>
<a href="https://github.com/pm2-hive/pm2-webshell"><strong>pm2-webshell</strong></a> expose a fully capable terminal in browsers<br/>
<a href="https://github.com/pm2-hive/pm2-server-monit"><strong>pm2-server-monit</strong></a> monitor your server health<br/></p>
<p><a href="http://pm2.keymetrics.io/docs/advanced/pm2-module-system/">Writing your own module</a></p>
<div class="pilwrap" id="keymetrics-monitoring">
  <h2>
    <a href="#keymetrics-monitoring" name="keymetrics-monitoring" class="pilcrow"></a>
Keymetrics monitoring
  </h2>
</div>
<p><a href="https://app.keymetrics.io/#/register"><img src="https://keymetrics.io/assets/images/application-demo.png" alt="Keymetrics Dashboard"></a></p>
<p>If you manage your NodeJS app with PM2, Keymetrics makes it easy to monitor and manage apps across servers.
Feel free to try it:</p>
<p><a href="https://app.keymetrics.io/#/register">Discover the monitoring dashboard for PM2</a></p>
<p>Thanks in advance and we hope that you like PM2!</p>
<div class="pilwrap" id="more-about-pm2">
  <h2>
    <a href="#more-about-pm2" name="more-about-pm2" class="pilcrow"></a>
More about PM2
  </h2>
</div>
<ul>
<li><a href="http://pm2.keymetrics.io/docs/usage/application-declaration/">Application Declaration via JS files</a></li>
<li><a href="http://pm2.keymetrics.io/docs/usage/watch-and-restart/">Watch &amp; Restart</a></li>
<li><a href="http://pm2.keymetrics.io/docs/usage/pm2-api/">PM2 API</a></li>
<li><a href="http://pm2.keymetrics.io/docs/usage/deployment/">Deployment workflow</a></li>
<li><a href="http://pm2.keymetrics.io/docs/usage/use-pm2-with-cloud-providers/">PM2 on Heroku/Azure/App Engine</a></li>
<li><a href="http://pm2.keymetrics.io/docs/usage/auto-completion/">PM2 auto completion</a></li>
<li><a href="http://pm2.keymetrics.io/docs/tutorials/use-pm2-with-aws-elastic-beanstalk/">Using PM2 in ElasticBeanStalk</a></li>
<li><a href="https://futurestud.io/tutorials/pm2-utility-overview-installation">PM2 Tutorial Series</a></li>
</ul>
<div class="pilwrap" id="changelog">
  <h2>
    <a href="#changelog" name="changelog" class="pilcrow"></a>
CHANGELOG
  </h2>
</div>
<p><a href="https://github.com/Unitech/PM2/blob/master/CHANGELOG.md">CHANGELOG</a></p>
<div class="pilwrap" id="contributors">
  <h2>
    <a href="#contributors" name="contributors" class="pilcrow"></a>
Contributors
  </h2>
</div>
<p><a href="http://pm2.keymetrics.io/hall-of-fame/">Contributors</a></p>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>PM2 is made available under the terms of the GNU Affero General Public License 3.0 (AGPL 3.0). If you use the PM2 API <a href="https://keymetrics.io/contact/">contact us</a> for a possible LGPL license.</p>
<p><a href="https://github.com/igrigorik/ga-beacon"><img src="https://ga-beacon.appspot.com/UA-51734350-7/pm2/readme?pixel&amp;useReferer" alt="GA"></a></p>
</div>
  </div>
</body>
</html>
