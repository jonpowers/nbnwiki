<!DOCTYPE html>
<html>
<head>
  <title>constants.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/pm2/constants.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>constants.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>Copyright 2013 the PM2 project authors. All rights reserved.
Use of this source code is governed by a license that
can be found in the LICENSE file.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> debug  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'debug'</span>)(<span class="hljs-string">'pm2:conf'</span>);
<span class="hljs-keyword">var</span> p      = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">var</span> util   = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);
<span class="hljs-keyword">var</span> chalk  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chalk'</span>);
<span class="hljs-keyword">var</span> semver = <span class="hljs-built_in">require</span>(<span class="hljs-string">'semver'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get PM2 path structure</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> path_structure = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./paths.js'</span>)(process.env.OVER_HOME);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constants variables used by PM2</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> csts = {
  <span class="hljs-attr">PREFIX_MSG</span>              : chalk.green(<span class="hljs-string">'[PM2] '</span>),
  <span class="hljs-attr">PREFIX_MSG_ERR</span>          : chalk.red(<span class="hljs-string">'[PM2][ERROR] '</span>),
  <span class="hljs-attr">PREFIX_MSG_MOD</span>          : chalk.bold.green(<span class="hljs-string">'[PM2][Module] '</span>),
  <span class="hljs-attr">PREFIX_MSG_MOD_ERR</span>      : chalk.red(<span class="hljs-string">'[PM2][Module][ERROR] '</span>),
  <span class="hljs-attr">PREFIX_MSG_WARNING</span>      : chalk.yellow(<span class="hljs-string">'[PM2][WARN] '</span>),
  <span class="hljs-attr">PREFIX_MSG_SUCCESS</span>      : chalk.cyan(<span class="hljs-string">'[PM2] '</span>),

  <span class="hljs-attr">TEMPLATE_FOLDER</span>         : p.join(__dirname, <span class="hljs-string">'lib/templates'</span>),

  <span class="hljs-attr">APP_CONF_TPL</span>            : <span class="hljs-string">'ecosystem.tpl'</span>,
  <span class="hljs-attr">APP_CONF_TPL_SIMPLE</span>     : <span class="hljs-string">'ecosystem-simple.tpl'</span>,
  <span class="hljs-attr">SAMPLE_CONF_FILE</span>        : <span class="hljs-string">'sample-conf.js'</span>,
  <span class="hljs-attr">LOGROTATE_SCRIPT</span>        : <span class="hljs-string">'logrotate.d/pm2'</span>,

  <span class="hljs-attr">DOCKERFILE_NODEJS</span>       : <span class="hljs-string">'Dockerfiles/Dockerfile-nodejs.tpl'</span>,
  <span class="hljs-attr">DOCKERFILE_JAVA</span>         : <span class="hljs-string">'Dockerfiles/Dockerfile-java.tpl'</span>,
  <span class="hljs-attr">DOCKERFILE_RUBY</span>         : <span class="hljs-string">'Dockerfiles/Dockerfile-ruby.tpl'</span>,

  <span class="hljs-attr">SUCCESS_EXIT</span>            : <span class="hljs-number">0</span>,
  <span class="hljs-attr">ERROR_EXIT</span>              : <span class="hljs-number">1</span>,
  <span class="hljs-attr">CODE_UNCAUGHTEXCEPTION</span>  : <span class="hljs-number">1</span>,

  <span class="hljs-attr">IS_WINDOWS</span>              : (process.platform === <span class="hljs-string">'win32'</span> || process.platform === <span class="hljs-string">'win64'</span>),
  <span class="hljs-attr">ONLINE_STATUS</span>           : <span class="hljs-string">'online'</span>,
  <span class="hljs-attr">STOPPED_STATUS</span>          : <span class="hljs-string">'stopped'</span>,
  <span class="hljs-attr">STOPPING_STATUS</span>         : <span class="hljs-string">'stopping'</span>,
  <span class="hljs-attr">LAUNCHING_STATUS</span>        : <span class="hljs-string">'launching'</span>,
  <span class="hljs-attr">ERRORED_STATUS</span>          : <span class="hljs-string">'errored'</span>,
  <span class="hljs-attr">ONE_LAUNCH_STATUS</span>       : <span class="hljs-string">'one-launch-status'</span>,

  <span class="hljs-attr">CLUSTER_MODE_ID</span>         : <span class="hljs-string">'cluster_mode'</span>,
  <span class="hljs-attr">FORK_MODE_ID</span>            : <span class="hljs-string">'fork_mode'</span>,

  <span class="hljs-attr">KEYMETRICS_ROOT_URL</span>     : process.env.KEYMETRICS_NODE || <span class="hljs-string">'root.keymetrics.io'</span>,
  <span class="hljs-attr">KEYMETRICS_BANNER</span>       : <span class="hljs-string">'../lib/keymetrics'</span>,
  <span class="hljs-attr">DEFAULT_MODULE_JSON</span>     : <span class="hljs-string">'package.json'</span>,

  <span class="hljs-attr">REMOTE_PORT_TCP</span>         : <span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseInt</span>(process.env.KEYMETRICS_PUSH_PORT)) ? <span class="hljs-number">80</span> : <span class="hljs-built_in">parseInt</span>(process.env.KEYMETRICS_PUSH_PORT),
  <span class="hljs-attr">REMOTE_PORT</span>             : <span class="hljs-number">41624</span>,
  <span class="hljs-attr">REMOTE_REVERSE_PORT</span>     : <span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseInt</span>(process.env.KEYMETRICS_REVERSE_PORT)) ? <span class="hljs-number">43554</span> : <span class="hljs-built_in">parseInt</span>(process.env.KEYMETRICS_REVERSE_PORT),
  <span class="hljs-attr">REMOTE_HOST</span>             : <span class="hljs-string">'s1.keymetrics.io'</span>,
  <span class="hljs-attr">SEND_INTERVAL</span>           : <span class="hljs-number">1000</span>,
  <span class="hljs-attr">GRACEFUL_TIMEOUT</span>        : <span class="hljs-built_in">parseInt</span>(process.env.PM2_GRACEFUL_TIMEOUT) || <span class="hljs-number">8000</span>,
  <span class="hljs-attr">GRACEFUL_LISTEN_TIMEOUT</span> : <span class="hljs-built_in">parseInt</span>(process.env.PM2_GRACEFUL_LISTEN_TIMEOUT) || <span class="hljs-number">3000</span>,
  <span class="hljs-attr">LOGS_BUFFER</span>             : <span class="hljs-number">10</span>,
  <span class="hljs-attr">CONTEXT_ON_ERROR</span>        : <span class="hljs-number">2</span>,
  <span class="hljs-attr">AGGREGATION_DURATION</span>    : process.env.PM2_DEBUG || process.env.NODE_ENV === <span class="hljs-string">'test'</span> || process.env.NODE_ENV === <span class="hljs-string">'development'</span> ? <span class="hljs-number">3000</span> : <span class="hljs-number">10</span> * <span class="hljs-number">1000</span>,
  <span class="hljs-attr">TRACE_FLUSH_INTERVAL</span>    : process.env.PM2_DEBUG || process.env.NODE_ENV === <span class="hljs-string">'local_test'</span> ? <span class="hljs-number">1000</span> : <span class="hljs-number">60000</span>,

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Concurrent actions when doing start/restart/reload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  CONCURRENT_ACTIONS      : (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> concurrent_actions = <span class="hljs-built_in">parseInt</span>(process.env.PM2_CONCURRENT_ACTIONS) || <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (semver.satisfies(process.versions.node, <span class="hljs-string">'&gt;= 4.0.0'</span>))
      concurrent_actions = <span class="hljs-number">2</span>;
    debug(<span class="hljs-string">'Using %d parallelism (CONCURRENT_ACTIONS)'</span>, concurrent_actions);
    <span class="hljs-keyword">return</span> concurrent_actions;
  })(),

  <span class="hljs-attr">DEBUG</span>                   : process.env.PM2_DEBUG || <span class="hljs-literal">false</span>,
  <span class="hljs-attr">WEB_IPADDR</span>              : process.env.PM2_API_IPADDR || <span class="hljs-string">'0.0.0.0'</span>,
  <span class="hljs-attr">WEB_PORT</span>                : <span class="hljs-built_in">parseInt</span>(process.env.PM2_API_PORT)  || <span class="hljs-number">9615</span>,
  <span class="hljs-attr">MODIFY_REQUIRE</span>          : process.env.PM2_MODIFY_REQUIRE || <span class="hljs-literal">false</span>,

  <span class="hljs-attr">WORKER_INTERVAL</span>         : process.env.PM2_WORKER_INTERVAL || <span class="hljs-number">30000</span>,
  <span class="hljs-attr">KILL_TIMEOUT</span>            : process.env.PM2_KILL_TIMEOUT || <span class="hljs-number">1600</span>,
  <span class="hljs-attr">PM2_PROGRAMMATIC</span>        : <span class="hljs-keyword">typeof</span>(process.env.pm_id) !== <span class="hljs-string">'undefined'</span> || process.env.PM2_PROGRAMMATIC,
  <span class="hljs-attr">PM2_LOG_DATE_FORMAT</span>     : process.env.PM2_LOG_DATE_FORMAT !== <span class="hljs-literal">undefined</span> ? process.env.PM2_LOG_DATE_FORMAT : <span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>

};

<span class="hljs-built_in">module</span>.exports = util._extend(csts, path_structure);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
