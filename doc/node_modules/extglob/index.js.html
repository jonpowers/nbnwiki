<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/extglob/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>!
extglob <a href="https://github.com/jonschlinkert/extglob">https://github.com/jonschlinkert/extglob</a></p>
</div>
<div class="body">
<p>Copyright (c) 2015, Jon Schlinkert.
Licensed under the MIT License.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">
'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> isExtglob = <span class="hljs-built_in">require</span>(<span class="hljs-string">'is-extglob'</span>);
<span class="hljs-keyword">var</span> re, cache = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Expose <code>extglob</code></p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-built_in">module</span>.exports = extglob;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert the given extglob <code>string</code> to a regex-compatible
string.</p>
</div>
<div class="body">
<pre><code class="js"><span class="hljs-keyword">var</span> extglob = <span class="hljs-built_in">require</span>(<span class="hljs-string">'extglob'</span>);
extglob(<span class="hljs-string">'!(a?(b))'</span>);
<span class="hljs-comment">//=&gt; '(?!a(?:b)?)[^/]*?'</span>
</code></pre>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`str`</span>
<span class="dox_type">String</span>
<span>The string to convert.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`options`</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extglob</span>(<span class="hljs-params">str, opts</span>) </span>{
  opts = opts || {};
  <span class="hljs-keyword">var</span> o = {}, i = <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>fix common character reversals
'<em>!(.js)' =&gt; '</em>.!(js)'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  str = str.replace(<span class="hljs-regexp">/!\(([^\w*()])/g</span>, <span class="hljs-string">'$1!('</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>support file extension negation</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  str = str.replace(<span class="hljs-regexp">/([*\/])\.!\([*]\)/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m, ch</span>) </span>{
    <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">'/'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">escape</span>(<span class="hljs-string">'\\/[^.]+'</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">escape</span>(<span class="hljs-string">'[^.]+'</span>);
  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>create a unique key for caching by
combining the string and options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> key = str
    + <span class="hljs-built_in">String</span>(!!opts.regex)
    + <span class="hljs-built_in">String</span>(!!opts.contains)
    + <span class="hljs-built_in">String</span>(!!opts.escape);

  <span class="hljs-keyword">if</span> (cache.hasOwnProperty(key)) {
    <span class="hljs-keyword">return</span> cache[key];
  }

  <span class="hljs-keyword">if</span> (!(re <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>)) {
    re = regex();
  }

  opts.negate = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">var</span> m;

  <span class="hljs-keyword">while</span> (m = re.exec(str)) {
    <span class="hljs-keyword">var</span> prefix = m[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">var</span> inner = m[<span class="hljs-number">3</span>];
    <span class="hljs-keyword">if</span> (prefix === <span class="hljs-string">'!'</span>) {
      opts.negate = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">var</span> id = <span class="hljs-string">'__EXTGLOB_'</span> + (i++) + <span class="hljs-string">'__'</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>use the prefix of the <em>last</em> (outtermost) pattern</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    o[id] = wrap(inner, prefix, opts.escape);
    str = str.split(m[<span class="hljs-number">0</span>]).join(id);
  }

  <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(o);
  <span class="hljs-keyword">var</span> len = keys.length;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>we have to loop again to allow us to convert
patterns in reverse order (starting with the
innermost/last pattern first)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">while</span> (len--) {
    <span class="hljs-keyword">var</span> prop = keys[len];
    str = str.split(prop).join(o[prop]);
  }

  <span class="hljs-keyword">var</span> result = opts.regex
    ? toRegex(str, opts.contains, opts.negate)
    : str;

  result = result.split(<span class="hljs-string">'.'</span>).join(<span class="hljs-string">'\\.'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>cache the result and return it</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> (cache[key] = result);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Convert <code>string</code> to a regex string.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`str`</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`prefix`</span>
<span class="dox_type">String</span>
<span>Character that determines how to wrap the string.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`esc`</span>
<span class="dox_type">Boolean</span>
<span>If <code>false</code> special characters will not be escaped. Defaults to <code>true</code>.
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrap</span>(<span class="hljs-params">inner, prefix, esc</span>) </span>{
  <span class="hljs-keyword">if</span> (esc) inner = <span class="hljs-built_in">escape</span>(inner);

  <span class="hljs-keyword">switch</span> (prefix) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'!'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">'(?!'</span> + inner + <span class="hljs-string">')[^/]'</span> + (esc ? <span class="hljs-string">'%%%~'</span> : <span class="hljs-string">'*?'</span>);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'@'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">'(?:'</span> + inner + <span class="hljs-string">')'</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'+'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">'(?:'</span> + inner + <span class="hljs-string">')+'</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'*'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">'(?:'</span> + inner + <span class="hljs-string">')'</span> + (esc ? <span class="hljs-string">'%%'</span> : <span class="hljs-string">'*'</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-string">'?'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">'(?:'</span> + inner + <span class="hljs-string">'|)'</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> inner;
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span>(<span class="hljs-params">str</span>) </span>{
  str = str.split(<span class="hljs-string">'*'</span>).join(<span class="hljs-string">'[^/]%%%~'</span>);
  str = str.split(<span class="hljs-string">'.'</span>).join(<span class="hljs-string">'\\.'</span>);
  <span class="hljs-keyword">return</span> str;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>extglob regex.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">regex</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-regexp">/(\\?[@?!+*$]\\?)(\(([^()]*?)\))/</span>;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Negation regex</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">negate</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'(?!^'</span> + str + <span class="hljs-string">').*$'</span>;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>Create the regex to do the matching. If
the leading character in the <code>pattern</code> is <code>!</code>
a negation regex is returned.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`pattern`</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`contains`</span>
<span class="dox_type">Boolean</span>
<span>Allow loose matching.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">`isNegated`</span>
<span class="dox_type">Boolean</span>
<span>True if the pattern is a negation pattern.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toRegex</span>(<span class="hljs-params">pattern, contains, isNegated</span>) </span>{
  <span class="hljs-keyword">var</span> prefix = contains ? <span class="hljs-string">'^'</span> : <span class="hljs-string">''</span>;
  <span class="hljs-keyword">var</span> after = contains ? <span class="hljs-string">'$'</span> : <span class="hljs-string">''</span>;
  pattern = (<span class="hljs-string">'(?:'</span> + pattern + <span class="hljs-string">')'</span> + after);
  <span class="hljs-keyword">if</span> (isNegated) {
    pattern = prefix + negate(pattern);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(prefix + pattern);
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
