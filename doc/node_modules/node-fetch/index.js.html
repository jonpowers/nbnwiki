<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/node-fetch/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>index.js</p>
</div>
<div class="body">
<p>a request API compatible with window.fetch</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> parse_url = <span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>).parse;
<span class="hljs-keyword">var</span> resolve_url = <span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>).resolve;
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">var</span> https = <span class="hljs-built_in">require</span>(<span class="hljs-string">'https'</span>);
<span class="hljs-keyword">var</span> zlib = <span class="hljs-built_in">require</span>(<span class="hljs-string">'zlib'</span>);
<span class="hljs-keyword">var</span> stream = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-keyword">var</span> Body = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lib/body'</span>);
<span class="hljs-keyword">var</span> Response = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lib/response'</span>);
<span class="hljs-keyword">var</span> Headers = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lib/headers'</span>);
<span class="hljs-keyword">var</span> Request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lib/request'</span>);
<span class="hljs-keyword">var</span> FetchError = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lib/fetch-error'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>commonjs</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = Fetch;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>es6 default export compatibility</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports.default = <span class="hljs-built_in">module</span>.exports;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Fetch class</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">Mixed</span>
<span>url Absolute url or Request instance
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">Object</span>
<span>opts Fetch options
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>Promise
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Fetch</span>(<span class="hljs-params">url, opts</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>allow call as function</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Fetch))
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Fetch(url, opts);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>allow custom promise</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">if</span> (!Fetch.Promise) {
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'native promise missing, set Fetch.Promise to your favorite alternative'</span>);
	}

	Body.Promise = Fetch.Promise;

	<span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>wrap http.request into fetch</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Fetch.Promise(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>build request object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">new</span> Request(url, opts);

		<span class="hljs-keyword">if</span> (!options.protocol || !options.hostname) {
			<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'only absolute urls are supported'</span>);
		}

		<span class="hljs-keyword">if</span> (options.protocol !== <span class="hljs-string">'http:'</span> &amp;&amp; options.protocol !== <span class="hljs-string">'https:'</span>) {
			<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'only http(s) protocols are supported'</span>);
		}

		<span class="hljs-keyword">var</span> send;
		<span class="hljs-keyword">if</span> (options.protocol === <span class="hljs-string">'https:'</span>) {
			send = https.request;
		} <span class="hljs-keyword">else</span> {
			send = http.request;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>normalize headers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> headers = <span class="hljs-keyword">new</span> Headers(options.headers);

		<span class="hljs-keyword">if</span> (options.compress) {
			headers.set(<span class="hljs-string">'accept-encoding'</span>, <span class="hljs-string">'gzip,deflate'</span>);
		}

		<span class="hljs-keyword">if</span> (!headers.has(<span class="hljs-string">'user-agent'</span>)) {
			headers.set(<span class="hljs-string">'user-agent'</span>, <span class="hljs-string">'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)'</span>);
		}

		<span class="hljs-keyword">if</span> (!headers.has(<span class="hljs-string">'connection'</span>) &amp;&amp; !options.agent) {
			headers.set(<span class="hljs-string">'connection'</span>, <span class="hljs-string">'close'</span>);
		}

		<span class="hljs-keyword">if</span> (!headers.has(<span class="hljs-string">'accept'</span>)) {
			headers.set(<span class="hljs-string">'accept'</span>, <span class="hljs-string">'*/*'</span>);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>detect form data input from form-data module, this hack avoid the need to pass multipart header manually</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">if</span> (!headers.has(<span class="hljs-string">'content-type'</span>) &amp;&amp; options.body &amp;&amp; <span class="hljs-keyword">typeof</span> options.body.getBoundary === <span class="hljs-string">'function'</span>) {
			headers.set(<span class="hljs-string">'content-type'</span>, <span class="hljs-string">'multipart/form-data; boundary='</span> + options.body.getBoundary());
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>bring node-fetch closer to browser behavior by setting content-length automatically</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">if</span> (!headers.has(<span class="hljs-string">'content-length'</span>) &amp;&amp; <span class="hljs-regexp">/post|put|patch|delete/i</span>.test(options.method)) {
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.body === <span class="hljs-string">'string'</span>) {
				headers.set(<span class="hljs-string">'content-length'</span>, Buffer.byteLength(options.body));
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>detect form data input from form-data module, this hack avoid the need to add content-length header manually</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.body &amp;&amp; <span class="hljs-keyword">typeof</span> options.body.getLengthSync === <span class="hljs-string">'function'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>for form-data 1.x</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">				<span class="hljs-keyword">if</span> (options.body._lengthRetrievers &amp;&amp; options.body._lengthRetrievers.length == <span class="hljs-number">0</span>) {
					headers.set(<span class="hljs-string">'content-length'</span>, options.body.getLengthSync().toString());
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>for form-data 2.x</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.body.hasKnownLength &amp;&amp; options.body.hasKnownLength()) {
					headers.set(<span class="hljs-string">'content-length'</span>, options.body.getLengthSync().toString());
				}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>this is only necessary for older nodejs releases (before iojs merge)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.body === <span class="hljs-literal">undefined</span> || options.body === <span class="hljs-literal">null</span>) {
				headers.set(<span class="hljs-string">'content-length'</span>, <span class="hljs-string">'0'</span>);
			}
		}

		options.headers = headers.raw();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>http.request only support string as host header, this hack make custom host header possible</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">if</span> (options.headers.host) {
			options.headers.host = options.headers.host[<span class="hljs-number">0</span>];
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>send request</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> req = send(options);
		<span class="hljs-keyword">var</span> reqTimeout;

		<span class="hljs-keyword">if</span> (options.timeout) {
			req.once(<span class="hljs-string">'socket'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">socket</span>) </span>{
				reqTimeout = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					req.abort();
					reject(<span class="hljs-keyword">new</span> FetchError(<span class="hljs-string">'network timeout at: '</span> + options.url, <span class="hljs-string">'request-timeout'</span>));
				}, options.timeout);
			});
		}

		req.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
			clearTimeout(reqTimeout);
			reject(<span class="hljs-keyword">new</span> FetchError(<span class="hljs-string">'request to '</span> + options.url + <span class="hljs-string">' failed, reason: '</span> + err.message, <span class="hljs-string">'system'</span>, err));
		});

		req.on(<span class="hljs-string">'response'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
			clearTimeout(reqTimeout);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>handle redirect</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> (self.isRedirect(res.statusCode) &amp;&amp; options.redirect !== <span class="hljs-string">'manual'</span>) {
				<span class="hljs-keyword">if</span> (options.redirect === <span class="hljs-string">'error'</span>) {
					reject(<span class="hljs-keyword">new</span> FetchError(<span class="hljs-string">'redirect mode is set to error: '</span> + options.url, <span class="hljs-string">'no-redirect'</span>));
					<span class="hljs-keyword">return</span>;
				}

				<span class="hljs-keyword">if</span> (options.counter &gt;= options.follow) {
					reject(<span class="hljs-keyword">new</span> FetchError(<span class="hljs-string">'maximum redirect reached at: '</span> + options.url, <span class="hljs-string">'max-redirect'</span>));
					<span class="hljs-keyword">return</span>;
				}

				<span class="hljs-keyword">if</span> (!res.headers.location) {
					reject(<span class="hljs-keyword">new</span> FetchError(<span class="hljs-string">'redirect location header missing at: '</span> + options.url, <span class="hljs-string">'invalid-redirect'</span>));
					<span class="hljs-keyword">return</span>;
				}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>per fetch spec, for POST request with 301/302 response, or any request with 303 response, use GET when following redirect</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">				<span class="hljs-keyword">if</span> (res.statusCode === <span class="hljs-number">303</span>
					|| ((res.statusCode === <span class="hljs-number">301</span> || res.statusCode === <span class="hljs-number">302</span>) &amp;&amp; options.method === <span class="hljs-string">'POST'</span>))
				{
					options.method = <span class="hljs-string">'GET'</span>;
					<span class="hljs-keyword">delete</span> options.body;
					<span class="hljs-keyword">delete</span> options.headers[<span class="hljs-string">'content-length'</span>];
				}

				options.counter++;

				resolve(Fetch(resolve_url(options.url, res.headers.location), options));
				<span class="hljs-keyword">return</span>;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>normalize location header for manual redirect mode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">var</span> headers = <span class="hljs-keyword">new</span> Headers(res.headers);
			<span class="hljs-keyword">if</span> (options.redirect === <span class="hljs-string">'manual'</span> &amp;&amp; headers.has(<span class="hljs-string">'location'</span>)) {
				headers.set(<span class="hljs-string">'location'</span>, resolve_url(options.url, headers.get(<span class="hljs-string">'location'</span>)));
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>prepare response</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">var</span> body = res.pipe(<span class="hljs-keyword">new</span> stream.PassThrough());
			<span class="hljs-keyword">var</span> response_options = {
				<span class="hljs-attr">url</span>: options.url
				, <span class="hljs-attr">status</span>: res.statusCode
				, <span class="hljs-attr">statusText</span>: res.statusMessage
				, <span class="hljs-attr">headers</span>: headers
				, <span class="hljs-attr">size</span>: options.size
				, <span class="hljs-attr">timeout</span>: options.timeout
			};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>response object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">var</span> output;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>in following scenarios we ignore compression support</p>
<ol>
<li>compression support is disabled</li>
<li>HEAD request</li>
<li>no content-encoding header</li>
<li>no content response (204)</li>
<li>content not modified response (304)</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> (!options.compress || options.method === <span class="hljs-string">'HEAD'</span> || !headers.has(<span class="hljs-string">'content-encoding'</span>) || res.statusCode === <span class="hljs-number">204</span> || res.statusCode === <span class="hljs-number">304</span>) {
				output = <span class="hljs-keyword">new</span> Response(body, response_options);
				resolve(output);
				<span class="hljs-keyword">return</span>;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>otherwise, check for gzip or deflate</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">var</span> name = headers.get(<span class="hljs-string">'content-encoding'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>for gzip</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> (name == <span class="hljs-string">'gzip'</span> || name == <span class="hljs-string">'x-gzip'</span>) {
				body = body.pipe(zlib.createGunzip());
				output = <span class="hljs-keyword">new</span> Response(body, response_options);
				resolve(output);
				<span class="hljs-keyword">return</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>for deflate</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (name == <span class="hljs-string">'deflate'</span> || name == <span class="hljs-string">'x-deflate'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>handle the infamous raw deflate response from old servers
a hack for old IIS and Apache servers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">				<span class="hljs-keyword">var</span> raw = res.pipe(<span class="hljs-keyword">new</span> stream.PassThrough());
				raw.once(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>see http://stackoverflow.com/questions/37519828</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">					<span class="hljs-keyword">if</span> ((chunk[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x0F</span>) === <span class="hljs-number">0x08</span>) {
						body = body.pipe(zlib.createInflate());
					} <span class="hljs-keyword">else</span> {
						body = body.pipe(zlib.createInflateRaw());
					}
					output = <span class="hljs-keyword">new</span> Response(body, response_options);
					resolve(output);
				});
				<span class="hljs-keyword">return</span>;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>otherwise, use response as-is</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			output = <span class="hljs-keyword">new</span> Response(body, response_options);
			resolve(output);
			<span class="hljs-keyword">return</span>;
		});

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>accept string, buffer or readable stream as body
per spec we will call tostring on non-stream objects</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.body === <span class="hljs-string">'string'</span>) {
			req.write(options.body);
			req.end();
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.body <span class="hljs-keyword">instanceof</span> Buffer) {
			req.write(options.body);
			req.end()
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.body === <span class="hljs-string">'object'</span> &amp;&amp; options.body.pipe) {
			options.body.pipe(req);
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.body === <span class="hljs-string">'object'</span>) {
			req.write(options.body.toString());
			req.end();
		} <span class="hljs-keyword">else</span> {
			req.end();
		}
	});

};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>Redirect code matching</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">Number</span>
<span>code Status code
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>Boolean
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">Fetch.prototype.isRedirect = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code</span>) </span>{
	<span class="hljs-keyword">return</span> code === <span class="hljs-number">301</span> || code === <span class="hljs-number">302</span> || code === <span class="hljs-number">303</span> || code === <span class="hljs-number">307</span> || code === <span class="hljs-number">308</span>;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>expose Promise</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">Fetch.Promise = global.Promise;
Fetch.Response = Response;
Fetch.Headers = Headers;
Fetch.Request = Request;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
