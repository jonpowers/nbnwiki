<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/loader-utils/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#loader-utils">loader-utils</a>
      </div>

      <div class="heading h2">
        <a href="#methods">Methods</a>
      </div>

      <div class="heading h3">
        <a href="#getloaderconfig">getLoaderConfig</a>
      </div>

      <div class="heading h3">
        <a href="#parsequery">parseQuery</a>
      </div>

      <div class="heading h3">
        <a href="#stringifyrequest">stringifyRequest</a>
      </div>

      <div class="heading h3">
        <a href="#urltorequest">urlToRequest</a>
      </div>

      <div class="heading h4">
        <a href="#module-urls">Module URLs</a>
      </div>

      <div class="heading h4">
        <a href="#root-relative-urls">Root-relative URLs</a>
      </div>

      <div class="heading h3">
        <a href="#interpolatename">interpolateName</a>
      </div>

      <div class="heading h3">
        <a href="#gethashdigest">getHashDigest</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="loader-utils">
  <h1>
    <a href="#loader-utils" name="loader-utils" class="pilcrow"></a>
loader-utils
  </h1>
</div>
<div class="pilwrap" id="methods">
  <h2>
    <a href="#methods" name="methods" class="pilcrow"></a>
Methods
  </h2>
</div>
<div class="pilwrap" id="getloaderconfig">
  <h3>
    <a href="#getloaderconfig" name="getloaderconfig" class="pilcrow"></a>
<code>getLoaderConfig</code>
  </h3>
</div>
<p>Recommended way to retrieve the loader config:</p>
<pre><code class="javascript"><span class="hljs-comment">// inside your loader</span>
config = loaderUtils.getLoaderConfig(<span class="hljs-keyword">this</span>, <span class="hljs-string">"myLoader"</span>);
</code></pre>
<p>Tries to read the loader config from the <code>webpack.config.js</code> under the given property name (<code>&quot;myLoader&quot;</code> in this case) and merges the result with the loader query. For example, if your <code>webpack.config.js</code> had this property...</p>
<pre><code class="javascript">cheesecakeLoader: {
	<span class="hljs-attr">type</span>: <span class="hljs-string">"delicious"</span>,
	<span class="hljs-attr">slices</span>: <span class="hljs-number">4</span>
}
</code></pre>
<p>...and your loader was called with <code>?slices=8</code>, <code>getLoaderConfig(this, &quot;cheesecakeLoader&quot;)</code> would return</p>
<pre><code class="javascript">{
	<span class="hljs-attr">type</span>: <span class="hljs-string">"delicious"</span>,
	<span class="hljs-attr">slices</span>: <span class="hljs-number">8</span>
}
</code></pre>
<p>It is recommended that you use the camelCased loader name as your default config property name.</p>
<div class="pilwrap" id="parsequery">
  <h3>
    <a href="#parsequery" name="parsequery" class="pilcrow"></a>
<code>parseQuery</code>
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-keyword">var</span> query = loaderUtils.parseQuery(<span class="hljs-keyword">this</span>.query);
assert(<span class="hljs-keyword">typeof</span> query == <span class="hljs-string">"object"</span>);
<span class="hljs-keyword">if</span>(query.flag)
	<span class="hljs-comment">// ...</span>
</code></pre>
<pre><code class="text">null                   -&gt; {}
?                      -&gt; {}
?flag                  -&gt; { flag: true }
?+flag                 -&gt; { flag: true }
?-flag                 -&gt; { flag: false }
?xyz=test              -&gt; { xyz: &quot;test&quot; }
?xyz[]=a               -&gt; { xyz: [&quot;a&quot;] }
?flag1&amp;flag2           -&gt; { flag1: true, flag2: true }
?+flag1,-flag2         -&gt; { flag1: true, flag2: false }
?xyz[]=a,xyz[]=b       -&gt; { xyz: [&quot;a&quot;, &quot;b&quot;] }
?a%2C%26b=c%2C%26d     -&gt; { &quot;a,&amp;b&quot;: &quot;c,&amp;d&quot; }
?{json:5,data:{a:1}}   -&gt; { json: 5, data: { a: 1 } }
</code></pre>
<div class="pilwrap" id="stringifyrequest">
  <h3>
    <a href="#stringifyrequest" name="stringifyrequest" class="pilcrow"></a>
<code>stringifyRequest</code>
  </h3>
</div>
<p>Turns a request into a string that can be used inside <code>require()</code> or <code>import</code> while avoiding absolute paths.
Use it instead of <code>JSON.stringify(...)</code> if you're generating code inside a loader.</p>
<p><strong>Why is this necessary?</strong> Since webpack calculates the hash before module paths are translated into module ids, we must avoid absolute paths to ensure
consistent hashes across different compilations.</p>
<p>This function:</p>
<ul>
<li>resolves absolute requests into relative requests if the request and the module are on the same hard drive</li>
<li>replaces <code>\</code> with <code>/</code> if the request and the module are on the same hard drive</li>
<li>won't change the path at all if the request and the module are on different hard drives</li>
<li>applies <code>JSON.stringify</code> to the result</li>
</ul>
<pre><code class="javascript">loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">"./test.js"</span>);
<span class="hljs-comment">// "\"./test.js\""</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">".\\test.js"</span>);
<span class="hljs-comment">// "\"./test.js\""</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">"test"</span>);
<span class="hljs-comment">// "\"test\""</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">"test/lib/index.js"</span>);
<span class="hljs-comment">// "\"test/lib/index.js\""</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">"otherLoader?andConfig!test?someConfig"</span>);
<span class="hljs-comment">// "\"otherLoader?andConfig!test?someConfig\""</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">"test"</span>));
<span class="hljs-comment">// "\"../node_modules/some-loader/lib/test.js\""</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">"C:\\module\\test.js"</span>);
<span class="hljs-comment">// "\"../../test.js\"" (on Windows, in case the module and the request are on the same drive)</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">"C:\\module\\test.js"</span>);
<span class="hljs-comment">// "\"C:\\module\\test.js\"" (on Windows, in case the module and the request are on different drives)</span>

loaderUtils.stringifyRequest(<span class="hljs-keyword">this</span>, <span class="hljs-string">"\\\\network-drive\\test.js"</span>);
<span class="hljs-comment">// "\"\\\\network-drive\\\\test.js\"" (on Windows, in case the module and the request are on different drives)</span>
</code></pre>
<div class="pilwrap" id="urltorequest">
  <h3>
    <a href="#urltorequest" name="urltorequest" class="pilcrow"></a>
<code>urlToRequest</code>
  </h3>
</div>
<p>Converts some resource URL to a webpack module request.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> url = <span class="hljs-string">"path/to/module.js"</span>;
<span class="hljs-keyword">var</span> request = loaderUtils.urlToRequest(url); <span class="hljs-comment">// "./path/to/module.js"</span>
</code></pre>
<div class="pilwrap" id="module-urls">
  <h4>
    <a href="#module-urls" name="module-urls" class="pilcrow"></a>
Module URLs
  </h4>
</div>
<p>Any URL containing a <code>~</code> will be interpreted as a module request. Anything after the <code>~</code> will be considered the request path.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> url = <span class="hljs-string">"~path/to/module.js"</span>;
<span class="hljs-keyword">var</span> request = loaderUtils.urlToRequest(url); <span class="hljs-comment">// "path/to/module.js"</span>
</code></pre>
<div class="pilwrap" id="root-relative-urls">
  <h4>
    <a href="#root-relative-urls" name="root-relative-urls" class="pilcrow"></a>
Root-relative URLs
  </h4>
</div>
<p>URLs that are root-relative (start with <code>/</code>) can be resolved relative to some arbitrary path by using the <code>root</code> parameter:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> url = <span class="hljs-string">"/path/to/module.js"</span>;
<span class="hljs-keyword">var</span> root = <span class="hljs-string">"./root"</span>;
<span class="hljs-keyword">var</span> request = loaderUtils.urlToRequest(url, root); <span class="hljs-comment">// "./root/path/to/module.js"</span>
</code></pre>
<p>To convert a root-relative URL into a module URL, specify a <code>root</code> value that starts with <code>~</code>:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> url = <span class="hljs-string">"/path/to/module.js"</span>;
<span class="hljs-keyword">var</span> root = <span class="hljs-string">"~"</span>;
<span class="hljs-keyword">var</span> request = loaderUtils.urlToRequest(url, root); <span class="hljs-comment">// "path/to/module.js"</span>
</code></pre>
<div class="pilwrap" id="interpolatename">
  <h3>
    <a href="#interpolatename" name="interpolatename" class="pilcrow"></a>
<code>interpolateName</code>
  </h3>
</div>
<p>Interpolates a filename template using multiple placeholders and/or a regular expression.
The template and regular expression are set as query params called <code>name</code> and <code>regExp</code> on the current loader's context.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> interpolatedName = loaderUtils.interpolateName(loaderContext, name, options);
</code></pre>
<p>The following tokens are replaced in the <code>name</code> parameter:</p>
<ul>
<li><code>[ext]</code> the extension of the resource</li>
<li><code>[name]</code> the basename of the resource</li>
<li><code>[path]</code> the path of the resource relative to the <code>context</code> query parameter or option.</li>
<li><code>[folder]</code> the folder of the resource is in.</li>
<li><code>[emoji]</code> a random emoji representation of <code>options.content</code></li>
<li><code>[emoji:&lt;length&gt;]</code> same as above, but with a customizable number of emojis</li>
<li><code>[hash]</code> the hash of <code>options.content</code> (Buffer) (by default it's the hex digest of the md5 hash)</li>
<li><code>[&lt;hashType&gt;:hash:&lt;digestType&gt;:&lt;length&gt;]</code> optionally one can configure
<ul>
<li>other <code>hashType</code>s, i. e. <code>sha1</code>, <code>md5</code>, <code>sha256</code>, <code>sha512</code></li>
<li>other <code>digestType</code>s, i. e. <code>hex</code>, <code>base26</code>, <code>base32</code>, <code>base36</code>, <code>base49</code>, <code>base52</code>, <code>base58</code>, <code>base62</code>, <code>base64</code></li>
<li>and <code>length</code> the length in chars</li>
</ul>
</li>
<li><code>[N]</code> the N-th match obtained from matching the current file name against <code>options.regExp</code></li>
</ul>
<p>Examples</p>
<pre><code class="javascript"><span class="hljs-comment">// loaderContext.resourcePath = "/app/js/javascript.js"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"js/[hash].script.[ext]"</span>, { <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; js/9473fdd0d880a43c21b7778d34872157.script.js</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/page.html"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"html-[hash:6].html"</span>, { <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; html-9473fd.html</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/flash.txt"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"[hash]"</span>, { <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; c31e9820c001c9c4a86bce33ce43b679</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/img/image.gif"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"[emoji]"</span>, { <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; 👍</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/img/image.gif"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"[emoji:4]"</span>, { <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; 🙍🏢📤🐝</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/img/image.png"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"[sha512:hash:base64:7].[ext]"</span>, { <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; 2BKDTjl.png</span>
<span class="hljs-comment">// use sha512 hash instead of md5 and with only 7 chars of base64</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/img/myself.png"</span>
<span class="hljs-comment">// loaderContext.query.name =</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"picture.png"</span>);
<span class="hljs-comment">// =&gt; picture.png</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/dir/file.png"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"[path][name].[ext]?[hash]"</span>, { <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; /app/dir/file.png?9473fdd0d880a43c21b7778d34872157</span>

<span class="hljs-comment">// loaderContext.resourcePath = "/app/js/page-home.js"</span>
loaderUtils.interpolateName(loaderContext, <span class="hljs-string">"script-[1].[ext]"</span>, { <span class="hljs-attr">regExp</span>: <span class="hljs-string">"page-(.*)\\.js"</span>, <span class="hljs-attr">content</span>: ... });
<span class="hljs-comment">// =&gt; script-home.js</span>
</code></pre>
<div class="pilwrap" id="gethashdigest">
  <h3>
    <a href="#gethashdigest" name="gethashdigest" class="pilcrow"></a>
<code>getHashDigest</code>
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-keyword">var</span> digestString = loaderUtils.getHashDigest(buffer, hashType, digestType, maxLength);
</code></pre>
<ul>
<li><code>buffer</code> the content that should be hashed</li>
<li><code>hashType</code> one of <code>sha1</code>, <code>md5</code>, <code>sha256</code>, <code>sha512</code> or any other node.js supported hash type</li>
<li><code>digestType</code> one of <code>hex</code>, <code>base26</code>, <code>base32</code>, <code>base36</code>, <code>base49</code>, <code>base52</code>, <code>base58</code>, <code>base62</code>, <code>base64</code></li>
<li><code>maxLength</code> the maximum length in chars</li>
</ul>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>MIT (http://www.opensource.org/licenses/mit-license.php)</p>
</div>
  </div>
</body>
</html>
