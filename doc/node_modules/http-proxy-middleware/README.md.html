<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/http-proxy-middleware/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#http-proxy-middleware">http-proxy-middleware</a>
      </div>

      <div class="heading h2">
        <a href="#tldr">TL;DR</a>
      </div>

      <div class="heading h2">
        <a href="#table-of-contents">Table of Contents</a>
      </div>

      <div class="heading h2">
        <a href="#install">Install</a>
      </div>

      <div class="heading h2">
        <a href="#core-concept">Core concept</a>
      </div>

      <div class="heading h4">
        <a href="#proxy-context-config">proxy([context,] config)</a>
      </div>

      <div class="heading h4">
        <a href="#proxy-uri-config">proxy(uri [, config])</a>
      </div>

      <div class="heading h2">
        <a href="#example">Example</a>
      </div>

      <div class="heading h2">
        <a href="#context-matching">Context matching</a>
      </div>

      <div class="heading h2">
        <a href="#options">Options</a>
      </div>

      <div class="heading h3">
        <a href="#http-proxy-middleware-options">http-proxy-middleware options</a>
      </div>

      <div class="heading h3">
        <a href="#http-proxy-events">http-proxy events</a>
      </div>

      <div class="heading h3">
        <a href="#http-proxy-options">http-proxy options</a>
      </div>

      <div class="heading h2">
        <a href="#shorthand">Shorthand</a>
      </div>

      <div class="heading h3">
        <a href="#app.use-path-proxy">app.use(path, proxy)</a>
      </div>

      <div class="heading h2">
        <a href="#websocket">WebSocket</a>
      </div>

      <div class="heading h3">
        <a href="#external-websocket-upgrade">External WebSocket upgrade</a>
      </div>

      <div class="heading h2">
        <a href="#working-examples">Working examples</a>
      </div>

      <div class="heading h2">
        <a href="#recipes">Recipes</a>
      </div>

      <div class="heading h2">
        <a href="#compatible-servers">Compatible servers</a>
      </div>

      <div class="heading h2">
        <a href="#tests">Tests</a>
      </div>

      <div class="heading h2">
        <a href="#changelog">Changelog</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="http-proxy-middleware">
  <h1>
    <a href="#http-proxy-middleware" name="http-proxy-middleware" class="pilcrow"></a>
http-proxy-middleware
  </h1>
</div>
<p><a href="https://travis-ci.org/chimurai/http-proxy-middleware"><img src="https://img.shields.io/travis/chimurai/http-proxy-middleware/master.svg?style=flat-square" alt="Build Status"></a>
<a href="https://coveralls.io/r/chimurai/http-proxy-middleware"><img src="https://img.shields.io/coveralls/chimurai/http-proxy-middleware.svg?style=flat-square" alt="Coveralls"></a>
<a href="https://david-dm.org/chimurai/http-proxy-middleware#info=dependencies"><img src="https://img.shields.io/david/chimurai/http-proxy-middleware.svg?style=flat-square" alt="dependency Status"></a>
<a href="https://snyk.io/test/npm/http-proxy-middleware"><img src="https://snyk.io/test/npm/http-proxy-middleware/badge.svg" alt="dependency Status"></a></p>
<p>Node.js proxying made simple. Configure proxy middleware with ease for <a href="https://github.com/senchalabs/connect">connect</a>, <a href="https://github.com/strongloop/express">express</a>, <a href="https://github.com/BrowserSync/browser-sync">browser-sync</a> and <a href="#compatible-servers.html">many more</a>.</p>
<p>Powered by the popular Nodejitsu <a href="https://github.com/nodejitsu/node-http-proxy"><code>http-proxy</code></a>. <a href="https://github.com/nodejitsu/node-http-proxy"><img src="https://img.shields.io/github/stars/nodejitsu/node-http-proxy.svg?style=social&amp;label=Star" alt="GitHub stars"></a></p>
<div class="pilwrap" id="tldr">
  <h2>
    <a href="#tldr" name="tldr" class="pilcrow"></a>
TL;DR
  </h2>
</div>
<p>Proxy <code>/api</code> requests to <code>http://www.example.org</code></p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> proxy = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);

<span class="hljs-keyword">var</span> app = express();

app.use(<span class="hljs-string">'/api'</span>, proxy({<span class="hljs-attr">target</span>: <span class="hljs-string">'http://www.example.org'</span>, <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>}));
app.listen(<span class="hljs-number">3000</span>);

<span class="hljs-comment">// http://localhost:3000/api/foo/bar -&gt; http://www.example.org/api/foo/bar</span>
</code></pre>
<p><em>All</em> <code>http-proxy</code> <a href="https://github.com/nodejitsu/node-http-proxy#options">options</a> can be used, along with some extra <code>http-proxy-middleware</code> <a href="#options.html">options</a>.</p>
<p>:bulb: <strong>Tip:</strong> Set the option <code>changeOrigin</code> to <code>true</code> for <a href="http://en.wikipedia.org/wiki/Virtual_hosting#Name-based">name-based virtual hosted sites</a>.</p>
<div class="pilwrap" id="table-of-contents">
  <h2>
    <a href="#table-of-contents" name="table-of-contents" class="pilcrow"></a>
Table of Contents
  </h2>
</div>
<!-- MarkdownTOC autolink=true bracket=round depth=2 -->
<ul>
<li><a href="#install.html">Install</a></li>
<li><a href="#core-concept.html">Core concept</a></li>
<li><a href="#example.html">Example</a></li>
<li><a href="#context-matching.html">Context matching</a></li>
<li><a href="#options.html">Options</a>
<ul>
<li><a href="#http-proxy-middleware-options.html">http-proxy-middleware options</a></li>
<li><a href="#http-proxy-events.html">http-proxy events</a></li>
<li><a href="#http-proxy-options.html">http-proxy options</a></li>
</ul>
</li>
<li><a href="#shorthand.html">Shorthand</a>
<ul>
<li><a href="#appusepath-proxy.html">app.use(path, proxy)</a></li>
</ul>
</li>
<li><a href="#websocket.html">WebSocket</a>
<ul>
<li><a href="#external-websocket-upgrade.html">External WebSocket upgrade</a></li>
</ul>
</li>
<li><a href="#working-examples.html">Working examples</a></li>
<li><a href="#recipes.html">Recipes</a></li>
<li><a href="#compatible-servers.html">Compatible servers</a></li>
<li><a href="#tests.html">Tests</a></li>
<li><a href="#changelog.html">Changelog</a></li>
<li><a href="#license.html">License</a></li>
</ul>
<!-- /MarkdownTOC -->
<div class="pilwrap" id="install">
  <h2>
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h2>
</div>
<pre><code class="javascript">$ npm install --save-dev http-proxy-middleware
</code></pre>
<div class="pilwrap" id="core-concept">
  <h2>
    <a href="#core-concept" name="core-concept" class="pilcrow"></a>
Core concept
  </h2>
</div>
<p>Proxy middleware configuration.</p>
<div class="pilwrap" id="proxy-context-config">
  <h4>
    <a href="#proxy-context-config" name="proxy-context-config" class="pilcrow"></a>
proxy([context,] config)
  </h4>
</div>
<pre><code class="javascript"><span class="hljs-keyword">var</span> proxy = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);

<span class="hljs-keyword">var</span> apiProxy = proxy(<span class="hljs-string">'/api'</span>, {<span class="hljs-attr">target</span>: <span class="hljs-string">'http://www.example.org'</span>});
<span class="hljs-comment">//                   \____/   \_____________________________/</span>
<span class="hljs-comment">//                     |                    |</span>
<span class="hljs-comment">//                   context             options</span>

<span class="hljs-comment">// 'apiProxy' is now ready to be used as middleware in a server.</span>
</code></pre>
<ul>
<li><strong>context</strong>: Determine which requests should be proxied to the target host.
(more on <a href="#context-matching.html">context matching</a>)</li>
<li><strong>options.target</strong>: target host to proxy to. <em>(protocol + host)</em></li>
</ul>
<p>(full list of <a href="#options.html"><code>http-proxy-middleware</code> configuration options</a>)</p>
<div class="pilwrap" id="proxy-uri-config">
  <h4>
    <a href="#proxy-uri-config" name="proxy-uri-config" class="pilcrow"></a>
proxy(uri [, config])
  </h4>
</div>
<pre><code class="javascript"><span class="hljs-comment">// shorthand syntax for the example above:</span>
<span class="hljs-keyword">var</span> apiProxy = proxy(<span class="hljs-string">'http://www.example.org/api'</span>);

</code></pre>
<p>More about the <a href="#shorthand.html">shorthand configuration</a>.</p>
<div class="pilwrap" id="example">
  <h2>
    <a href="#example" name="example" class="pilcrow"></a>
Example
  </h2>
</div>
<p>An example with <code>express</code> server.</p>
<pre><code class="javascript"><span class="hljs-comment">// include dependencies</span>
<span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> proxy = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);

<span class="hljs-comment">// proxy middleware options</span>
<span class="hljs-keyword">var</span> options = {
        <span class="hljs-attr">target</span>: <span class="hljs-string">'http://www.example.org'</span>, <span class="hljs-comment">// target host</span>
        changeOrigin: <span class="hljs-literal">true</span>,               <span class="hljs-comment">// needed for virtual hosted sites</span>
        ws: <span class="hljs-literal">true</span>,                         <span class="hljs-comment">// proxy websockets</span>
        pathRewrite: {
            <span class="hljs-string">'^/api/old-path'</span> : <span class="hljs-string">'/api/new-path'</span>,     <span class="hljs-comment">// rewrite path</span>
            <span class="hljs-string">'^/api/remove/path'</span> : <span class="hljs-string">'/path'</span>           <span class="hljs-comment">// remove base path</span>
        },
        <span class="hljs-attr">router</span>: {
            <span class="hljs-comment">// when request.headers.host == 'dev.localhost:3000',</span>
            <span class="hljs-comment">// override target 'http://www.example.org' to 'http://localhost:8000'</span>
            <span class="hljs-string">'dev.localhost:3000'</span> : <span class="hljs-string">'http://localhost:8000'</span>
        }
    };

<span class="hljs-comment">// create the proxy (without context)</span>
<span class="hljs-keyword">var</span> exampleProxy = proxy(options);

<span class="hljs-comment">// mount `exampleProxy` in web server</span>
<span class="hljs-keyword">var</span> app = express();
    app.use(<span class="hljs-string">'/api'</span>, exampleProxy);
    app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<div class="pilwrap" id="context-matching">
  <h2>
    <a href="#context-matching" name="context-matching" class="pilcrow"></a>
Context matching
  </h2>
</div>
<p>Providing an alternative way to decide which requests should be proxied; In case you are not able to use the server's <a href="http://expressjs.com/en/4x/api.html#app.use"><code>path</code> parameter</a> to mount the proxy or when you need more flexibility.</p>
<p>The <a href="https://tools.ietf.org/html/rfc3986#section-3.3">RFC 3986 <code>path</code></a> is be used for context matching.</p>
<pre><code>         foo://example.com:8042/over/there?name=ferret#nose
         \_/   \______________/\_________/ \_________/ \__/
          |           |            |            |        |
       scheme     authority       path        query   fragment
</code></pre>
<ul>
<li>
<p><strong>path matching</strong></p>
<ul>
<li><code>proxy({...})</code> - matches any path, all requests will be proxied.</li>
<li><code>proxy('/', {...})</code> - matches any path, all requests will be proxied.</li>
<li><code>proxy('/api', {...})</code> - matches paths starting with <code>/api</code></li>
</ul>
</li>
<li>
<p><strong>multiple path matching</strong></p>
<ul>
<li><code>proxy(['/api', '/ajax', '/someotherpath'], {...})</code></li>
</ul>
</li>
<li>
<p><strong>wildcard path matching</strong></p>
<p>For fine-grained control you can use wildcard matching. Glob pattern matching is done by <em>micromatch</em>. Visit <a href="https://www.npmjs.com/package/micromatch">micromatch</a> or <a href="https://www.npmjs.com/package/glob">glob</a> for more globbing examples.</p>
<ul>
<li><code>proxy('**', {...})</code> matches any path, all requests will be proxied.</li>
<li><code>proxy('**/*.html', {...})</code> matches any path which ends with <code>.html</code></li>
<li><code>proxy('/*.html', {...})</code> matches paths directly under path-absolute</li>
<li><code>proxy('/api/**/*.html', {...})</code> matches requests ending with <code>.html</code> in the path of <code>/api</code></li>
<li><code>proxy(['/api/**', '/ajax/**'], {...})</code> combine multiple patterns</li>
<li><code>proxy(['/api/**', '!**/bad.json'], {...})</code> exclusion</li>
</ul>
</li>
<li>
<p><strong>custom matching</strong></p>
<p>For full control you can provide a custom function to determine which requests should be proxied or not.</p>
<pre><code class="javascript"><span class="hljs-comment">/**
 * @return {Boolean}
 */</span>
<span class="hljs-keyword">var</span> filter = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">pathname, req</span>) </span>{
    <span class="hljs-keyword">return</span> (pathname.match(<span class="hljs-string">'^/api'</span>) &amp;&amp; req.method === <span class="hljs-string">'GET'</span>);
};

<span class="hljs-keyword">var</span> apiProxy = proxy(filter, {<span class="hljs-attr">target</span>: <span class="hljs-string">'http://www.example.org'</span>})
</code></pre>
</li>
</ul>
<div class="pilwrap" id="options">
  <h2>
    <a href="#options" name="options" class="pilcrow"></a>
Options
  </h2>
</div>
<div class="pilwrap" id="http-proxy-middleware-options">
  <h3>
    <a href="#http-proxy-middleware-options" name="http-proxy-middleware-options" class="pilcrow"></a>
http-proxy-middleware options
  </h3>
</div>
<ul>
<li>
<p><strong>option.pathRewrite</strong>: object/function, rewrite target's url path. Object-keys will be used as <em>RegExp</em> to match paths.</p>
<pre><code class="javascript"><span class="hljs-comment">// rewrite path</span>
pathRewrite: {<span class="hljs-string">'^/old/api'</span> : <span class="hljs-string">'/new/api'</span>}

<span class="hljs-comment">// remove path</span>
pathRewrite: {<span class="hljs-string">'^/remove/api'</span> : <span class="hljs-string">''</span>}

<span class="hljs-comment">// add base path</span>
pathRewrite: {<span class="hljs-string">'^/'</span> : <span class="hljs-string">'/basepath/'</span>}

<span class="hljs-comment">// custom rewriting</span>
pathRewrite: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path, req</span>) </span>{ <span class="hljs-keyword">return</span> path.replace(<span class="hljs-string">'/api'</span>, <span class="hljs-string">'/base/api'</span>) }
</code></pre>
</li>
<li>
<p><strong>option.router</strong>: object/function, re-target <code>option.target</code> for specific requests.</p>
<pre><code class="javascript"><span class="hljs-comment">// Use `host` and/or `path` to match requests. First match will be used.</span>
<span class="hljs-comment">// The order of the configuration matters.</span>
router: {
    <span class="hljs-string">'integration.localhost:3000'</span> : <span class="hljs-string">'http://localhost:8001'</span>,  <span class="hljs-comment">// host only</span>
    <span class="hljs-string">'staging.localhost:3000'</span>     : <span class="hljs-string">'http://localhost:8002'</span>,  <span class="hljs-comment">// host only</span>
    <span class="hljs-string">'localhost:3000/api'</span>         : <span class="hljs-string">'http://localhost:8003'</span>,  <span class="hljs-comment">// host + path</span>
    <span class="hljs-string">'/rest'</span>                      : <span class="hljs-string">'http://localhost:8004'</span>   <span class="hljs-comment">// path only</span>
}

<span class="hljs-comment">// Custom router function</span>
router: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">'http://localhost:8004'</span>;
}
</code></pre>
</li>
<li>
<p><strong>option.logLevel</strong>: string, ['debug', 'info', 'warn', 'error', 'silent']. Default: <code>'info'</code></p>
</li>
<li>
<p><strong>option.logProvider</strong>: function, modify or replace log provider. Default: <code>console</code>.</p>
<pre><code class="javascript"><span class="hljs-comment">// simple replace</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logProvider</span>(<span class="hljs-params">provider</span>) </span>{
    <span class="hljs-comment">// replace the default console log provider.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">'winston'</span>);
}
</code></pre>
<pre><code class="javascript"><span class="hljs-comment">// verbose replacement</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logProvider</span>(<span class="hljs-params">provider</span>) </span>{
    <span class="hljs-keyword">var</span> logger = <span class="hljs-keyword">new</span> (<span class="hljs-built_in">require</span>(<span class="hljs-string">'winston'</span>).Logger)();

    <span class="hljs-keyword">var</span> myCustomProvider = {
        <span class="hljs-attr">log</span>: logger.log,
        <span class="hljs-attr">debug</span>: logger.debug,
        <span class="hljs-attr">info</span>: logger.info,
        <span class="hljs-attr">warn</span>: logger.warn,
        <span class="hljs-attr">error</span>: logger.error
    }
    <span class="hljs-keyword">return</span> myCustomProvider;
}
</code></pre>
</li>
<li>
<p>(DEPRECATED) <strong>option.proxyHost</strong>: Use <code>option.changeOrigin = true</code> instead.</p>
</li>
<li>
<p>(DEPRECATED) <strong>option.proxyTable</strong>: Use <code>option.router</code> instead.</p>
</li>
</ul>
<div class="pilwrap" id="http-proxy-events">
  <h3>
    <a href="#http-proxy-events" name="http-proxy-events" class="pilcrow"></a>
http-proxy events
  </h3>
</div>
<p>Subscribe to <a href="https://github.com/nodejitsu/node-http-proxy#listening-for-proxy-events">http-proxy events</a>:</p>
<ul>
<li>
<p><strong>option.onError</strong>: function, subscribe to http-proxy's <code>error</code> event for custom error handling.</p>
<pre><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onError</span>(<span class="hljs-params">err, req, res</span>) </span>{
    res.writeHead(<span class="hljs-number">500</span>, {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/plain'</span>
    });
    res.end(<span class="hljs-string">'Something went wrong. And we are reporting a custom error message.'</span>);
}
</code></pre>
</li>
<li>
<p><strong>option.onProxyRes</strong>: function, subscribe to http-proxy's <code>proxyRes</code> event.</p>
<pre><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onProxyRes</span>(<span class="hljs-params">proxyRes, req, res</span>) </span>{
    proxyRes.headers[<span class="hljs-string">'x-added'</span>] = <span class="hljs-string">'foobar'</span>;     <span class="hljs-comment">// add new header to response</span>
    <span class="hljs-keyword">delete</span> proxyRes.headers[<span class="hljs-string">'x-removed'</span>];       <span class="hljs-comment">// remove header from response</span>
}
</code></pre>
</li>
<li>
<p><strong>option.onProxyReq</strong>: function, subscribe to http-proxy's <code>proxyReq</code> event.</p>
<pre><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onProxyReq</span>(<span class="hljs-params">proxyReq, req, res</span>) </span>{
    <span class="hljs-comment">// add custom header to request</span>
    proxyReq.setHeader(<span class="hljs-string">'x-added'</span>, <span class="hljs-string">'foobar'</span>);
    <span class="hljs-comment">// or log the req</span>
}
</code></pre>
</li>
<li>
<p><strong>option.onProxyReqWs</strong>: function, subscribe to http-proxy's <code>proxyReqWs</code> event.</p>
<pre><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onProxyReqWs</span>(<span class="hljs-params">proxyReq, req, socket, options, head</span>) </span>{
    <span class="hljs-comment">// add custom header</span>
    proxyReq.setHeader(<span class="hljs-string">'X-Special-Proxy-Header'</span>, <span class="hljs-string">'foobar'</span>);
}
</code></pre>
</li>
<li>
<p><strong>option.onOpen</strong>: function, subscribe to http-proxy's <code>open</code> event.</p>
<pre><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onOpen</span>(<span class="hljs-params">proxySocket</span>) </span>{
    <span class="hljs-comment">// listen for messages coming FROM the target here</span>
    proxySocket.on(<span class="hljs-string">'data'</span>, hybiParseAndLogMessage);
}
</code></pre>
</li>
<li>
<p><strong>option.onClose</strong>: function, subscribe to http-proxy's <code>close</code> event.</p>
<pre><code class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onClose</span>(<span class="hljs-params">res, socket, head</span>) </span>{
    <span class="hljs-comment">// view disconnected websocket connections</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Client disconnected'</span>);
}
</code></pre>
</li>
</ul>
<div class="pilwrap" id="http-proxy-options">
  <h3>
    <a href="#http-proxy-options" name="http-proxy-options" class="pilcrow"></a>
http-proxy options
  </h3>
</div>
<p>The following options are provided by the underlying <a href="https://github.com/nodejitsu/node-http-proxy#options">http-proxy</a> library.</p>
<ul>
<li><strong>option.target</strong>: url string to be parsed with the url module</li>
<li><strong>option.forward</strong>: url string to be parsed with the url module</li>
<li><strong>option.agent</strong>: object to be passed to http(s).request (see Node's <a href="http://nodejs.org/api/https.html#https_class_https_agent">https agent</a> and <a href="http://nodejs.org/api/http.html#http_class_http_agent">http agent</a> objects)</li>
<li><strong>option.ssl</strong>: object to be passed to https.createServer()</li>
<li><strong>option.ws</strong>: true/false: if you want to proxy websockets</li>
<li><strong>option.xfwd</strong>: true/false, adds x-forward headers</li>
<li><strong>option.secure</strong>: true/false, if you want to verify the SSL Certs</li>
<li><strong>option.toProxy</strong>: true/false, passes the absolute URL as the <code>path</code> (useful for proxying to proxies)</li>
<li><strong>option.prependPath</strong>: true/false, Default: true - specify whether you want to prepend the target's path to the proxy path</li>
<li><strong>option.ignorePath</strong>: true/false, Default: false - specify whether you want to ignore the proxy path of the incoming request (note: you will have to append / manually if required).</li>
<li><strong>option.localAddress</strong> : Local interface string to bind for outgoing connections</li>
<li><strong>option.changeOrigin</strong>: true/false, Default: false - changes the origin of the host header to the target URL</li>
<li><strong>option.auth</strong> : Basic authentication i.e. 'user:password' to compute an Authorization header.</li>
<li><strong>option.hostRewrite</strong>: rewrites the location hostname on (301/302/307/308) redirects.</li>
<li><strong>option.autoRewrite</strong>: rewrites the location host/port on (301/302/307/308) redirects based on requested host/port. Default: false.</li>
<li><strong>option.protocolRewrite</strong>: rewrites the location protocol on (301/302/307/308) redirects to 'http' or 'https'. Default: null.</li>
<li><strong>option.cookieDomainRewrite</strong>: rewrites domain of <code>set-cookie</code> headers. Possible values:
<ul>
<li><code>false</code> (default): disable cookie rewriting</li>
<li>String: new domain, for example <code>cookieDomainRewrite: &quot;new.domain&quot;</code>. To remove the domain, use <code>cookieDomainRewrite: &quot;&quot;</code>.</li>
<li>Object: mapping of domains to new domains, use <code>&quot;*&quot;</code> to match all domains.<br>
For example keep one domain unchanged, rewrite one domain and remove other domains:<pre><code>cookieDomainRewrite: {
  &quot;unchanged.domain&quot;: &quot;unchanged.domain&quot;,
  &quot;old.domain&quot;: &quot;new.domain&quot;,
  &quot;*&quot;: &quot;&quot;
}
</code></pre>
</li>
</ul>
</li>
<li><strong>option.headers</strong>: object, adds <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fields">request headers</a>. (Example: <code>{host:'www.example.org'}</code>)</li>
<li><strong>option.proxyTimeout</strong>: timeout (in millis) when proxy receives no response from target</li>
</ul>
<div class="pilwrap" id="shorthand">
  <h2>
    <a href="#shorthand" name="shorthand" class="pilcrow"></a>
Shorthand
  </h2>
</div>
<p>Use the shorthand syntax when verbose configuration is not needed. The <code>context</code> and <code>option.target</code> will be automatically configured when shorthand is used. Options can still be used if needed.</p>
<pre><code class="javascript">proxy(<span class="hljs-string">'http://www.example.org:8000/api'</span>);
<span class="hljs-comment">// proxy('/api', {target: 'http://www.example.org:8000'});</span>


proxy(<span class="hljs-string">'http://www.example.org:8000/api/books/*/**.json'</span>);
<span class="hljs-comment">// proxy('/api/books/*/**.json', {target: 'http://www.example.org:8000'});</span>


proxy(<span class="hljs-string">'http://www.example.org:8000/api'</span>, {<span class="hljs-attr">changeOrigin</span>:<span class="hljs-literal">true</span>});
<span class="hljs-comment">// proxy('/api', {target: 'http://www.example.org:8000', changeOrigin: true});</span>
</code></pre>
<div class="pilwrap" id="app.use-path-proxy">
  <h3>
    <a href="#app.use-path-proxy" name="app.use-path-proxy" class="pilcrow"></a>
app.use(path, proxy)
  </h3>
</div>
<p>If you want to use the server's <code>app.use</code> <code>path</code> parameter to match requests;
Create and mount the proxy without the http-proxy-middleware <code>context</code> parameter:</p>
<pre><code class="javascript">app.use(<span class="hljs-string">'/api'</span>, proxy({<span class="hljs-attr">target</span>:<span class="hljs-string">'http://www.example.org'</span>, <span class="hljs-attr">changeOrigin</span>:<span class="hljs-literal">true</span>}));
</code></pre>
<p><code>app.use</code> documentation:</p>
<ul>
<li>express: http://expressjs.com/en/4x/api.html#app.use</li>
<li>connect: https://github.com/senchalabs/connect#mount-middleware</li>
</ul>
<div class="pilwrap" id="websocket">
  <h2>
    <a href="#websocket" name="websocket" class="pilcrow"></a>
WebSocket
  </h2>
</div>
<pre><code class="javascript"><span class="hljs-comment">// verbose api</span>
proxy(<span class="hljs-string">'/'</span>, {<span class="hljs-attr">target</span>:<span class="hljs-string">'http://echo.websocket.org'</span>, <span class="hljs-attr">ws</span>:<span class="hljs-literal">true</span>});

<span class="hljs-comment">// shorthand</span>
proxy(<span class="hljs-string">'http://echo.websocket.org'</span>, {<span class="hljs-attr">ws</span>:<span class="hljs-literal">true</span>});

<span class="hljs-comment">// shorter shorthand</span>
proxy(<span class="hljs-string">'ws://echo.websocket.org'</span>);
</code></pre>
<div class="pilwrap" id="external-websocket-upgrade">
  <h3>
    <a href="#external-websocket-upgrade" name="external-websocket-upgrade" class="pilcrow"></a>
External WebSocket upgrade
  </h3>
</div>
<p>In the previous WebSocket examples, http-proxy-middleware relies on a initial http request in order to listen to the http <code>upgrade</code> event. If you need to proxy WebSockets without the initial http request, you can subscribe to the server's http <code>upgrade</code> event manually.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> wsProxy = proxy(<span class="hljs-string">'ws://echo.websocket.org'</span>, {<span class="hljs-attr">changeOrigin</span>:<span class="hljs-literal">true</span>});

<span class="hljs-keyword">var</span> app = express();
    app.use(wsProxy);

<span class="hljs-keyword">var</span> server = app.listen(<span class="hljs-number">3000</span>);
    server.on(<span class="hljs-string">'upgrade'</span>, wsProxy.upgrade);  <span class="hljs-comment">// &lt;-- subscribe to http 'upgrade'</span>
</code></pre>
<div class="pilwrap" id="working-examples">
  <h2>
    <a href="#working-examples" name="working-examples" class="pilcrow"></a>
Working examples
  </h2>
</div>
<p>View and play around with <a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples">working examples</a>.</p>
<ul>
<li>Browser-Sync (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/browser-sync/index.js">example source</a>)</li>
<li>express (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/express/index.js">example source</a>)</li>
<li>connect (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/connect/index.js">example source</a>)</li>
<li>WebSocket (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/websocket/index.js">example source</a>)</li>
</ul>
<div class="pilwrap" id="recipes">
  <h2>
    <a href="#recipes" name="recipes" class="pilcrow"></a>
Recipes
  </h2>
</div>
<p>View the <a href="https://github.com/chimurai/http-proxy-middleware/tree/master/recipes">recipes</a> for common use cases.</p>
<div class="pilwrap" id="compatible-servers">
  <h2>
    <a href="#compatible-servers" name="compatible-servers" class="pilcrow"></a>
Compatible servers
  </h2>
</div>
<p><code>http-proxy-middleware</code> is compatible with the following servers:</p>
<ul>
<li><a href="https://www.npmjs.com/package/connect">connect</a></li>
<li><a href="https://www.npmjs.com/package/express">express</a></li>
<li><a href="https://www.npmjs.com/package/browser-sync">browser-sync</a></li>
<li><a href="https://www.npmjs.com/package/lite-server">lite-server</a></li>
<li><a href="https://www.npmjs.com/package/grunt-contrib-connect">grunt-contrib-connect</a></li>
<li><a href="https://www.npmjs.com/package/grunt-browser-sync">grunt-browser-sync</a></li>
<li><a href="https://www.npmjs.com/package/gulp-connect">gulp-connect</a></li>
<li><a href="https://www.npmjs.com/package/gulp-webserver">gulp-webserver</a></li>
</ul>
<p>Sample implementations can be found in the <a href="https://github.com/chimurai/http-proxy-middleware/tree/master/recipes/servers.md">server recipes</a>.</p>
<div class="pilwrap" id="tests">
  <h2>
    <a href="#tests" name="tests" class="pilcrow"></a>
Tests
  </h2>
</div>
<p>Run the test suite:</p>
<pre><code class="bash"><span class="hljs-comment"># install dependencies</span>
$ npm install
</code></pre>
<p>unit testing</p>
<pre><code class="bash"><span class="hljs-comment"># unit tests</span>
$ npm <span class="hljs-built_in">test</span>
</code></pre>
<p>coverage</p>
<pre><code class="bash"><span class="hljs-comment"># code coverage</span>
$ npm run cover
</code></pre>
<div class="pilwrap" id="changelog">
  <h2>
    <a href="#changelog" name="changelog" class="pilcrow"></a>
Changelog
  </h2>
</div>
<ul>
<li><a href="https://github.com/chimurai/http-proxy-middleware/blob/master/CHANGELOG.md">View changelog</a></li>
</ul>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>The MIT License (MIT)</p>
<p>Copyright (c) 2015-2017 Steven Chim</p>
</div>
  </div>
</body>
</html>
