<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/async-listener/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#process.addasynclistener-polyfill">process.addAsyncListener polyfill</a>
      </div>

      <div class="heading h2">
        <a href="#createasynclistener-callbacks-initialstorage">createAsyncListener(callbacks[, initialStorage])</a>
      </div>

      <div class="heading h2">
        <a href="#addasynclistener-callbacks-initialstorage">addAsyncListener(callbacks[, initialStorage])</a>
      </div>

      <div class="heading h2">
        <a href="#addasynclistener-asynclistener">addAsyncListener(asyncListener)</a>
      </div>

      <div class="heading h2">
        <a href="#removeasynclistener-asynclistener">removeAsyncListener(asyncListener)</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><p><a href="https://nodei.co/npm/async-listener/"><img src="https://nodei.co/npm/async-listener.png?downloads=true&amp;stars=true" alt="NPM"></a></p>
<div class="pilwrap" id="process.addasynclistener-polyfill">
  <h1>
    <a href="#process.addasynclistener-polyfill" name="process.addasynclistener-polyfill" class="pilcrow"></a>
process.addAsyncListener polyfill
  </h1>
</div>
<p>This is an implementation of Trevor Norris's
process.{addAsyncListener,removeAsyncListener} API for adding behavior to async
calls. You can see his implementation (currently a work in progress) on
<a href="https://github.com/joyent/node/pull/6011">Node.js core pull request #6011</a>.
This polyfill / shim is intended for use in versions of Node prior to whatever
version of Node in which Trevor's changes finally land (anticipated at the time
of this writing as 0.11.7).</p>
<p>Here's his documentation of the intended API, which will probably get cleaned up
here later:</p>
<div class="pilwrap" id="createasynclistener-callbacks-initialstorage">
  <h2>
    <a href="#createasynclistener-callbacks-initialstorage" name="createasynclistener-callbacks-initialstorage" class="pilcrow"></a>
createAsyncListener(callbacks[, initialStorage])
  </h2>
</div>
<ul>
<li><code>callbacks</code> {Object}</li>
<li><code>initialStorage</code> {Value}</li>
</ul>
<p>Returns a constructed <code>AsyncListener</code> object. Which can then be passed to
<code>process.addAsyncListener()</code> and <code>process.removeAsyncListener()</code>. Each
function parameter is as follows:</p>
<ol>
<li><code>callbacks</code>: An <code>Object</code> which may contain four optional fields:
<ul>
<li><code>create</code>: A <code>function (storage)</code> that is called when an asynchronous event
is queued. Recives the <code>storage</code> attached to the listner. <code>storage</code> can be
created by passing an <code>initialStorage</code> argument during costruction, or by
returning a <code>Value</code> from <code>create</code> which will be attached to the listner
and overwrite the <code>initialStorage</code>.</li>
<li><code>before</code>: A <code>function (context, storage)</code> that is called immediately
before the asynchronous callback is about to run. It will be passed both
the <code>context</code> (i.e. <code>this</code>) of the calling function and the <code>storage</code>.</li>
<li><code>after</code>: A <code>function (context, storage)</code> called immediately after the
asynchronous event's callback is run. Note that if the event's callback
throws during execution this will not be called.</li>
<li><code>error</code>: A <code>function (storage, error)</code> called if the event's callback
threw. If <code>error</code> returns <code>true</code> then Node will assume the error has been
properly handled and resume execution normally.</li>
</ul>
</li>
<li><code>initialStorage</code>: A <code>Value</code> (i.e. anything) that will be, by default,
attached to all new event instances. This will be overwritten if a <code>Value</code>
is returned by <code>create()</code>.</li>
</ol>
<div class="pilwrap" id="addasynclistener-callbacks-initialstorage">
  <h2>
    <a href="#addasynclistener-callbacks-initialstorage" name="addasynclistener-callbacks-initialstorage" class="pilcrow"></a>
addAsyncListener(callbacks[, initialStorage])
  </h2>
</div>
<div class="pilwrap" id="addasynclistener-asynclistener">
  <h2>
    <a href="#addasynclistener-asynclistener" name="addasynclistener-asynclistener" class="pilcrow"></a>
addAsyncListener(asyncListener)
  </h2>
</div>
<p>Returns a constructed <code>AsyncListener</code> object and immediately adds it to the
listening queue.</p>
<div class="pilwrap" id="removeasynclistener-asynclistener">
  <h2>
    <a href="#removeasynclistener-asynclistener" name="removeasynclistener-asynclistener" class="pilcrow"></a>
removeAsyncListener(asyncListener)
  </h2>
</div>
<p>Removes the <code>asyncListener</code> from the listening queue.</p>
</div>
  </div>
</body>
</html>
